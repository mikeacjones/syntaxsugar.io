<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.63006906bb0ecee1c748.css" id="gatsby-global-css">.codeWrapper{position:relative;max-width:98%;margin-left:auto;margin-right:auto}.ConfettiWrapper{position:absolute;top:0;right:0;z-index:9}.CodeLanguageStub{left:8px;box-shadow:"none";-webkit-user-select:none;-ms-user-select:none;user-select:none}.CodeLanguageStub,.CopyCodeButton{position:absolute;top:0;margin:0;border:none;padding:8px 12px;background:#52307c;border-bottom-left-radius:8px;border-bottom-right-radius:8px;color:#ffffd2;font-size:14px;font-family:Ubuntu Mono,monospace;line-height:1;z-index:90}.CopyCodeButton{right:8px;box-shadow:none;text-decoration:none;cursor:pointer}.CodeWrapper-pre{text-align:left;margin:1em 0;padding:2rem;position:relative;overflow-x:auto;border-radius:3px;font-family:Ubuntu Mono,monospace}.CodeWrapper-pre .token-line{line-height:1.3em;white-space:pre-wrap}.CodeWrapper-span{display:inline-block;width:2em;-webkit-user-select:none;-ms-user-select:none;user-select:none;opacity:.3}code{font-family:Ubuntu Mono,monospace;font-size:1em!important}.grvsc-source{display:inline-block}span.grvsc-source>span{display:inline-block;word-break:break-all;word-wrap:break-word}.gatsby-resp-image-wrapper,.ZoomableImage{width:98%!important;max-width:700px!important;overflow:hidden;cursor:pointer;margin-left:auto;margin-right:auto;box-shadow:none!important}.ZoomableImage-enlarged{position:fixed;top:0;left:0;right:0;bottom:0;cursor:pointer;display:flex;padding:50px;z-index:100;background-color:rgba(0,0,0,.8)}.ZoomableImage-enlarged img{width:100%;height:auto;position:unset!important;box-shadow:none!important}#SocialIcons{height:60px;font-size:25px;width:100%;display:flex;justify-content:space-evenly}#SocialIcons i{cursor:pointer;transition:all .5s ease}#SocialIcons i:hover{color:#fff;transform:scale(1.3)}#MenuItems{list-style:none;font-size:1.2rem}#MenuItems a{text-decoration:none}#MenuItems a li{padding-right:1rem;margin-bottom:1rem;transition:border-width .5s ease}#MenuItems a li:after{content:"";display:block;width:0;height:1px;background:#ffffd2;transition:width .3s}#MenuItems a.active li:after,#MenuItems a:hover li:after{width:100%;padding-right:1rem}#AboutMe{margin-top:100px;flex:1 1 auto;display:flex;flex-direction:column;align-items:center}#AboutMe-ProfilePicture{width:70%;height:auto;margin-left:auto;margin-right:auto;transition:all .5s ease;border-radius:50%;overflow:hidden}#AboutMe-ProfilePicture:hover{transform:scale(1.1)}#AboutMe-ProfilePicture img{width:100%;-ms-user-select:none;user-select:none;-webkit-user-drag:none;-moz-user-select:none;-webkit-user-select:none}#AboutMe-MenuItems{width:100%;display:flex;flex-direction:column;align-items:flex-end}.SideBarWrapper{flex:0 0 18rem;z-index:98}#SideBar{background-color:#3b415c;color:#ffffd2;position:fixed;width:18rem;height:100%;display:flex;flex-direction:column}@media only screen and (max-width:1000px) and (-webkit-min-device-pixel-ratio:2){.SideBarWrapper{flex:0 0}#SideBar{transition:all .5s ease;transform:translateX(-18rem)}}@media only screen and (max-width:1000px) and (-webkit-min-device-pixel-ratio:2){#ContentWrapper{margin-top:60px}}#SideBarToggle{background-color:#3b415c;color:#ffffd2;font-size:2.5rem;border-bottom:1px solid #ffffd2}#SideBarToggle-checkbox{display:none}#SideBarToggleWrapper{display:none;width:100%;flex:0 0 50px;z-index:99;position:fixed;-ms-user-select:none;user-select:none;-webkit-user-select:none;-moz-user-select:none}.toggle{padding-left:10px;justify-self:center;cursor:pointer}#SideBarToggle{width:100%}@media only screen and (max-width:1000px) and (-webkit-min-device-pixel-ratio:2){#SideBarToggleWrapper{display:block}#SideBarToggle-checkbox:checked+#SideBar{transform:translateX(0)}}.svg-inline--fa,svg:not(:root).svg-inline--fa{overflow:visible}.svg-inline--fa{display:inline-block;font-size:inherit;height:1em;vertical-align:-.125em}.svg-inline--fa.fa-lg{vertical-align:-.225em}.svg-inline--fa.fa-w-1{width:.0625em}.svg-inline--fa.fa-w-2{width:.125em}.svg-inline--fa.fa-w-3{width:.1875em}.svg-inline--fa.fa-w-4{width:.25em}.svg-inline--fa.fa-w-5{width:.3125em}.svg-inline--fa.fa-w-6{width:.375em}.svg-inline--fa.fa-w-7{width:.4375em}.svg-inline--fa.fa-w-8{width:.5em}.svg-inline--fa.fa-w-9{width:.5625em}.svg-inline--fa.fa-w-10{width:.625em}.svg-inline--fa.fa-w-11{width:.6875em}.svg-inline--fa.fa-w-12{width:.75em}.svg-inline--fa.fa-w-13{width:.8125em}.svg-inline--fa.fa-w-14{width:.875em}.svg-inline--fa.fa-w-15{width:.9375em}.svg-inline--fa.fa-w-16{width:1em}.svg-inline--fa.fa-w-17{width:1.0625em}.svg-inline--fa.fa-w-18{width:1.125em}.svg-inline--fa.fa-w-19{width:1.1875em}.svg-inline--fa.fa-w-20{width:1.25em}.svg-inline--fa.fa-pull-left{margin-right:.3em;width:auto}.svg-inline--fa.fa-pull-right{margin-left:.3em;width:auto}.svg-inline--fa.fa-border{height:1.5em}.svg-inline--fa.fa-li{width:2em}.svg-inline--fa.fa-fw{width:1.25em}.fa-layers svg.svg-inline--fa{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0}.fa-layers{display:inline-block;height:1em;position:relative;text-align:center;vertical-align:-.125em;width:1em}.fa-layers svg.svg-inline--fa{transform-origin:center center}.fa-layers-counter,.fa-layers-text{display:inline-block;position:absolute;text-align:center}.fa-layers-text{left:50%;top:50%;transform:translate(-50%,-50%);transform-origin:center center}.fa-layers-counter{background-color:#ff253a;border-radius:1em;box-sizing:border-box;color:#fff;height:1.5em;line-height:1;max-width:5em;min-width:1.5em;overflow:hidden;padding:.25em;right:0;text-overflow:ellipsis;top:0;transform:scale(.25);transform-origin:top right}.fa-layers-bottom-right{bottom:0;right:0;top:auto;transform:scale(.25);transform-origin:bottom right}.fa-layers-bottom-left{bottom:0;left:0;right:auto;top:auto;transform:scale(.25);transform-origin:bottom left}.fa-layers-top-right{right:0;top:0;transform:scale(.25);transform-origin:top right}.fa-layers-top-left{left:0;right:auto;top:0;transform:scale(.25);transform-origin:top left}.fa-lg{font-size:1.33333em;line-height:.75em;vertical-align:-.0667em}.fa-xs{font-size:.75em}.fa-sm{font-size:.875em}.fa-1x{font-size:1em}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-6x{font-size:6em}.fa-7x{font-size:7em}.fa-8x{font-size:8em}.fa-9x{font-size:9em}.fa-10x{font-size:10em}.fa-fw{text-align:center;width:1.25em}.fa-ul{list-style-type:none;margin-left:2.5em;padding-left:0}.fa-ul>li{position:relative}.fa-li{left:-2em;position:absolute;text-align:center;width:2em;line-height:inherit}.fa-border{border:.08em solid #eee;border-radius:.1em;padding:.2em .25em .15em}.fa-pull-left{float:left}.fa-pull-right{float:right}.fa.fa-pull-left,.fab.fa-pull-left,.fal.fa-pull-left,.far.fa-pull-left,.fas.fa-pull-left{margin-right:.3em}.fa.fa-pull-right,.fab.fa-pull-right,.fal.fa-pull-right,.far.fa-pull-right,.fas.fa-pull-right{margin-left:.3em}.fa-spin{animation:fa-spin 2s linear infinite}.fa-pulse{animation:fa-spin 1s steps(8) infinite}@keyframes fa-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.fa-rotate-90{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";transform:rotate(90deg)}.fa-rotate-180{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";transform:rotate(180deg)}.fa-rotate-270{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";transform:rotate(270deg)}.fa-flip-horizontal{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";transform:scaleX(-1)}.fa-flip-vertical{transform:scaleY(-1)}.fa-flip-both,.fa-flip-horizontal.fa-flip-vertical,.fa-flip-vertical{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)"}.fa-flip-both,.fa-flip-horizontal.fa-flip-vertical{transform:scale(-1)}:root .fa-flip-both,:root .fa-flip-horizontal,:root .fa-flip-vertical,:root .fa-rotate-90,:root .fa-rotate-180,:root .fa-rotate-270{filter:none}.fa-stack{display:inline-block;height:2em;position:relative;width:2.5em}.fa-stack-1x,.fa-stack-2x{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0}.svg-inline--fa.fa-stack-1x{height:1em;width:1.25em}.svg-inline--fa.fa-stack-2x{height:2em;width:2.5em}.fa-inverse{color:#fff}.sr-only{border:0;clip:rect(0,0,0,0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.sr-only-focusable:active,.sr-only-focusable:focus{clip:auto;height:auto;margin:0;overflow:visible;position:static;width:auto}.svg-inline--fa .fa-primary{fill:var(--fa-primary-color,currentColor);opacity:1;opacity:var(--fa-primary-opacity,1)}.svg-inline--fa .fa-secondary{fill:var(--fa-secondary-color,currentColor)}.svg-inline--fa .fa-secondary,.svg-inline--fa.fa-swap-opacity .fa-primary{opacity:.4;opacity:var(--fa-secondary-opacity,.4)}.svg-inline--fa.fa-swap-opacity .fa-secondary{opacity:1;opacity:var(--fa-primary-opacity,1)}.svg-inline--fa mask .fa-primary,.svg-inline--fa mask .fa-secondary{fill:#000}.fad.fa-inverse{color:#fff}body,html{margin:0;padding:0;font-family:Titillium Web,sans-serif;background-color:#efefef}a{color:inherit;-webkit-user-drag:none}#Layout{display:flex;flex-direction:row;min-height:100vh;overflow:hidden}#Layout-ContentWrapper{flex:1 1 auto;display:flex;flex-direction:column}.autolink-header{padding-left:10px;display:none}h1,h2,h3,h4,h5,h6{pointer-events:none}.paging-links{width:100%;text-align:center;margin-top:30px}.paging-links a{text-decoration:none;font-size:1.2rem;background-color:#3b415c;color:#ffffd2;border-radius:8px;padding:8px;margin:4px}.paging-links a.disabled{background-color:#ccc;cursor:not-allowed}.grvsc-code{padding-top:25px}.grvsc-line{white-space:pre-wrap}code:not(.grvsc-code){display:inline-block;white-space:pre-wrap;padding:5px;margin:5px;border-radius:5px;background-color:#efefef}.div-paragraph{margin:30px 0}blockquote{border:1px solid #cdcdcd;border-left-width:10px;padding-left:5px}.iframe-wrapper{width:50%;margin-left:auto;margin-right:auto}@media only screen and (max-width:1000px) and (-webkit-min-device-pixel-ratio:2){.iframe-wrapper{width:100%}h1,h2,h3,h4,h5,h6{margin-top:-60px;padding-top:60px}}.Chip{font-size:12px;background-color:#eddbf4;padding:8px;border-radius:10px;color:#000;transition:all .5s ease;margin:4px;z-index:15;-ms-user-select:none;user-select:none;-moz-user-select:none;-webkit-user-drag:none;-webkit-user-select:none}.Chip-link{text-decoration:none;color:inherit}.Chip.active{background-color:#52307c;color:#eddbf4}.Chip:hover{transform:scale(1.15)}.PostCard{color:#52307c;background-color:#fff;padding:20px;margin:15px 20px 0;cursor:pointer;position:relative;box-shadow:0 1px 2px rgba(0,0,0,.1);border-radius:0;transition:all .6s cubic-bezier(.165,.84,.44,1);-ms-user-select:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-webkit-user-drag:none}.PostCard-description{color:#663a82}.PostCard:hover{transform:scale(1.005)}.PostCard:after{content:"";border-radius:0;position:absolute;z-index:-1;top:0;left:0;width:100%;height:100%;box-shadow:0 5px 15px rgba(0,0,0,.3);opacity:0;transition:all .6s cubic-bezier(.165,.84,.44,1)}.PostCard:hover:after{opacity:1}.PostCard-title{font-size:30px;font-weight:700}.PostCard-date{font-weight:lighter}.PostCard-tags{display:flex;flex-direction:row;margin-top:10px}.PostCard-link{z-index:10;position:absolute;top:0;left:0;right:0;bottom:0;-webkit-user-drag:none}.post-view{background-color:#fff;display:flex;flex-direction:column;align-items:center;min-height:100vh;font-size:1em}.post-view-content{align-self:stretch;padding:1rem 6rem 6rem}.post-view img{display:block;max-width:100%;max-height:100%;height:auto;margin-left:auto;margin-right:auto;-o-object-fit:contain;object-fit:contain}.embedVideo-container{display:block;max-width:98%;width:700px}.embedVideo-iframe{width:100%;height:400px}.post-view-title{color:#52307c;padding:0}.post-view-title,.post-view-title h1{margin:0;word-wrap:break-word;text-align:center}.post-view-title h1{font-size:4em}.post-view-date{padding:0;font-weight:lighter;font-size:1rem;text-align:center}@media only screen and (max-width:1000px) and (-webkit-min-device-pixel-ratio:2){.post-view-title h1{font-size:3em;padding:0;margin:0}.post-view-date{margin:0;font-size:1rem}.post-view-content{padding:2px}}</style><meta name="generator" content="Gatsby 2.29.2"/><title data-react-helmet="true">Working with the Mongodb Connector - Michael Jones</title><link data-react-helmet="true" rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link data-react-helmet="true" rel="icon" type="image/svg+xml" href="/favicon.svg"/><link data-react-helmet="true" rel="manifest" href="/site.webmanifest"/><link data-react-helmet="true" rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"/><meta data-react-helmet="true" name="description" content="Translating MQL for use with the MongoDB connector can be confusing. In this post I&#x27;m going to attempt to explain several common use cases and how to implement them with the Mules 4 MongoDB Connector. Hopefully by the end you will also have a better idea about the thought process that goes into making the translation."/><meta data-react-helmet="true" name="keywords" content="mongodb, mulesoft, dataweave"/><meta data-react-helmet="true" itemProp="name" content="Working with the Mongodb Connector - Michael Jones"/><meta data-react-helmet="true" itemProp="description" content="Translating MQL for use with the MongoDB connector can be confusing. In this post I&#x27;m going to attempt to explain several common use cases and how to implement them with the Mules 4 MongoDB Connector. Hopefully by the end you will also have a better idea about the thought process that goes into making the translation."/><meta data-react-helmet="true" itemProp="image" content="https://syntaxsugar.io/favicon.svg"/><meta data-react-helmet="true" property="og:url" content="https://syntaxsugar.io"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:title" content="Working with the Mongodb Connector - Michael Jones"/><meta data-react-helmet="true" property="og:description" content="Translating MQL for use with the MongoDB connector can be confusing. In this post I&#x27;m going to attempt to explain several common use cases and how to implement them with the Mules 4 MongoDB Connector. Hopefully by the end you will also have a better idea about the thought process that goes into making the translation."/><meta data-react-helmet="true" property="og:image" content="https://syntaxsugar.io/favicon.svg"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:title" content="Working with the Mongodb Connector - Michael Jones"/><meta data-react-helmet="true" name="twitter:description" content="Translating MQL for use with the MongoDB connector can be confusing. In this post I&#x27;m going to attempt to explain several common use cases and how to implement them with the Mules 4 MongoDB Connector. Hopefully by the end you will also have a better idea about the thought process that goes into making the translation."/><meta data-react-helmet="true" name="twitter:image" content="https://syntaxsugar.io/favicon.svg"/><meta data-react-helmet="true" name="msapplication-TileColor" content="#da532c"/><meta data-react-helmet="true" name="theme-color" content="#ffffff"/><link href="https://fonts.googleapis.com/css?family=Titillium+Web|Ubuntu+Mono&amp;display=swap" rel="stylesheet"/><link as="script" rel="preload" href="/webpack-runtime-83755eb61c7a5e767e6c.js"/><link as="script" rel="preload" href="/framework-6c3ead24af170cdcb87c.js"/><link as="script" rel="preload" href="/app-06ef109d51ffd802fbef.js"/><link as="script" rel="preload" href="/styles-407fe62976dc5310c43e.js"/><link as="script" rel="preload" href="/a9a7754c-34b8923232843e7049e0.js"/><link as="script" rel="preload" href="/commons-2918422b25b7d526a2b4.js"/><link as="script" rel="preload" href="/c87213c192fc9cb8753c10dd75e74e23ae9391ee-1102b991d7103fbe13c4.js"/><link as="script" rel="preload" href="/component---src-templates-post-js-653ffa86fa4aaccd47e4.js"/><link as="fetch" rel="preload" href="/page-data/post/2020/working-with-mongodb-connector/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/1375839498.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3128451518.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/324868815.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div id="Layout"><div class="SideBarWrapper"><input type="checkbox" id="SideBarToggle-checkbox" name="" value=""/><div id="SideBar"><div id="AboutMe"><a class="link-to" id="AboutMe-ProfilePicture" href="/"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:100%"></div><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGB0lEQVQ4yx3U+1fT9x3H8c93vUyNVbtqsdgpFHVQrHcLdFJBNqqAFoJACIFlJCC0cgcpBARCuUhGEIJoIIBcFBAMIhaRiyi3gBjFBqFom+1wPHMXf9h22q32++X9Gvb9BzzO8/XLm1nnH7CZByPssWWSuz89xrW1VjLwEF3tMMibDFpjVbl6ob5aI7RfLhe0NUELDU15RsvdcfnVtlLR+K0udnf8Bjfcc4kbvXmZjfd3MHap9izraqvnADDzvRFmbNdLs4tDrYk53lCXhuNMxUm0NpzDuep05Gl98WWZFH29Tbg/MWAdG+yU3hv9iukzE9iD0eucZeIGY72dF7n57n728oaHjLrODgMiknfAPYzxyaddeI0hkPQNKXSm7AtKy/EhWbwD39Jxmp/92oSRwU70ddbrahsKmbkhiZmHrnBsqeznurGhHt3U3UG0t+r58/UqISxuF30SsJ2Ux/0oKyeI0r+QUVFFLB2NsKO29rP0l28fCmO3r/GD15sxNdyle/ToETNNmTl2PFTCkqMU0vbmOkw/HONbW85S6ZkM7PxgO732ykpa9tobeOctG9hvWAdXd2f4SPfRkdB9pDuXh6mxXhq43sTP3B8C/+P30p/+92/2slBkbG2xXrxQ8xIUagxlOOrnS++ts0GIuxvEbh9iv+NWuDjYw8HGFi6ezvA65gxPv22kyj2O/u5m4RvLOGhRsP70w4+il6B8eOAW6vWVvGVmgjIzUikqIhYDFVrM6dSY1eVjrDAN11WfISPwMGzX/Qq7vVZh636GbR4iammuoCezkzzRIgSelzNtY6wx78tYNNdW8/enRyglJZm6O+/gb7cGMVd+agnNg7kkHaOFCbiWHQPX32zFjo/WI/yEOyqrTtHQjXb685PpJZCwKPBGFpK1fEGVFY5rl1voocVEJZpiTN2x4MEFA+YrizCvK8BoQTpaUpS4khWLZKk/tuy2Qb4mEfdM/UjNCqXhkW5aWooXPL/ARiwdwvBtE/IKMqijs44utlzAzZYOaCIl6FIlYLaiAOVKKTKP+SFf5g9tvALB3nsQleKPprYSHAxbRdHpHvT3Z0/w7OmcwCbn/ymka4vheOBVOhj4LjU1VePh1U7oYyLQGBOGifw0FIkP4bTkU5xXiHEhUYEMhQ/iCkNQWa1CeU085WhCyGwy4rG5T2DZesOC8qQ/gpVO5BGwk06p0/Ft/zgmM5JgrfwTHhuqUR8uxnh6Au6cjENjcjTqqvKRVSZBuU6FriuXyGQepn+94PFicXGBBUTvMhaUpCBXo+ZDYsJIEimh74zdmM7LxM3sdAwW5CPFcz+unIiGpfAUyqNCoS3KRJWhGCWlcVRRFUNPvpvn//PDf/GP58+NTBK/XZ5WqUNyaRGfmB9FshgZdRSqURYphavdRkS5uuGjX2+C68YNUEuOIMLDDUlJEkRn/RaqPA+qqkmjvz5b4Ifu3EZ5WamcldTNiGTxn1u9A3fBN9RFUKZJIfM/Sp47d6L0j1LURyuQ5HUA7lvew7ur18DVaSsaGkuQWvQxVWltMNDTKDx99hSjkxPWQm2xiPkc+5jt27VK6umzB/KkGD4xO5+8PwnAZntHknl5UoDLXrjY2cH2zbVY/voK7HF2pNpzetKcTUKr3o1mTXr+67lvMDZhkppn5hgra7zFyYLDWbyqWHcyuxTSPyTyTjs8Badt+8hhkwP57N1L2zfZ0fJlb9CqlWvo7bUb6PAhH/osLkHIy07lG84XoKe3V3ex/RpraKzlWGhIMKcIk7Oe78Fioo7rPhWH4fWVdtjx/m7ebqMDv2b1WlqxYjWtf+tt2u/sTCtE7/BeB735kKAgiMXBUESf0JmfPmf97edZmbZsCZQGM5kslMNIH9ts78SO+AZIX1lma7Vda4/I3x2A0vf3SA46Al20BK6OH4D75Xr4+R5FhCzcGiQOlErkyT//0qKCfK6urp4xpfJzplTEsKSEVG6Lsxt36HAAs9+wWcRetZGHuX1obIyXLfTlnBAy/A8L7BfrFla/aW+UhobJYxWRomPiQKbKVXPq3FwuNSWVaTQa9n+KHZEX8OTqGwAAAABJRU5ErkJggg==" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/3f7c935dcce0978397a510e419a6a0c1/69585/profilePicture.png 200w,
/static/3f7c935dcce0978397a510e419a6a0c1/497c6/profilePicture.png 400w,
/static/3f7c935dcce0978397a510e419a6a0c1/ee604/profilePicture.png 800w,
/static/3f7c935dcce0978397a510e419a6a0c1/05d05/profilePicture.png 1080w" sizes="(max-width: 800px) 100vw, 800px" /><img loading="lazy" sizes="(max-width: 800px) 100vw, 800px" srcset="/static/3f7c935dcce0978397a510e419a6a0c1/69585/profilePicture.png 200w,
/static/3f7c935dcce0978397a510e419a6a0c1/497c6/profilePicture.png 400w,
/static/3f7c935dcce0978397a510e419a6a0c1/ee604/profilePicture.png 800w,
/static/3f7c935dcce0978397a510e419a6a0c1/05d05/profilePicture.png 1080w" src="/static/3f7c935dcce0978397a510e419a6a0c1/ee604/profilePicture.png" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></a><h1>Michael Jones</h1><div id="AboutMe-MenuItems"><div><ul id="MenuItems"><a class="" href="/"><li>Posts</li></a><a href="/dw-cookbook"><li>DW Cookbook</li></a></ul></div></div></div><div id="SocialIcons"><i><a href="https://github.com/mikeacjones" class="link-to" target="_blank" rel="noreferrer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github fa-w-16 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" alt="github"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></i><i><a href="https://www.linkedin.com/in/michael-jones-5a870678/" class="link-to" target="_blank" rel="noreferrer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin" class="svg-inline--fa fa-linkedin fa-w-14 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" alt="linkedin"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a></i><i><a href="https://stackoverflow.com/users/10890536/michael-jones" class="link-to" target="_blank" rel="noreferrer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="stack-overflow" class="svg-inline--fa fa-stack-overflow fa-w-12 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" alt="stackoverflow"><path fill="currentColor" d="M290.7 311L95 269.7 86.8 309l195.7 41zm51-87L188.2 95.7l-25.5 30.8 153.5 128.3zm-31.2 39.7L129.2 179l-16.7 36.5L293.7 300zM262 32l-32 24 119.3 160.3 32-24zm20.5 328h-200v39.7h200zm39.7 80H42.7V320h-40v160h359.5V320h-40z"></path></svg></a></i></div></div></div><div id="Layout-ContentWrapper"><div id="SideBarToggleWrapper"><div id="SideBarToggle"><label for="SideBarToggle-checkbox" class="toggle">☰</label></div></div><div id="ContentWrapper"><div class="post-view"><div class="post-view-header"><div class="post-view-title"><h1>Working with the Mongodb Connector</h1><div class="post-view-date">Written on <!-- -->2020-12-31</div><a href="https://github.com/mikeacjones/syntaxsugar.io/issues/new?labels=post%20question&amp;assignees=mikeacjones&amp;title=Working with the Mongodb Connector&amp;body=I%20have%20a%20question/issue%20about:" referrer="noreferrer" target="_blank"><h3><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github fa-w-16 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" alt="github"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg> Ask Question / Submit Issue</h3></a></div></div><div class="post-view-content"><div class="div-paragraph">All of the examples below are were tested against a free-tier MongoDB hosted on Atlas.</div><h2 id="table-of-contents" style="position:relative">Table of Contents:<a href="#table-of-contents" aria-label="table of contents permalink" class="autolink-header after"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2><ol><li><a href="#the-basics">The Basics</a><ol><li><a href="#mql-to-dataweave">MQL to DataWeave</a></li><li><a href="#mql-objects">MQL Objects</a></li></ol></li><li><a href="#advanced-operations">Advanced Operations</a><ol><li><a href="#aggregation-pipelines">Aggregation Pipelines</a></li></ol></li><li><a href="#wrap-up">Wrap Up</a></li></ol><h1 id="the-basics" style="position:relative">The Basics<a href="#the-basics" aria-label="the basics permalink" class="autolink-header after"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h1><h2 id="mql-to-dataweave" style="position:relative">MQL to DataWeave<a href="#mql-to-dataweave" aria-label="mql to dataweave permalink" class="autolink-header after"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2><div class="div-paragraph">In MQL, we frequently see operations like this:</div><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">mql</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="mql" data-index="0"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source">db.inventory.find( { status: { $in: [ &quot;A&quot;, &quot;D&quot; ] } } )</span></span></code></pre></div><div class="div-paragraph">Which, in SQL, is equivalent to</div><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">sql</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="sql" data-index="1"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">SELECT</span><span class="mtk1"> </span><span class="mtk12">*</span><span class="mtk1"> </span><span class="mtk4">FROM</span><span class="mtk1"> inventory </span><span class="mtk4">WHERE</span><span class="mtk1"> </span><span class="mtk4">status</span><span class="mtk1"> </span><span class="mtk4">IN</span><span class="mtk1"> (</span><span class="mtk5">&quot;</span><span class="mtk6">A</span><span class="mtk5">&quot;</span><span class="mtk1">, </span><span class="mtk5">&quot;</span><span class="mtk6">B</span><span class="mtk5">&quot;</span><span class="mtk1">)</span></span></span></code></pre></div><div class="div-paragraph">In the query above, the <code>$in</code> operator is a special MongoDB operation. When we run this query in the MuleSoft connector, we pass the query in as JSON, with the <code>$in</code> operator as a key:</div><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">json</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="json" data-index="2"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">&quot;</span><span class="mtk12">status</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;</span><span class="mtk7">$in</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">[</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk5">&quot;</span><span class="mtk6">A</span><span class="mtk5">&quot;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk5">&quot;</span><span class="mtk6">B</span><span class="mtk5">&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">]</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">}</span></span></span></code></pre></div><div class="div-paragraph">If we wanted to run this same query in the MongoDB connector, we would use the <code>Find documents</code> operation with the following DataWeave as our Query:</div><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">data-weave</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="data-weave" data-index="3"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">output</span><span class="mtk1"> </span><span class="mtk6">application/json</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">---</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  status</span><span class="mtk5">:</span><span class="mtk1"> </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;\$</span><span class="mtk6">in</span><span class="mtk5">&quot;:</span><span class="mtk1"> [</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk5">&quot;</span><span class="mtk6">A</span><span class="mtk5">&quot;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk5">&quot;</span><span class="mtk6">B</span><span class="mtk5">&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    ]</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">}</span></span></span></code></pre></div><div class="div-paragraph">The <code>$</code> is a special character in DataWeave which means we need to escape it, but that is all there is to it!</div><h2 id="mql-objects" style="position:relative">MQL Objects<a href="#mql-objects" aria-label="mql objects permalink" class="autolink-header after"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2><div class="div-paragraph">The same principle exists for specifics objects, such as the <code>ObjectId</code>. For example, if we wanted to query for a specific document structured like this:</div><div class="div-paragraph"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:656px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:29.714285714285715%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA90lEQVQY04WR627CMAxGef+3Y6z7UwTpBRp6L6WU0tZnSVokNk2apU+2E/vESTYigrX2dqOvCqgu0DVQp3AtoUjMmkbKC2LjOnP+lcslREydDD2WtHE0Aw3CkCpWyOnAVKZMxs+FZor3PEMfEgXa7Fsfm1wHcNqD+oLcHPS4O5QDjuPI525HGAYkecMpqzkXLXk7cC47Fz+GJ+M0wzwhVmYImedFNnZzyQIchgHf99kZqOd5fGy36KwkShujiqzu0PWd/NovF1r1w9anc8C+74mjCHU8EgQBSiki8wRlUaCTM03TvPXJ0vyXLPD1Kf+Zu9Za+x7/tm85SM+glhEqBQAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <div role="button" class="ZoomableImage"><img alt="data-structure" class="gatsby-resp-image-image" title="data-structure" src="/static/77d8d7c95b9295916a64eac1b1a7790a/748f4/compass-structure.png" srcSet="/static/77d8d7c95b9295916a64eac1b1a7790a/4edbd/compass-structure.png 175w,/static/77d8d7c95b9295916a64eac1b1a7790a/13ae7/compass-structure.png 350w,/static/77d8d7c95b9295916a64eac1b1a7790a/748f4/compass-structure.png 656w" sizes="(max-width: 656px) 100vw, 656px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/></div>
    </span></div><div class="div-paragraph">We can run this DataWeave:</div><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">data-weave</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="data-weave" data-index="4"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">output</span><span class="mtk1"> </span><span class="mtk6">application/json</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">---</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">&quot;</span><span class="mtk6">_id</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;\$</span><span class="mtk6">oid</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">5fe0cb5e73ea242191c808cd</span><span class="mtk5">&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">}</span></span></span></code></pre></div><div class="div-paragraph">If you&#x27;re wondering how I know to use <code>$oid</code>, I cheated a bit! The easiest means of working with your MongoDB and building queries / aggregations is to use <a href="https://www.mongodb.com/products/compass" target="_blank" rel="noreferrer">MongoDB Compass</a>. Compass is a free UI you can use to browse the data. In our example above, I can use Compass to convert the structure to its JSON representation (which is what we&#x27;re passing to the Connector), which shows me this:</div><div class="div-paragraph"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:656px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:43.42857142857143%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABMElEQVQoz6VSXW+DMAzk//831ImHbu1DW7V8tJQSAgkJgXCLrYG2aZ0mzdIpjhxf7pxEdV1DKQVjDKwd0Pc9Q2sdsKw/5V/3S18khMA0TXDOoW1beO/xn4jmeeaEFKZpisPhgCzLMI4jWm1Rtz0aZSC6sHaGc14DqkZzvbcOxEOIiIyaSSFFURQoy1soelg3QoQGaiJyEUgeUn9cYFAKhXsgJUKKlZAsk7o8L5iITDdqgFSWD7txYlI69ywWp6tlspkkCU7HI85phtOlYHWXUgYlGteHwrWSbNMF5YvFBavCZZPnObbbLeI4xstmg/3uDVV1h2gkXnd7nC8ZtHHo+oFH9J1wnSF9GXpZay2klOi6jr+CUppzmm15u6ENtT+98jAMv8/mU04Xez/DP1FHeAcmJLvQ3H3dLQAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <div role="button" class="ZoomableImage"><img alt="compass-json-view" class="gatsby-resp-image-image" title="compass-json-view" src="/static/c2f059cc70e201bb6792a7a39d7fce07/748f4/compass-json-view.png" srcSet="/static/c2f059cc70e201bb6792a7a39d7fce07/4edbd/compass-json-view.png 175w,/static/c2f059cc70e201bb6792a7a39d7fce07/13ae7/compass-json-view.png 350w,/static/c2f059cc70e201bb6792a7a39d7fce07/748f4/compass-json-view.png 656w" sizes="(max-width: 656px) 100vw, 656px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/></div>
    </span></div><h1 id="advanced-operations" style="position:relative">Advanced Operations<a href="#advanced-operations" aria-label="advanced operations permalink" class="autolink-header after"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h1><h2 id="aggregation-pipelines" style="position:relative">Aggregation Pipelines<a href="#aggregation-pipelines" aria-label="aggregation pipelines permalink" class="autolink-header after"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2><div class="div-paragraph">Say we wanted to utilize <a href="https://www.mongodb.com/atlas/search" target="_blank" rel="noreferrer">MongoDB Atlas Search</a>, which provides an easy way to search content in your collection. In this case, we have to use the <code>$search</code> pipeline provided by Atlas, which looks like:</div><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">mql</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="mql" data-index="5"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source">{</span></span>
<span class="grvsc-line"><span class="grvsc-source">  $search: {</span></span>
<span class="grvsc-line"><span class="grvsc-source">    &lt;operator&gt;: {</span></span>
<span class="grvsc-line"><span class="grvsc-source">      &lt;specification(s)&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">    }</span></span>
<span class="grvsc-line"><span class="grvsc-source">  }</span></span>
<span class="grvsc-line"><span class="grvsc-source">}</span></span></code></pre></div><div class="div-paragraph">For example, I built an API with MuleSoft which is leveraged by the Ink Bot running on r/pen_swap; <a href="https://anypoint.mulesoft.com/exchange/portals/mulesoft-6908/13024f4f-f380-436f-9c65-6b35a849d17e/system-inks/minor/1.0/pages/home/" target="_blank" rel="noreferrer">you can play with the API here</a>. This bot allows users to leave a comment with a list of ink names, and the bot responds with a corresponding list of image links. The one thing you can count on is that no two users will type the name the same way, and that people will regularly have typos! Enter Atlas Search. In MQL, my query looks like this:</div><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">mql</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="mql" data-index="6"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source">$search: {</span></span>
<span class="grvsc-line"><span class="grvsc-source">  &quot;phrase&quot;: {</span></span>
<span class="grvsc-line"><span class="grvsc-source">    &quot;query&quot;: &quot;USER INPUT HERE&quot;,</span></span>
<span class="grvsc-line"><span class="grvsc-source">    &quot;path&quot;: [&quot;fullName&quot;, &quot;alternateNames&quot;],</span></span>
<span class="grvsc-line"><span class="grvsc-source">    &quot;slop&quot;: 3</span></span>
<span class="grvsc-line"><span class="grvsc-source">  }</span></span>
<span class="grvsc-line"><span class="grvsc-source">}</span></span></code></pre></div><div class="div-paragraph">When running this search, I want to also filter out any inks missing <code>approved: true</code>, and only return one item. Building a pipeline in this in MQL is fairly simple, and looks like:</div><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">mql</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="mql" data-index="7"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source">db.inks.aggregate([</span></span>
<span class="grvsc-line"><span class="grvsc-source">  {</span></span>
<span class="grvsc-line"><span class="grvsc-source">    $search: {</span></span>
<span class="grvsc-line"><span class="grvsc-source">      &quot;phrase&quot;: {</span></span>
<span class="grvsc-line"><span class="grvsc-source">        &quot;query&quot;: &quot;USER INPUT HERE&quot;,</span></span>
<span class="grvsc-line"><span class="grvsc-source">        &quot;path&quot;: [&quot;fullName&quot;, &quot;alternateNames&quot;],</span></span>
<span class="grvsc-line"><span class="grvsc-source">        &quot;slop&quot;: 3</span></span>
<span class="grvsc-line"><span class="grvsc-source">      }</span></span>
<span class="grvsc-line"><span class="grvsc-source">    }</span></span>
<span class="grvsc-line"><span class="grvsc-source">  },</span></span>
<span class="grvsc-line"><span class="grvsc-source">  { $match: { &quot;approved&quot;: true } },</span></span>
<span class="grvsc-line"><span class="grvsc-source">  { $limit: 1 }</span></span>
<span class="grvsc-line"><span class="grvsc-source">])</span></span></code></pre></div><div class="div-paragraph">This gives me exactly what I need in Compass; to translate this to the MuleSoft connector we make use of the <code>Execute command</code> operation which allows us to run anything which might not have an operation wrapper. When using the operation <code>Execute command</code> we can&#x27;t specify our collection, which we need to do (ie: <code>db.inks.aggregate(..)</code>). To make this work, you take the command you are running (in this case <code>aggregate</code>) and pass it in with a collection name like so:</div><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">data-weave</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="data-weave" data-index="8"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">output</span><span class="mtk1"> </span><span class="mtk6">application/json</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">---</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">&quot;</span><span class="mtk6">aggregate</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">COLLECTION NAME</span><span class="mtk5">&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">}</span></span></span></code></pre></div><div class="div-paragraph">Next, the aggregation command takes a <code>pipeline</code>, an array of operations, as its input. So this becomes:</div><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">data-weave</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="data-weave" data-index="9"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">output</span><span class="mtk1"> </span><span class="mtk6">application/json</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">---</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">&quot;</span><span class="mtk6">aggregate</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">COLLECTION NAME</span><span class="mtk5">&quot;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">&quot;</span><span class="mtk6">pipeline</span><span class="mtk5">&quot;:</span><span class="mtk1"> []</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">}</span></span></span></code></pre></div><div class="div-paragraph">Finally, you have to provide an empty cursor object which will be populated with the documents produced by the final stage of the aggregation:</div><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">data-weave</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="data-weave" data-index="10"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">output</span><span class="mtk1"> </span><span class="mtk6">application/json</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">---</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">&quot;</span><span class="mtk6">aggregate</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">COLLECTION NAME</span><span class="mtk5">&quot;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">&quot;</span><span class="mtk6">pipeline</span><span class="mtk5">&quot;:</span><span class="mtk1"> []</span><span class="mtk5">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">&quot;</span><span class="mtk6">cursor</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">{}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">}</span></span></span></code></pre></div><div class="div-paragraph">The rest is just like everything we&#x27;ve done before; we just stick our commands in the pipeline:</div><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">data-weave</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="data-weave" data-index="11"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">output</span><span class="mtk1"> </span><span class="mtk6">application/json</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">---</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">&quot;</span><span class="mtk6">aggregate</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">inks</span><span class="mtk5">&quot;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">&quot;</span><span class="mtk6">pipeline</span><span class="mtk5">&quot;:</span><span class="mtk1"> [</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk5">&quot;\$</span><span class="mtk6">search</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          </span><span class="mtk5">&quot;</span><span class="mtk6">phrase</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          </span><span class="mtk5">&quot;</span><span class="mtk6">query</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk8">payload</span><span class="mtk5">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          </span><span class="mtk5">&quot;</span><span class="mtk6">path</span><span class="mtk5">&quot;:</span><span class="mtk1"> [</span><span class="mtk5">&quot;</span><span class="mtk6">fullName</span><span class="mtk5">&quot;,</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">alternateNames</span><span class="mtk5">&quot;</span><span class="mtk1">]</span><span class="mtk5">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          </span><span class="mtk5">&quot;</span><span class="mtk6">slop</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk4">3</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk5">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk5">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">},</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk5">&quot;\$</span><span class="mtk6">match</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk5">&quot;</span><span class="mtk6">approved</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk4">true</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk5">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">},</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk5">&quot;\$</span><span class="mtk6">limit</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk4">1</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  ]</span><span class="mtk5">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">&quot;</span><span class="mtk6">cursor</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">{}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">}</span></span></span></code></pre></div><div class="div-paragraph">If I run the query above with &quot;KWZ Turquoise&quot; set as my payload, the JSON returned would be:</div><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">json</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="json" data-index="12"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">&quot;</span><span class="mtk12">cursor</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;</span><span class="mtk7">firstBatch</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">[</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk5">&quot;</span><span class="mtk4">_id</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          </span><span class="mtk5">&quot;</span><span class="mtk10">$oid</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">5ed6662b605762cc64fcb7b6</span><span class="mtk5">&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk5">},</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk5">&quot;</span><span class="mtk4">approved</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk4">true</span><span class="mtk5">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk5">&quot;</span><span class="mtk4">fullName</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">KWZ Ink Iron Gall Turquoise</span><span class="mtk5">&quot;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk5">&quot;</span><span class="mtk4">primaryImage</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">https://dl.airtable.com/qF2Z7CX3SHWbuzLS6FPn_KWZ%20Ink%20Iron%20Gall%20Turquoise.jpg</span><span class="mtk5">&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk5">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">],</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;</span><span class="mtk7">id</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk4">0</span><span class="mtk5">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;</span><span class="mtk7">ns</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">inky_bot.inks</span><span class="mtk5">&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">},</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">&quot;</span><span class="mtk12">ok</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk4">1.0</span><span class="mtk5">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">&quot;</span><span class="mtk12">$clusterTime</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;</span><span class="mtk7">clusterTime</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk5">&quot;</span><span class="mtk4">$timestamp</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk5">&quot;</span><span class="mtk10">t</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk4">1609449675</span><span class="mtk5">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk5">&quot;</span><span class="mtk10">i</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk4">1</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk5">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">},</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;</span><span class="mtk7">signature</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk5">&quot;</span><span class="mtk4">hash</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk5">&quot;</span><span class="mtk10">$binary</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          </span><span class="mtk5">&quot;</span><span class="mtk16">base64</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">zlahFiTYP4mv/4WzJkgiM0Xjbjo=</span><span class="mtk5">&quot;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          </span><span class="mtk5">&quot;</span><span class="mtk16">subType</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">00</span><span class="mtk5">&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk5">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk5">},</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk5">&quot;</span><span class="mtk4">keyId</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk4">6867134372470849538</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">},</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">&quot;</span><span class="mtk12">operationTime</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;</span><span class="mtk7">$timestamp</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk5">&quot;</span><span class="mtk4">t</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk4">1609449675</span><span class="mtk5">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk5">&quot;</span><span class="mtk4">i</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk4">1</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">}</span></span></span></code></pre></div><div class="div-paragraph">From here I can now make use of my cursor in order to extract the objects that I need!</div><h1 id="wrap-up" style="position:relative">Wrap Up<a href="#wrap-up" aria-label="wrap up permalink" class="autolink-header after"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h1><div class="div-paragraph">As you can see, we should be able to run any command / pipeline against MongoDB with the MuleSoft connector, we just have to translate them to an appropriate JSON payload using DataWeave! If you have any questions or issues, feel free to click the button at the <a href="#">top of the page</a> and submit a <code>post question</code>!</div><style class="grvsc-styles">
  .grvsc-container {
    overflow: auto;
    position: relative;
    -webkit-overflow-scrolling: touch;
    padding-top: 1rem;
    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));
    padding-bottom: 1rem;
    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));
    border-radius: 8px;
    border-radius: var(--grvsc-border-radius, 8px);
    font-feature-settings: normal;
    line-height: 1.4;
  }
  
  .grvsc-code {
    display: table;
  }
  
  .grvsc-line {
    display: table-row;
    box-sizing: border-box;
    width: 100%;
    position: relative;
  }
  
  .grvsc-line &gt; * {
    position: relative;
  }
  
  .grvsc-gutter-pad {
    display: table-cell;
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  .grvsc-gutter {
    display: table-cell;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter::before {
    content: attr(data-content);
  }
  
  .grvsc-source {
    display: table-cell;
    padding-left: 1.5rem;
    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));
    padding-right: 1.5rem;
    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));
  }
  
  .grvsc-source:empty::after {
    content: &#x27; &#x27;;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter + .grvsc-source {
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  /* Line transformer styles */
  
  .grvsc-has-line-highlighting &gt; .grvsc-code &gt; .grvsc-line::before {
    content: &#x27; &#x27;;
    position: absolute;
    width: 100%;
  }
  
  .grvsc-line-diff-add::before {
    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));
  }
  
  .grvsc-line-diff-del::before {
    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));
  }
  
  .grvsc-line-number {
    padding: 0 2px;
    text-align: right;
    opacity: 0.7;
  }
  
  .community-material-theme-palenight {
    background-color: #292D3E;
    color: #A6ACCD;
  }
  .community-material-theme-palenight .mtk4 { color: #F78C6C; }
  .community-material-theme-palenight .mtk1 { color: #FFFFFF; }
  .community-material-theme-palenight .mtk12 { color: #C792EA; }
  .community-material-theme-palenight .mtk5 { color: #89DDFF; }
  .community-material-theme-palenight .mtk6 { color: #C3E88D; }
  .community-material-theme-palenight .mtk7 { color: #FFCB6B; }
  .community-material-theme-palenight .mtk8 { color: #A6ACCD; }
  .community-material-theme-palenight .mtk10 { color: #FF5370; }
  .community-material-theme-palenight .mtk16 { color: #C17E70; }
  .community-material-theme-palenight .grvsc-line-highlighted::before {
    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));
    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));
  }
</style></div></div></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/post/2020/working-with-mongodb-connector/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-7fe1a63fac9cbf887ef9.js"],"app":["/app-06ef109d51ffd802fbef.js"],"component---src-pages-404-js":["/component---src-pages-404-js-0d65b0984ce0dd3bfa05.js"],"component---src-templates-index-js":["/component---src-templates-index-js-9cc22a22addd47368c69.js"],"component---src-templates-post-js":["/component---src-templates-post-js-653ffa86fa4aaccd47e4.js"],"component---src-templates-posts-by-tags-js":["/component---src-templates-posts-by-tags-js-cb68329b6c1dc82ea9e5.js"]};/*]]>*/</script><script src="/polyfill-7fe1a63fac9cbf887ef9.js" nomodule=""></script><script src="/component---src-templates-post-js-653ffa86fa4aaccd47e4.js" async=""></script><script src="/c87213c192fc9cb8753c10dd75e74e23ae9391ee-1102b991d7103fbe13c4.js" async=""></script><script src="/commons-2918422b25b7d526a2b4.js" async=""></script><script src="/a9a7754c-34b8923232843e7049e0.js" async=""></script><script src="/styles-407fe62976dc5310c43e.js" async=""></script><script src="/app-06ef109d51ffd802fbef.js" async=""></script><script src="/framework-6c3ead24af170cdcb87c.js" async=""></script><script src="/webpack-runtime-83755eb61c7a5e767e6c.js" async=""></script></body></html>