<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.63006906bb0ecee1c748.css" id="gatsby-global-css">.codeWrapper{position:relative;max-width:98%;margin-left:auto;margin-right:auto}.ConfettiWrapper{position:absolute;top:0;right:0;z-index:9}.CodeLanguageStub{left:8px;box-shadow:"none";-webkit-user-select:none;-ms-user-select:none;user-select:none}.CodeLanguageStub,.CopyCodeButton{position:absolute;top:0;margin:0;border:none;padding:8px 12px;background:#52307c;border-bottom-left-radius:8px;border-bottom-right-radius:8px;color:#ffffd2;font-size:14px;font-family:Ubuntu Mono,monospace;line-height:1;z-index:90}.CopyCodeButton{right:8px;box-shadow:none;text-decoration:none;cursor:pointer}.CodeWrapper-pre{text-align:left;margin:1em 0;padding:2rem;position:relative;overflow-x:auto;border-radius:3px;font-family:Ubuntu Mono,monospace}.CodeWrapper-pre .token-line{line-height:1.3em;white-space:pre-wrap}.CodeWrapper-span{display:inline-block;width:2em;-webkit-user-select:none;-ms-user-select:none;user-select:none;opacity:.3}code{font-family:Ubuntu Mono,monospace;font-size:1em!important}.grvsc-source{display:inline-block}span.grvsc-source>span{display:inline-block;word-break:break-all;word-wrap:break-word}.gatsby-resp-image-wrapper,.ZoomableImage{width:98%!important;max-width:700px!important;overflow:hidden;cursor:pointer;margin-left:auto;margin-right:auto;box-shadow:none!important}.ZoomableImage-enlarged{position:fixed;top:0;left:0;right:0;bottom:0;cursor:pointer;display:flex;padding:50px;z-index:100;background-color:rgba(0,0,0,.8)}.ZoomableImage-enlarged img{width:100%;height:auto;position:unset!important;box-shadow:none!important}#SocialIcons{height:60px;font-size:25px;width:100%;display:flex;justify-content:space-evenly}#SocialIcons i{cursor:pointer;transition:all .5s ease}#SocialIcons i:hover{color:#fff;transform:scale(1.3)}#MenuItems{list-style:none;font-size:1.2rem}#MenuItems a{text-decoration:none}#MenuItems a li{padding-right:1rem;margin-bottom:1rem;transition:border-width .5s ease}#MenuItems a li:after{content:"";display:block;width:0;height:1px;background:#ffffd2;transition:width .3s}#MenuItems a.active li:after,#MenuItems a:hover li:after{width:100%;padding-right:1rem}#AboutMe{margin-top:100px;flex:1 1 auto;display:flex;flex-direction:column;align-items:center}#AboutMe-ProfilePicture{width:70%;height:auto;margin-left:auto;margin-right:auto;transition:all .5s ease;border-radius:50%;overflow:hidden}#AboutMe-ProfilePicture:hover{transform:scale(1.1)}#AboutMe-ProfilePicture img{width:100%;-ms-user-select:none;user-select:none;-webkit-user-drag:none;-moz-user-select:none;-webkit-user-select:none}#AboutMe-MenuItems{width:100%;display:flex;flex-direction:column;align-items:flex-end}.SideBarWrapper{flex:0 0 18rem;z-index:98}#SideBar{background-color:#3b415c;color:#ffffd2;position:fixed;width:18rem;height:100%;display:flex;flex-direction:column}@media only screen and (max-width:1000px) and (-webkit-min-device-pixel-ratio:2){.SideBarWrapper{flex:0 0}#SideBar{transition:all .5s ease;transform:translateX(-18rem)}}@media only screen and (max-width:1000px) and (-webkit-min-device-pixel-ratio:2){#ContentWrapper{margin-top:60px}}#SideBarToggle{background-color:#3b415c;color:#ffffd2;font-size:2.5rem;border-bottom:1px solid #ffffd2}#SideBarToggle-checkbox{display:none}#SideBarToggleWrapper{display:none;width:100%;flex:0 0 50px;z-index:99;position:fixed;-ms-user-select:none;user-select:none;-webkit-user-select:none;-moz-user-select:none}.toggle{padding-left:10px;justify-self:center;cursor:pointer}#SideBarToggle{width:100%}@media only screen and (max-width:1000px) and (-webkit-min-device-pixel-ratio:2){#SideBarToggleWrapper{display:block}#SideBarToggle-checkbox:checked+#SideBar{transform:translateX(0)}}.svg-inline--fa,svg:not(:root).svg-inline--fa{overflow:visible}.svg-inline--fa{display:inline-block;font-size:inherit;height:1em;vertical-align:-.125em}.svg-inline--fa.fa-lg{vertical-align:-.225em}.svg-inline--fa.fa-w-1{width:.0625em}.svg-inline--fa.fa-w-2{width:.125em}.svg-inline--fa.fa-w-3{width:.1875em}.svg-inline--fa.fa-w-4{width:.25em}.svg-inline--fa.fa-w-5{width:.3125em}.svg-inline--fa.fa-w-6{width:.375em}.svg-inline--fa.fa-w-7{width:.4375em}.svg-inline--fa.fa-w-8{width:.5em}.svg-inline--fa.fa-w-9{width:.5625em}.svg-inline--fa.fa-w-10{width:.625em}.svg-inline--fa.fa-w-11{width:.6875em}.svg-inline--fa.fa-w-12{width:.75em}.svg-inline--fa.fa-w-13{width:.8125em}.svg-inline--fa.fa-w-14{width:.875em}.svg-inline--fa.fa-w-15{width:.9375em}.svg-inline--fa.fa-w-16{width:1em}.svg-inline--fa.fa-w-17{width:1.0625em}.svg-inline--fa.fa-w-18{width:1.125em}.svg-inline--fa.fa-w-19{width:1.1875em}.svg-inline--fa.fa-w-20{width:1.25em}.svg-inline--fa.fa-pull-left{margin-right:.3em;width:auto}.svg-inline--fa.fa-pull-right{margin-left:.3em;width:auto}.svg-inline--fa.fa-border{height:1.5em}.svg-inline--fa.fa-li{width:2em}.svg-inline--fa.fa-fw{width:1.25em}.fa-layers svg.svg-inline--fa{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0}.fa-layers{display:inline-block;height:1em;position:relative;text-align:center;vertical-align:-.125em;width:1em}.fa-layers svg.svg-inline--fa{transform-origin:center center}.fa-layers-counter,.fa-layers-text{display:inline-block;position:absolute;text-align:center}.fa-layers-text{left:50%;top:50%;transform:translate(-50%,-50%);transform-origin:center center}.fa-layers-counter{background-color:#ff253a;border-radius:1em;box-sizing:border-box;color:#fff;height:1.5em;line-height:1;max-width:5em;min-width:1.5em;overflow:hidden;padding:.25em;right:0;text-overflow:ellipsis;top:0;transform:scale(.25);transform-origin:top right}.fa-layers-bottom-right{bottom:0;right:0;top:auto;transform:scale(.25);transform-origin:bottom right}.fa-layers-bottom-left{bottom:0;left:0;right:auto;top:auto;transform:scale(.25);transform-origin:bottom left}.fa-layers-top-right{right:0;top:0;transform:scale(.25);transform-origin:top right}.fa-layers-top-left{left:0;right:auto;top:0;transform:scale(.25);transform-origin:top left}.fa-lg{font-size:1.33333em;line-height:.75em;vertical-align:-.0667em}.fa-xs{font-size:.75em}.fa-sm{font-size:.875em}.fa-1x{font-size:1em}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-6x{font-size:6em}.fa-7x{font-size:7em}.fa-8x{font-size:8em}.fa-9x{font-size:9em}.fa-10x{font-size:10em}.fa-fw{text-align:center;width:1.25em}.fa-ul{list-style-type:none;margin-left:2.5em;padding-left:0}.fa-ul>li{position:relative}.fa-li{left:-2em;position:absolute;text-align:center;width:2em;line-height:inherit}.fa-border{border:.08em solid #eee;border-radius:.1em;padding:.2em .25em .15em}.fa-pull-left{float:left}.fa-pull-right{float:right}.fa.fa-pull-left,.fab.fa-pull-left,.fal.fa-pull-left,.far.fa-pull-left,.fas.fa-pull-left{margin-right:.3em}.fa.fa-pull-right,.fab.fa-pull-right,.fal.fa-pull-right,.far.fa-pull-right,.fas.fa-pull-right{margin-left:.3em}.fa-spin{animation:fa-spin 2s linear infinite}.fa-pulse{animation:fa-spin 1s steps(8) infinite}@keyframes fa-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.fa-rotate-90{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";transform:rotate(90deg)}.fa-rotate-180{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";transform:rotate(180deg)}.fa-rotate-270{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";transform:rotate(270deg)}.fa-flip-horizontal{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";transform:scaleX(-1)}.fa-flip-vertical{transform:scaleY(-1)}.fa-flip-both,.fa-flip-horizontal.fa-flip-vertical,.fa-flip-vertical{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)"}.fa-flip-both,.fa-flip-horizontal.fa-flip-vertical{transform:scale(-1)}:root .fa-flip-both,:root .fa-flip-horizontal,:root .fa-flip-vertical,:root .fa-rotate-90,:root .fa-rotate-180,:root .fa-rotate-270{filter:none}.fa-stack{display:inline-block;height:2em;position:relative;width:2.5em}.fa-stack-1x,.fa-stack-2x{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0}.svg-inline--fa.fa-stack-1x{height:1em;width:1.25em}.svg-inline--fa.fa-stack-2x{height:2em;width:2.5em}.fa-inverse{color:#fff}.sr-only{border:0;clip:rect(0,0,0,0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.sr-only-focusable:active,.sr-only-focusable:focus{clip:auto;height:auto;margin:0;overflow:visible;position:static;width:auto}.svg-inline--fa .fa-primary{fill:var(--fa-primary-color,currentColor);opacity:1;opacity:var(--fa-primary-opacity,1)}.svg-inline--fa .fa-secondary{fill:var(--fa-secondary-color,currentColor)}.svg-inline--fa .fa-secondary,.svg-inline--fa.fa-swap-opacity .fa-primary{opacity:.4;opacity:var(--fa-secondary-opacity,.4)}.svg-inline--fa.fa-swap-opacity .fa-secondary{opacity:1;opacity:var(--fa-primary-opacity,1)}.svg-inline--fa mask .fa-primary,.svg-inline--fa mask .fa-secondary{fill:#000}.fad.fa-inverse{color:#fff}body,html{margin:0;padding:0;font-family:Titillium Web,sans-serif;background-color:#efefef}a{color:inherit;-webkit-user-drag:none}#Layout{display:flex;flex-direction:row;min-height:100vh;overflow:hidden}#Layout-ContentWrapper{flex:1 1 auto;display:flex;flex-direction:column}.autolink-header{padding-left:10px;display:none}h1,h2,h3,h4,h5,h6{pointer-events:none}.paging-links{width:100%;text-align:center;margin-top:30px}.paging-links a{text-decoration:none;font-size:1.2rem;background-color:#3b415c;color:#ffffd2;border-radius:8px;padding:8px;margin:4px}.paging-links a.disabled{background-color:#ccc;cursor:not-allowed}.grvsc-code{padding-top:25px}.grvsc-line{white-space:pre-wrap}code:not(.grvsc-code){display:inline-block;white-space:pre-wrap;padding:5px;margin:5px;border-radius:5px;background-color:#efefef}.div-paragraph{margin:30px 0}blockquote{border:1px solid #cdcdcd;border-left-width:10px;padding-left:5px}.iframe-wrapper{width:50%;margin-left:auto;margin-right:auto}@media only screen and (max-width:1000px) and (-webkit-min-device-pixel-ratio:2){.iframe-wrapper{width:100%}h1,h2,h3,h4,h5,h6{margin-top:-60px;padding-top:60px}}.Chip{font-size:12px;background-color:#eddbf4;padding:8px;border-radius:10px;color:#000;transition:all .5s ease;margin:4px;z-index:15;-ms-user-select:none;user-select:none;-moz-user-select:none;-webkit-user-drag:none;-webkit-user-select:none}.Chip-link{text-decoration:none;color:inherit}.Chip.active{background-color:#52307c;color:#eddbf4}.Chip:hover{transform:scale(1.15)}.PostCard{color:#52307c;background-color:#fff;padding:20px;margin:15px 20px 0;cursor:pointer;position:relative;box-shadow:0 1px 2px rgba(0,0,0,.1);border-radius:0;transition:all .6s cubic-bezier(.165,.84,.44,1);-ms-user-select:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-webkit-user-drag:none}.PostCard-description{color:#663a82}.PostCard:hover{transform:scale(1.005)}.PostCard:after{content:"";border-radius:0;position:absolute;z-index:-1;top:0;left:0;width:100%;height:100%;box-shadow:0 5px 15px rgba(0,0,0,.3);opacity:0;transition:all .6s cubic-bezier(.165,.84,.44,1)}.PostCard:hover:after{opacity:1}.PostCard-title{font-size:30px;font-weight:700}.PostCard-date{font-weight:lighter}.PostCard-tags{display:flex;flex-direction:row;margin-top:10px}.PostCard-link{z-index:10;position:absolute;top:0;left:0;right:0;bottom:0;-webkit-user-drag:none}.post-view{background-color:#fff;display:flex;flex-direction:column;align-items:center;min-height:100vh;font-size:1em}.post-view-content{align-self:stretch;padding:1rem 6rem 6rem}.post-view img{display:block;max-width:100%;max-height:100%;height:auto;margin-left:auto;margin-right:auto;-o-object-fit:contain;object-fit:contain}.embedVideo-container{display:block;max-width:98%;width:700px}.embedVideo-iframe{width:100%;height:400px}.post-view-title{color:#52307c;padding:0}.post-view-title,.post-view-title h1{margin:0;word-wrap:break-word;text-align:center}.post-view-title h1{font-size:4em}.post-view-date{padding:0;font-weight:lighter;font-size:1rem;text-align:center}@media only screen and (max-width:1000px) and (-webkit-min-device-pixel-ratio:2){.post-view-title h1{font-size:3em;padding:0;margin:0}.post-view-date{margin:0;font-size:1rem}.post-view-content{padding:2px}}</style><meta name="generator" content="Gatsby 2.29.2"/><title data-react-helmet="true">Dataweave Modules and How to Make Them - Michael Jones</title><link data-react-helmet="true" rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link data-react-helmet="true" rel="icon" type="image/svg+xml" href="/favicon.svg"/><link data-react-helmet="true" rel="manifest" href="/site.webmanifest"/><link data-react-helmet="true" rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"/><meta data-react-helmet="true" name="description" content="As your integration processes with MuleSoft mature, you&#x27;ll find yourself using the data-weave language more and more. More importantly, you&#x27;ll find yourself creating multiple functions which you&#x27;ll want to reuse throughout your organization; in this article I will present two different ways in which you can create reusable data-weave libraries which can be included from your central maven repository, how to setup module unit tests, and how to perform line-by-line data-weave debugging."/><meta data-react-helmet="true" name="keywords" content="mulesoft, dataweave"/><meta data-react-helmet="true" itemProp="name" content="Dataweave Modules and How to Make Them - Michael Jones"/><meta data-react-helmet="true" itemProp="description" content="As your integration processes with MuleSoft mature, you&#x27;ll find yourself using the data-weave language more and more. More importantly, you&#x27;ll find yourself creating multiple functions which you&#x27;ll want to reuse throughout your organization; in this article I will present two different ways in which you can create reusable data-weave libraries which can be included from your central maven repository, how to setup module unit tests, and how to perform line-by-line data-weave debugging."/><meta data-react-helmet="true" itemProp="image" content="https://syntaxsugar.io/favicon.svg"/><meta data-react-helmet="true" property="og:url" content="https://syntaxsugar.io"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:title" content="Dataweave Modules and How to Make Them - Michael Jones"/><meta data-react-helmet="true" property="og:description" content="As your integration processes with MuleSoft mature, you&#x27;ll find yourself using the data-weave language more and more. More importantly, you&#x27;ll find yourself creating multiple functions which you&#x27;ll want to reuse throughout your organization; in this article I will present two different ways in which you can create reusable data-weave libraries which can be included from your central maven repository, how to setup module unit tests, and how to perform line-by-line data-weave debugging."/><meta data-react-helmet="true" property="og:image" content="https://syntaxsugar.io/favicon.svg"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:title" content="Dataweave Modules and How to Make Them - Michael Jones"/><meta data-react-helmet="true" name="twitter:description" content="As your integration processes with MuleSoft mature, you&#x27;ll find yourself using the data-weave language more and more. More importantly, you&#x27;ll find yourself creating multiple functions which you&#x27;ll want to reuse throughout your organization; in this article I will present two different ways in which you can create reusable data-weave libraries which can be included from your central maven repository, how to setup module unit tests, and how to perform line-by-line data-weave debugging."/><meta data-react-helmet="true" name="twitter:image" content="https://syntaxsugar.io/favicon.svg"/><meta data-react-helmet="true" name="msapplication-TileColor" content="#da532c"/><meta data-react-helmet="true" name="theme-color" content="#ffffff"/><link href="https://fonts.googleapis.com/css?family=Titillium+Web|Ubuntu+Mono&amp;display=swap" rel="stylesheet"/><link as="script" rel="preload" href="/webpack-runtime-83755eb61c7a5e767e6c.js"/><link as="script" rel="preload" href="/framework-6c3ead24af170cdcb87c.js"/><link as="script" rel="preload" href="/app-06ef109d51ffd802fbef.js"/><link as="script" rel="preload" href="/styles-407fe62976dc5310c43e.js"/><link as="script" rel="preload" href="/a9a7754c-34b8923232843e7049e0.js"/><link as="script" rel="preload" href="/commons-2918422b25b7d526a2b4.js"/><link as="script" rel="preload" href="/c87213c192fc9cb8753c10dd75e74e23ae9391ee-1102b991d7103fbe13c4.js"/><link as="script" rel="preload" href="/component---src-templates-post-js-653ffa86fa4aaccd47e4.js"/><link as="fetch" rel="preload" href="/page-data/post/2021/dw-module-how-to/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/1375839498.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3128451518.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/324868815.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div id="Layout"><div class="SideBarWrapper"><input type="checkbox" id="SideBarToggle-checkbox" name="" value=""/><div id="SideBar"><div id="AboutMe"><a class="link-to" id="AboutMe-ProfilePicture" href="/"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:100%"></div><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGB0lEQVQ4yx3U+1fT9x3H8c93vUyNVbtqsdgpFHVQrHcLdFJBNqqAFoJACIFlJCC0cgcpBARCuUhGEIJoIIBcFBAMIhaRiyi3gBjFBqFom+1wPHMXf9h22q32++X9Gvb9BzzO8/XLm1nnH7CZByPssWWSuz89xrW1VjLwEF3tMMibDFpjVbl6ob5aI7RfLhe0NUELDU15RsvdcfnVtlLR+K0udnf8Bjfcc4kbvXmZjfd3MHap9izraqvnADDzvRFmbNdLs4tDrYk53lCXhuNMxUm0NpzDuep05Gl98WWZFH29Tbg/MWAdG+yU3hv9iukzE9iD0eucZeIGY72dF7n57n728oaHjLrODgMiknfAPYzxyaddeI0hkPQNKXSm7AtKy/EhWbwD39Jxmp/92oSRwU70ddbrahsKmbkhiZmHrnBsqeznurGhHt3U3UG0t+r58/UqISxuF30SsJ2Ux/0oKyeI0r+QUVFFLB2NsKO29rP0l28fCmO3r/GD15sxNdyle/ToETNNmTl2PFTCkqMU0vbmOkw/HONbW85S6ZkM7PxgO732ykpa9tobeOctG9hvWAdXd2f4SPfRkdB9pDuXh6mxXhq43sTP3B8C/+P30p/+92/2slBkbG2xXrxQ8xIUagxlOOrnS++ts0GIuxvEbh9iv+NWuDjYw8HGFi6ezvA65gxPv22kyj2O/u5m4RvLOGhRsP70w4+il6B8eOAW6vWVvGVmgjIzUikqIhYDFVrM6dSY1eVjrDAN11WfISPwMGzX/Qq7vVZh636GbR4iammuoCezkzzRIgSelzNtY6wx78tYNNdW8/enRyglJZm6O+/gb7cGMVd+agnNg7kkHaOFCbiWHQPX32zFjo/WI/yEOyqrTtHQjXb685PpJZCwKPBGFpK1fEGVFY5rl1voocVEJZpiTN2x4MEFA+YrizCvK8BoQTpaUpS4khWLZKk/tuy2Qb4mEfdM/UjNCqXhkW5aWooXPL/ARiwdwvBtE/IKMqijs44utlzAzZYOaCIl6FIlYLaiAOVKKTKP+SFf5g9tvALB3nsQleKPprYSHAxbRdHpHvT3Z0/w7OmcwCbn/ymka4vheOBVOhj4LjU1VePh1U7oYyLQGBOGifw0FIkP4bTkU5xXiHEhUYEMhQ/iCkNQWa1CeU085WhCyGwy4rG5T2DZesOC8qQ/gpVO5BGwk06p0/Ft/zgmM5JgrfwTHhuqUR8uxnh6Au6cjENjcjTqqvKRVSZBuU6FriuXyGQepn+94PFicXGBBUTvMhaUpCBXo+ZDYsJIEimh74zdmM7LxM3sdAwW5CPFcz+unIiGpfAUyqNCoS3KRJWhGCWlcVRRFUNPvpvn//PDf/GP58+NTBK/XZ5WqUNyaRGfmB9FshgZdRSqURYphavdRkS5uuGjX2+C68YNUEuOIMLDDUlJEkRn/RaqPA+qqkmjvz5b4Ifu3EZ5WamcldTNiGTxn1u9A3fBN9RFUKZJIfM/Sp47d6L0j1LURyuQ5HUA7lvew7ur18DVaSsaGkuQWvQxVWltMNDTKDx99hSjkxPWQm2xiPkc+5jt27VK6umzB/KkGD4xO5+8PwnAZntHknl5UoDLXrjY2cH2zbVY/voK7HF2pNpzetKcTUKr3o1mTXr+67lvMDZhkppn5hgra7zFyYLDWbyqWHcyuxTSPyTyTjs8Badt+8hhkwP57N1L2zfZ0fJlb9CqlWvo7bUb6PAhH/osLkHIy07lG84XoKe3V3ex/RpraKzlWGhIMKcIk7Oe78Fioo7rPhWH4fWVdtjx/m7ebqMDv2b1WlqxYjWtf+tt2u/sTCtE7/BeB735kKAgiMXBUESf0JmfPmf97edZmbZsCZQGM5kslMNIH9ts78SO+AZIX1lma7Vda4/I3x2A0vf3SA46Al20BK6OH4D75Xr4+R5FhCzcGiQOlErkyT//0qKCfK6urp4xpfJzplTEsKSEVG6Lsxt36HAAs9+wWcRetZGHuX1obIyXLfTlnBAy/A8L7BfrFla/aW+UhobJYxWRomPiQKbKVXPq3FwuNSWVaTQa9n+KHZEX8OTqGwAAAABJRU5ErkJggg==" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/3f7c935dcce0978397a510e419a6a0c1/69585/profilePicture.png 200w,
/static/3f7c935dcce0978397a510e419a6a0c1/497c6/profilePicture.png 400w,
/static/3f7c935dcce0978397a510e419a6a0c1/ee604/profilePicture.png 800w,
/static/3f7c935dcce0978397a510e419a6a0c1/05d05/profilePicture.png 1080w" sizes="(max-width: 800px) 100vw, 800px" /><img loading="lazy" sizes="(max-width: 800px) 100vw, 800px" srcset="/static/3f7c935dcce0978397a510e419a6a0c1/69585/profilePicture.png 200w,
/static/3f7c935dcce0978397a510e419a6a0c1/497c6/profilePicture.png 400w,
/static/3f7c935dcce0978397a510e419a6a0c1/ee604/profilePicture.png 800w,
/static/3f7c935dcce0978397a510e419a6a0c1/05d05/profilePicture.png 1080w" src="/static/3f7c935dcce0978397a510e419a6a0c1/ee604/profilePicture.png" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></a><h1>Michael Jones</h1><div id="AboutMe-MenuItems"><div><ul id="MenuItems"><a class="" href="/"><li>Posts</li></a><a href="/dw-cookbook"><li>DW Cookbook</li></a></ul></div></div></div><div id="SocialIcons"><i><a href="https://github.com/mikeacjones" class="link-to" target="_blank" rel="noreferrer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github fa-w-16 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" alt="github"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></i><i><a href="https://www.linkedin.com/in/michael-jones-5a870678/" class="link-to" target="_blank" rel="noreferrer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin" class="svg-inline--fa fa-linkedin fa-w-14 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" alt="linkedin"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a></i><i><a href="https://stackoverflow.com/users/10890536/michael-jones" class="link-to" target="_blank" rel="noreferrer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="stack-overflow" class="svg-inline--fa fa-stack-overflow fa-w-12 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" alt="stackoverflow"><path fill="currentColor" d="M290.7 311L95 269.7 86.8 309l195.7 41zm51-87L188.2 95.7l-25.5 30.8 153.5 128.3zm-31.2 39.7L129.2 179l-16.7 36.5L293.7 300zM262 32l-32 24 119.3 160.3 32-24zm20.5 328h-200v39.7h200zm39.7 80H42.7V320h-40v160h359.5V320h-40z"></path></svg></a></i></div></div></div><div id="Layout-ContentWrapper"><div id="SideBarToggleWrapper"><div id="SideBarToggle"><label for="SideBarToggle-checkbox" class="toggle">☰</label></div></div><div id="ContentWrapper"><div class="post-view"><div class="post-view-header"><div class="post-view-title"><h1>Dataweave Modules and How to Make Them</h1><div class="post-view-date">Written on <!-- -->2021-08-09</div><a href="https://github.com/mikeacjones/syntaxsugar.io/issues/new?labels=post%20question&amp;assignees=mikeacjones&amp;title=Dataweave Modules and How to Make Them&amp;body=I%20have%20a%20question/issue%20about:" referrer="noreferrer" target="_blank"><h3><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github fa-w-16 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" alt="github"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg> Ask Question / Submit Issue</h3></a></div></div><div class="post-view-content"><h1 id="dataweave-modules" style="position:relative">Dataweave Modules<a href="#dataweave-modules" aria-label="dataweave modules permalink" class="autolink-header after"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h1><h2 id="what-are-they" style="position:relative">What are they?<a href="#what-are-they" aria-label="what are they permalink" class="autolink-header after"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2><div class="div-paragraph">DataWeave modules provide reusable functions that aren&#x27;t necessarily core to the runtime, like <code>isAlpha</code>, <code>takeWhile</code>, <code>countBy</code>, etc. DataWeave provides a large number of built in libraries to help with common tasks which we can import; for example, if you wanted to create a signed JWT for authentication, you would leverage the Binaries and Crypto modules:</div><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">data-weave</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container grvsc-has-line-highlighting community-material-theme-palenight" data-language="data-weave" data-index="0"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3 mtki">%dw</span><span class="mtk1"> </span><span class="mtk3 mtki">2.0</span></span></span>
<span class="grvsc-line grvsc-line-highlighted"><span class="grvsc-source"><span class="mtk12">import</span><span class="mtk1"> toBase64 </span><span class="mtk12">from</span><span class="mtk1"> </span><span class="mtk7">dw::core::Binaries</span></span></span>
<span class="grvsc-line grvsc-line-highlighted"><span class="grvsc-source"><span class="mtk12">import</span><span class="mtk1"> HMACBinary </span><span class="mtk12">from</span><span class="mtk1"> </span><span class="mtk7">dw::Crypto</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">fun</span><span class="mtk1"> </span><span class="mtk9">binaryJson</span><span class="mtk1">(</span><span class="mtk10">obj</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">Object</span><span class="mtk1">) </span><span class="mtk12">=</span><span class="mtk1"> </span><span class="mtk8">write</span><span class="mtk5">(</span><span class="mtk8">obj</span><span class="mtk5">,</span><span class="mtk1"> </span><span class="mtk5">&#x27;</span><span class="mtk6">application/json</span><span class="mtk5">&#x27;,</span><span class="mtk1"> </span><span class="mtk5">{</span><span class="mtk1"> indent</span><span class="mtk5">:</span><span class="mtk1"> </span><span class="mtk4">false</span><span class="mtk1"> </span><span class="mtk5">})</span><span class="mtk1"> </span><span class="mtk5 mtki">as</span><span class="mtk1"> </span><span class="mtk7">Binary</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">fun</span><span class="mtk1"> </span><span class="mtk9">base64URL</span><span class="mtk1">(</span><span class="mtk10">str</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">Binary</span><span class="mtk1">) </span><span class="mtk12">=</span><span class="mtk1"> </span><span class="mtk8">toBase64</span><span class="mtk5">(</span><span class="mtk8">str</span><span class="mtk5">)</span><span class="mtk9"> replace </span><span class="mtk5">&quot;</span><span class="mtk6">+</span><span class="mtk5">&quot;</span><span class="mtk9"> with </span><span class="mtk5">&quot;</span><span class="mtk6">-</span><span class="mtk5">&quot;</span><span class="mtk9"> replace </span><span class="mtk5">&quot;</span><span class="mtk6">/</span><span class="mtk5">&quot;</span><span class="mtk9"> with </span><span class="mtk5">&quot;</span><span class="mtk6">_</span><span class="mtk5">&quot;</span><span class="mtk9"> replace </span><span class="mtk5">&quot;</span><span class="mtk6">=</span><span class="mtk5">&quot;</span><span class="mtk9"> with </span><span class="mtk5">&quot;&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">fun</span><span class="mtk1"> </span><span class="mtk9">base64Obj</span><span class="mtk1">(</span><span class="mtk10">obj</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">Object</span><span class="mtk1">) </span><span class="mtk12">=</span><span class="mtk1"> </span><span class="mtk8">base64URL</span><span class="mtk5">(</span><span class="mtk8">binaryJson</span><span class="mtk5">(</span><span class="mtk8">obj</span><span class="mtk5">))</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">fun</span><span class="mtk1"> </span><span class="mtk9">JWT</span><span class="mtk1">(</span><span class="mtk10">header</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">Object</span><span class="mtk1">, </span><span class="mtk10">body</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">Object</span><span class="mtk1">, </span><span class="mtk10">key</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">String</span><span class="mtk1">) </span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">String</span><span class="mtk1"> </span><span class="mtk12">=</span><span class="mtk1"> </span><span class="mtk5 mtki">do</span><span class="mtk1"> </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk12">var</span><span class="mtk1"> </span><span class="mtk7">jwt</span><span class="mtk1"> </span><span class="mtk12">=</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk4">$(</span><span class="mtk8">base64Obj</span><span class="mtk5">(</span><span class="mtk8">header</span><span class="mtk5">)</span><span class="mtk4">)</span><span class="mtk6">.</span><span class="mtk4">$(</span><span class="mtk8">base64Obj</span><span class="mtk5">(</span><span class="mtk8">body</span><span class="mtk5">)</span><span class="mtk4">)</span><span class="mtk5">&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk12">---</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;</span><span class="mtk4">$(</span><span class="mtk8">jwt</span><span class="mtk4">)</span><span class="mtk6">.</span><span class="mtk4">$(</span><span class="mtk8">base64URL</span><span class="mtk5">(</span><span class="mtk8">HMACBinary</span><span class="mtk5">(</span><span class="mtk8">key</span><span class="mtk1"> </span><span class="mtk5 mtki">as</span><span class="mtk1"> </span><span class="mtk7">Binary</span><span class="mtk5">,</span><span class="mtk1"> </span><span class="mtk8">jwt</span><span class="mtk1"> </span><span class="mtk5 mtki">as</span><span class="mtk1"> </span><span class="mtk7">Binary</span><span class="mtk5">,</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">HmacSHA256</span><span class="mtk5">&quot;))</span><span class="mtk4">)</span><span class="mtk5">&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">output</span><span class="mtk1"> </span><span class="mtk6">application/json</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">---</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">JWT</span><span class="mtk5">({</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    alg</span><span class="mtk5">:</span><span class="mtk1"> </span><span class="mtk5">&#x27;</span><span class="mtk6">HS256</span><span class="mtk5">&#x27;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    typ</span><span class="mtk5">:</span><span class="mtk1"> </span><span class="mtk5">&#x27;</span><span class="mtk6">JWT</span><span class="mtk5">&#x27;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">},</span><span class="mtk1"> </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    iat</span><span class="mtk5">:</span><span class="mtk1"> </span><span class="mtk8">now</span><span class="mtk5">()</span><span class="mtk1"> </span><span class="mtk5 mtki">as</span><span class="mtk1"> </span><span class="mtk7">Number</span><span class="mtk1"> </span><span class="mtk5">{</span><span class="mtk1"> unit</span><span class="mtk5">:</span><span class="mtk1"> </span><span class="mtk5">&#x27;</span><span class="mtk6">milliseconds</span><span class="mtk5">&#x27;</span><span class="mtk1"> </span><span class="mtk5">},</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    sub</span><span class="mtk5">:</span><span class="mtk1"> </span><span class="mtk8">now</span><span class="mtk5">()</span><span class="mtk1"> </span><span class="mtk5 mtki">as</span><span class="mtk1"> </span><span class="mtk7">Number</span><span class="mtk1"> </span><span class="mtk5">{</span><span class="mtk1"> unit</span><span class="mtk5">:</span><span class="mtk1"> </span><span class="mtk5">&#x27;</span><span class="mtk6">milliseconds</span><span class="mtk5">&#x27;</span><span class="mtk1"> </span><span class="mtk5">},</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    name</span><span class="mtk5">:</span><span class="mtk1"> </span><span class="mtk5">&#x27;</span><span class="mtk6">Michael Jones</span><span class="mtk5">&#x27;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">},</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">&#x27;</span><span class="mtk6">y(O&gt;KUIIj}m</span><span class="mtk5">\$</span><span class="mtk6">og)</span><span class="mtk5">&#x27;)</span></span></span></code></pre></div><blockquote><div class="div-paragraph">If you run this in <a href="https://dwlang.fun" target="_blank" rel="noreferrer">https://dwlang.fun</a>, you&#x27;ll see that it produces a valid JWT that you can test on <a href="https://jwt.io" target="_blank" rel="noreferrer">https://jwt.io</a>.</div></blockquote><div class="div-paragraph">So DataWeave provides a lot of out-of-the-box modules we can leverage for common tasks. </div><div class="div-paragraph">Like the code above, we frequently run into situtations where a reusable function would be extremely useful.. but there isn&#x27;t one! So what can we do? Well, just like the vast majority of languages, we can create and publish our own reusable modules; once published, we can include it as a maven depedency just like anything else. Reusable modules provide benefits beyond just standardization and reuse - we can actually put these modules into their own CI/CD pipelines, which allows us to introduce new, reusable features that are properly tested and documented!</div><h1 id="lets-build-a-jwt-module" style="position:relative">Let&#x27;s Build a JWT Module!<a href="#lets-build-a-jwt-module" aria-label="lets build a jwt module permalink" class="autolink-header after"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h1><div class="div-paragraph">A large number of APIs require that we generate a signed JWT in order to authenticate. MuleSoft does not currently have a built in function/connector for this process, so we&#x27;ll leverage functionality that already exists within DataWeave to build our own reusable library.</div><h2 id="development-environment-setup" style="position:relative">Development Environment Setup<a href="#development-environment-setup" aria-label="development environment setup permalink" class="autolink-header after"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2><div class="div-paragraph">DataWeave modules are still Maven projects, so we can develop them in Anypoint Studio; however, using IntelliJ provides an extended tool set which makes for an improved developer experience.</div><ol><li>Install IntelliJ: If you don&#x27;t already have IntelliJ installed, visit <a href="https://www.jetbrains.com/idea/" target="_blank" rel="noreferrer">https://www.jetbrains.com/idea/</a> and download the Community edition.</li><li>Add the DataWeave plugin, which provides tooling around DataWeave project types, line-by-line debugging, and more.</li></ol><div class="div-paragraph"><div role="button" class="ZoomableImage"><img alt="Animated GIF showing the installation of the DataWeave plugin, authored by MuleSoft" src="/3a5041878e94c3792e87a61fd59195d0/install-dataweave-plugin.gif"/></div></div><h2 id="create-the-dataweave-project" style="position:relative">Create the DataWeave Project<a href="#create-the-dataweave-project" aria-label="create the dataweave project permalink" class="autolink-header after"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2><ol><li>In IntelliJ, click Create Project</li><li>Select the type “Weave Project”</li></ol><div class="div-paragraph"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:700px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:86.28571428571429%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAACnElEQVQ4y42Ty27aQBSGR40EhKgRu6q5NBfaJYpaJQTb49v4gm8YCInaRStVfYxuqi77MnmFPEKC1CqbiG12EctIYJ2eM2AnElB18TMee/jm/8+cYYyxUuRal1Zo36uadqfp2kjT+Yib9ohbQqodd0Z+lBTvNBxzqYZ1h+N9ixuXxGIvGasd+d9utS+/QP/0Ez70f0Aj+Q7cS8HxfbCDGEQQgSEc0G0HDBSCASGgW0K+N4ULCjduEVhDJKu9N8Nrs/sVzOjjRPXPs6boZ9z2Mtv1Msv1M9vzM3SWGcIthJDZO9uZ4BxOVX4tgfSjGubQj2PQTWOqcA1UztGNALcdFvLDGJJeH3qDC+j0ziBIOtIxRp6S26aiDQtg0zSHXtrFiMHUcDygHSkOzqVcjOxHMXgIxXrK2AiSQtgiULHMYZB2wHbbU3MOxDiAUSUwQAiBqFZY/Oew5Q41yxn6nS4BpgRSdFPGkQ4xLgEpZtztF+5p3Ry8CDzBiWo87UYLCUhRixpGyQya9qQEbrYyMk2e26eF5ID+JLw24Enjc1vGDjspHkgqXa50uArozIEE9sIIYV2IUG4Q5vX7fyBFJgjFbccJJFi/9GwA3cG5jE+1XHkoS4HkEGHSJcYlMLmj+tFI0Kc+FAuHcjO3P0FlJLoFCMowsrwpCM7CJM0wthyxFzPsBlo70QwDgepNAWxx/XfefzTyeVtQA+tz5d9y5b3K8ZvmJdDUxZ8cuIl2r/AkH/G6PdiuP0bH4+OWukTKTKfK+ATnCtfHTW4/HIefH4/08IpYBFwrl8uNcqXiogQ+O+vVqlR1QRuF5Jp1UkVslF6466W1BrEIyF5vbbOd3TdS2zu77KBeZ4f1t/8Urdk/rLOD/T32bmuT7b2SadlfJ2PjM/AmiE0AAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <div role="button" class="ZoomableImage"><img alt="Create weave project screenshot" class="gatsby-resp-image-image" title="Create weave project screenshot" src="/static/a5e27b3d1bfae2af3cd01e8310b3be05/8c557/create-weave-project.png" srcSet="/static/a5e27b3d1bfae2af3cd01e8310b3be05/4edbd/create-weave-project.png 175w,/static/a5e27b3d1bfae2af3cd01e8310b3be05/13ae7/create-weave-project.png 350w,/static/a5e27b3d1bfae2af3cd01e8310b3be05/8c557/create-weave-project.png 700w,/static/a5e27b3d1bfae2af3cd01e8310b3be05/e996b/create-weave-project.png 1050w,/static/a5e27b3d1bfae2af3cd01e8310b3be05/2cefc/create-weave-project.png 1400w,/static/a5e27b3d1bfae2af3cd01e8310b3be05/29007/create-weave-project.png 1600w" sizes="(max-width: 700px) 100vw, 700px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/></div>
    </span></div><ol start="3"><li>Set groupId to <code>com.mulesoft.codelabs</code></li><li>Set artifactId to <code>jwt-dw-module</code></li><li>Leave the version as <code>1.0.0-SNAPSHOT</code></li></ol><div class="div-paragraph"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:700px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:86.28571428571429%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAABk0lEQVQ4y+3UO2vCQADA8aOCUQvSrdRXUdtROrRa87jkXolRo5UWuvgd/Qp+hFpocZGsbuIoxHC9CxqqUKtLpw5/LiS5H3dwCQAAJDs2G5ltOoeIzhCzfYsy30AkCmLiu17fb3V78b2dLDwT41yF5khaInBhIDwljsuddod7gwFvdT1OW+5RYdvhEFPe1OFUWhEIEXmTIPWeg97rMGS9l9By+yHqPIWofSDx3Gx5AcRMgm8x+KgZ77qFuY7Z2sC2GGXsqDQk5iDCpRGDDU2PQM1EaxE/sbWcK41voLEBcfTwlLZzGrsrNOIVng6if/CvQHkkDiB7INkDVX2yOVOBKDwtK9BNizdUbRKDTcP8sKjNTcK4HOXJPyb5LiTiq7I93oDkcwtmxQrHiDkr8WdZYOYs66q+rDe1H3sQiS0uie0sdeIs7t3h6g62x9KSYEJRlJqSSjEREdc0ncn8XjpNk+LdVEoh58oZSycTNWlJEFzl8qBQLEXlC0VQrlZBpXpzsHKlCnL5IigVC+A2lwXXl9FuwRdaMdpI/K1cngAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <div role="button" class="ZoomableImage"><img alt="Screenshot of setting module IDs" class="gatsby-resp-image-image" title="Screenshot of setting module IDs" src="/static/5b10fbd50d05665f2a9b83527a00f661/8c557/set-project-ids.png" srcSet="/static/5b10fbd50d05665f2a9b83527a00f661/4edbd/set-project-ids.png 175w,/static/5b10fbd50d05665f2a9b83527a00f661/13ae7/set-project-ids.png 350w,/static/5b10fbd50d05665f2a9b83527a00f661/8c557/set-project-ids.png 700w,/static/5b10fbd50d05665f2a9b83527a00f661/e996b/set-project-ids.png 1050w,/static/5b10fbd50d05665f2a9b83527a00f661/2cefc/set-project-ids.png 1400w,/static/5b10fbd50d05665f2a9b83527a00f661/29007/set-project-ids.png 1600w" sizes="(max-width: 700px) 100vw, 700px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/></div>
    </span></div><ol start="6"><li>On the next screen, leave all of the defaults</li></ol><div class="div-paragraph"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:700px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:86.28571428571429%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAABkElEQVQ4y+2UW0sCQRSAJ0x3VYheIvIWaj1KD6W47n1m9uK1SPoF/T//gj9BhcIX2VffxEdhXaYzW20SafoY9PBxZuCcb+bAmUEIoUTLIgO9Zc0lRZ9pmHomtT3VJJ5iYIjYczs9z2l3w/0PzCBnLqnagLsAdKro5pQ4TQYS5rQ7rPfYZ1arzbDjMrIH1G0yWTem3BUK4YSRDQLTcny30w0e+k8B7ANsuwEUbAVzbNcn78JRJJR1c6ITizU0Y61hEt50HwxqMRCueXfQ+iQS1hryBKShEGAHsua13LEhVCIhj4fwJVT+hX9OyEdih2RjbUIN/iaU5PHHTPlAcBCq7suaxmpSYxwJ64r2wl8KfAyMR5j6veC5KrGZbN+zmkZfP4UncMOhQe0VvOkF/DTLqiQvq/XGVu4AaHGJLXspE3dx23le3Ri9IXdxYUwQhIogihTAsCbJVOp3kkmSgFxRSOB0HNFk/KiC0HGMC9FFJoty+UJINpdHxXIZlcpXOymWyigDuYVcBl2fi+jyLB1+h2+gLtqgC9iR9QAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <div role="button" class="ZoomableImage"><img alt="Screenshot of leaving defaults" class="gatsby-resp-image-image" title="Screenshot of leaving defaults" src="/static/698348d270e8d321ef85b292362a3a7d/8c557/new-project-defaults.png" srcSet="/static/698348d270e8d321ef85b292362a3a7d/4edbd/new-project-defaults.png 175w,/static/698348d270e8d321ef85b292362a3a7d/13ae7/new-project-defaults.png 350w,/static/698348d270e8d321ef85b292362a3a7d/8c557/new-project-defaults.png 700w,/static/698348d270e8d321ef85b292362a3a7d/e996b/new-project-defaults.png 1050w,/static/698348d270e8d321ef85b292362a3a7d/2cefc/new-project-defaults.png 1400w,/static/698348d270e8d321ef85b292362a3a7d/29007/new-project-defaults.png 1600w" sizes="(max-width: 700px) 100vw, 700px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/></div>
    </span></div><ol start="7"><li>Set the project name to <code>jwt-dw-module</code> and choose a location to save the files</li></ol><div class="div-paragraph"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:700px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:86.28571428571429%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAABjklEQVQ4y+2UzUrDQBCAF4UkVVBvYtsU2uqx4KFqkzTZ7E+2P1ZbUUHwHX0FH8EKihfJ1Zv0KLRlnI0aoY1Vz3r4mGVm+HYXdpYQQoyOFFdhN3pyA/boi1ZMZTv2WBS7ocAoY9XrI4Mkl8Gjx9VTw2dX2oWQjSZlD7LVASoUqP4ZdE8voDU4h+j4NIUfDoB1+5nw3gl4ov2gXYmw0QxuAi4hYGJMhZyySCXwqJWusTb1Gc9iHHABDjpS4b7j3bpBCMjE8UNwfDrHez2LiUsZ7KHjU+g2bz1MejScvMWfo4U6asec8KP4L/wrQv3GFkhmhHxG6HjD90c6Rqa/g469gMK+4w5TIe50p7o9EMk8R9AM+bf4TECIvYHuj47gwOf3H8I1POF1KNULzuUzk2qEYzTaa7hfUkfwiiMeqRH+NM/1zuXLrt+51i4tXDZNs2ZalkQ4rkVuZeV7cjlhYK9lmXzVWJI5Y7mmXVpItvIFUrRLCYWiTcrVKqlUtxdSrlRJvmCTkl0kO/k1UtpcT1yvTYXZsnjhs1wAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <div role="button" class="ZoomableImage"><img alt="Screenshot of project name" class="gatsby-resp-image-image" title="Screenshot of project name" src="/static/1a55f272e5c7a835899ac3b2c08ccf1d/8c557/set-project-name.png" srcSet="/static/1a55f272e5c7a835899ac3b2c08ccf1d/4edbd/set-project-name.png 175w,/static/1a55f272e5c7a835899ac3b2c08ccf1d/13ae7/set-project-name.png 350w,/static/1a55f272e5c7a835899ac3b2c08ccf1d/8c557/set-project-name.png 700w,/static/1a55f272e5c7a835899ac3b2c08ccf1d/e996b/set-project-name.png 1050w,/static/1a55f272e5c7a835899ac3b2c08ccf1d/2cefc/set-project-name.png 1400w,/static/1a55f272e5c7a835899ac3b2c08ccf1d/29007/set-project-name.png 1600w" sizes="(max-width: 700px) 100vw, 700px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/></div>
    </span></div><ol start="8"><li>Create the project</li></ol><h2 id="examining-the-project-structure" style="position:relative">Examining the Project Structure<a href="#examining-the-project-structure" aria-label="examining the project structure permalink" class="autolink-header after"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2><div class="div-paragraph">Once the project has been created, you&#x27;ll notice that a number of folders are present by default:</div><div class="div-paragraph"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:700px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:81.71428571428572%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsTAAALEwEAmpwYAAABnklEQVQoz43S3YqcMBQHcJ+p3qyTmK+TDzWaGKPjOE53y94spXd9i0Kfolta6EWfsbEDvVq08OPPyYED+cpwHfXwqN3CmqmQ/SlRbyikl25RboF2FnbW/crqIaMA3by0fWh9H8ZRVRUD4EoKpUDrlHdcSmWMaRppDOGcclFSlj2wTo0v4fapGp5pc0PqgvTbTmou1DnlacvLA/dZPnwpnn4Mn3/xj7/z9fu76+uOfH3Nt/yW337m8WuGSZmA0nGMda1Rie+dQyeMMkw5ZqJAGMLk4kQ5IMK25pETJn+HCcclq8Jk+9i0HegKlWxr7tqGiQACUHsfL4tp21Sn+yeHpESMZdpX9tyaWF+fh6eX1V37emyaye5LI9LpjCkJtWYaxiXO62yDF0aKSu1LIxREJmqlnIFGd4/+/OHipl525pByFTOQlUJQCSnbafBTtN5ra7eTyz1pvziduaScSKPC3LmgqoZwIAwKTBHh+wqUbpsLe33vQnRhsK53/eBDlFVdMnH8zqik1AYmjZCagUpSwaX+/0+SNsnu0vJfcTj8ByiGCPESVs1FAAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <div role="button" class="ZoomableImage"><img alt="Image of project folders" class="gatsby-resp-image-image" title="Image of project folders" src="/static/d2da5bbf93857268a389cb7b0b55eccc/8c557/307ceea2a557949e.png" srcSet="/static/d2da5bbf93857268a389cb7b0b55eccc/4edbd/307ceea2a557949e.png 175w,/static/d2da5bbf93857268a389cb7b0b55eccc/13ae7/307ceea2a557949e.png 350w,/static/d2da5bbf93857268a389cb7b0b55eccc/8c557/307ceea2a557949e.png 700w,/static/d2da5bbf93857268a389cb7b0b55eccc/914c7/307ceea2a557949e.png 978w" sizes="(max-width: 700px) 100vw, 700px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/></div>
    </span></div><div class="div-paragraph">This is where we will setup our code, as well as any unit testing we wish to include. The project structure is dictated by the configuration in the POM file:</div><div class="div-paragraph"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:646px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:36%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAo0lEQVQY05WQSxKDIBBEPU6iE4kyREPxx2i8/4XS6CaLLMgUVSyG7n50Y+bh5XmLamJxubZt98c0RIRrUuKdVHZyC6xkX2lSxOeInpKVe1IA0dP9W18CiG5HzG8xVnhffhF48bx6aa3WxvuYjYsx2MWN8MVBxulziA8bJLvnsEVenIxGVmEDCnxoaw2858Ls9UiVhRVx280PgcLRGSyQDLAa8Qd8qE6qFBVGFAAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <div role="button" class="ZoomableImage"><img alt="Image of POM file" class="gatsby-resp-image-image" title="Image of POM file" src="/static/6b62a4d63c999b22e320a7fac0c280c4/27524/6605f7bffda122c6.png" srcSet="/static/6b62a4d63c999b22e320a7fac0c280c4/4edbd/6605f7bffda122c6.png 175w,/static/6b62a4d63c999b22e320a7fac0c280c4/13ae7/6605f7bffda122c6.png 350w,/static/6b62a4d63c999b22e320a7fac0c280c4/27524/6605f7bffda122c6.png 646w" sizes="(max-width: 646px) 100vw, 646px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/></div>
    </span></div><div class="div-paragraph">This entry indicates that, when building the project, we should look for DataWeave files in <code>src/main/dw</code>. Your folder structure here dictates what the import looks like; eg: creating a subfolder <code>src/main/dw/jwt</code> with a file called RSA.dwl will make our import: <code>import * from dw::jwt::RSA</code>.</div><div class="div-paragraph">When adding DataWeave files in a Mule Application, we typically place them in the default <code>src/main/resources</code> directory; however, for the purposes of a DataWeave module best practice suggests using <code>src/main/dw</code>.</div><div class="div-paragraph"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:690px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:54.85714285714286%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABgElEQVQoz2VSWY7bMAzNaeJY1r4r8r4m8XiAfjSYAfrR+5+idOwEaftACoQg8j1SPCCUcUb6Us29ubZmrHUVJSEY/YvsZS8cwCnB3rCx0stgb50ZKu0NzzKUPnDakKLkhLYTvScD0hQBf3EW1850pRpr5b3R1jvv/Tn6AC6KwKPjuRd01fWWDDCKVlEso50aDeT5WXOhtDbGWRucUczp1axmGL8xb3GTy1tvoPO+UhBD9SRJTskDx2NySo/JbulT+M4M+QRn0OqlNXUuQXkMzoUYYhGLsmx7ENIWso6qKZSRdJcN5yYDZtYVal4HpmD4wUlMGeOcS6mc4ZwKhgUnkhPoeWcWHG+AH5oHt0x+6tzQWHi9lt0KowxT+jSCnziUQTIuuBDg3RTvvz+Xr/nHr2WYx5iXVdM2Xd9dp9vPG9zP93n5vtqgOVszDghhKAX/BMzQ8MdgL61tS200A0rYFgKg5BHs9teSMIrrKIcavldD0BZKCQIz3Z88Nyz7b8P+AL7JgyZKrXg3AAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <div role="button" class="ZoomableImage"><img alt="Image of POM file" class="gatsby-resp-image-image" title="Image of POM file" src="/static/25591f76f4069ed102e9e3b2accd88ef/1e043/f63f24d7106b503c.png" srcSet="/static/25591f76f4069ed102e9e3b2accd88ef/4edbd/f63f24d7106b503c.png 175w,/static/25591f76f4069ed102e9e3b2accd88ef/13ae7/f63f24d7106b503c.png 350w,/static/25591f76f4069ed102e9e3b2accd88ef/1e043/f63f24d7106b503c.png 690w" sizes="(max-width: 690px) 100vw, 690px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/></div>
    </span></div><div class="div-paragraph">These entries dictate where the build plugin should check for unit tests that need to be run.</div><h2 id="populate-the-code" style="position:relative">Populate the Code<a href="#populate-the-code" aria-label="populate the code permalink" class="autolink-header after"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2><div class="div-paragraph">Now that we have the project scaffolded, let&#x27;s add our code.</div><h3 id="commondwl-functions-shared-by-both-the-rsa-and-hmac-functions" style="position:relative">Common.dwl: Functions shared by both the RSA and HMAC functions<a href="#commondwl-functions-shared-by-both-the-rsa-and-hmac-functions" aria-label="commondwl functions shared by both the rsa and hmac functions permalink" class="autolink-header after"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3><ol><li>In <code>src/main/dw</code>, create a folder called jwt.</li><li>In <code>src/main/dw/jwt</code>, create a Dataweave Component (module) called <code>Common.dwl</code></li></ol><div class="div-paragraph"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:512px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:73.14285714285714%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAACKUlEQVQoz3WTz4/SQBTHOXvx7EEvlJaWwmYJrlDaoe20M+0UKLAUCggIq+yC2R/RxBjj0UTumrgh8U/x5D9gjHowUf8VX/l1AV4+0743ed/33rSZWCoyeflMiaIkJCMTli9RFGEJUSBGS5RWabK8zo9JkpRXVEVFhaJa1EpayQCQbqpIhxAAB1jtFIoaZEI+qCIxlHfLNb8ReLVmbzCezK7OZ1fTy5uz8+ed/mj07GIW+bPJ7BJCyKmehm6lLq7E6ZSIiGfUQuIwTFzAoq7teIBFWeS4W5/ZlBHHMzGBlpEYHfMPmtO7L299v9bp9Xv9gVfx250eZeVoSK20ZXsKGHstFnhBJWXVD7FNotoOg84AJtS094CJUzLwWgwfVHep1awQt4xBBsNThqEEjLoP2y0bFl2LU3Eh07WFt0G71Qq7oV/3W+1A1YqH0JCqKIWNWJCkx3P++tZ5unAmn/F4gYaLXOvjAT7k2p+y9fnqn8fSSfne9MudN9867/9153+a7/6qL34lz74fTX9mLnb5kZn9To++LhtLMY5LNTr4+hUyvKFZGSK36zTGpPZEsZp7KdpB3vDXY8c5OQySr2/uU4d6jGLLYIwyj2oITqjsAvuKkt+cWRSyZvWIDeqNgHhVwir+aUu3HFW3NMPeBZlEQcZaLKfE43wxizCljm5ipBvUZdDi4aP8Sb6wDyV3sumcTEoi3CA+Eee4RCLBJxIcx/E8Lxw2SF/dqv/STuyP+Fz6kwAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <div role="button" class="ZoomableImage"><img alt="Image of module creation" class="gatsby-resp-image-image" title="Image of module creation" src="/static/42f5ea782c38e41560124235d401bf15/01e7c/bdbc8cd9669c3e30.png" srcSet="/static/42f5ea782c38e41560124235d401bf15/4edbd/bdbc8cd9669c3e30.png 175w,/static/42f5ea782c38e41560124235d401bf15/13ae7/bdbc8cd9669c3e30.png 350w,/static/42f5ea782c38e41560124235d401bf15/01e7c/bdbc8cd9669c3e30.png 512w" sizes="(max-width: 512px) 100vw, 512px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/></div>
    </span></div><ol start="3"><li>Paste the following code:</li></ol><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">dataweave</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="dataweave" data-index="1"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3 mtki">%dw</span><span class="mtk1"> </span><span class="mtk3 mtki">2.0</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">import</span><span class="mtk1"> toBase64 </span><span class="mtk12">from</span><span class="mtk1"> </span><span class="mtk7">dw::core::Binaries</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">fun</span><span class="mtk1"> </span><span class="mtk9">binaryJson</span><span class="mtk1">(</span><span class="mtk10">obj</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">Object</span><span class="mtk1">) </span><span class="mtk12">=</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk8">write</span><span class="mtk5">(</span><span class="mtk8">obj</span><span class="mtk5">,</span><span class="mtk1"> </span><span class="mtk5">&#x27;</span><span class="mtk6">application/json</span><span class="mtk5">&#x27;,</span><span class="mtk1"> </span><span class="mtk5">{</span><span class="mtk1"> indent</span><span class="mtk5">:</span><span class="mtk1"> </span><span class="mtk4">false</span><span class="mtk1"> </span><span class="mtk5">})</span><span class="mtk1"> </span><span class="mtk5 mtki">as</span><span class="mtk1"> </span><span class="mtk7">Binary</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">fun</span><span class="mtk1"> </span><span class="mtk9">base64URL</span><span class="mtk1">(</span><span class="mtk10">str</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">Binary</span><span class="mtk1">) </span><span class="mtk12">=</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk8">toBase64</span><span class="mtk5">(</span><span class="mtk8">str</span><span class="mtk5">)</span><span class="mtk9"> replace </span><span class="mtk5">&quot;</span><span class="mtk6">+</span><span class="mtk5">&quot;</span><span class="mtk9"> with </span><span class="mtk5">&quot;</span><span class="mtk6">-</span><span class="mtk5">&quot;</span><span class="mtk9"> replace </span><span class="mtk5">&quot;</span><span class="mtk6">/</span><span class="mtk5">&quot;</span><span class="mtk9"> with </span><span class="mtk5">&quot;</span><span class="mtk6">_</span><span class="mtk5">&quot;</span><span class="mtk9"> replace </span><span class="mtk5">&quot;</span><span class="mtk6">=</span><span class="mtk5">&quot;</span><span class="mtk9"> with </span><span class="mtk5">&quot;&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">fun</span><span class="mtk1"> </span><span class="mtk9">base64Obj</span><span class="mtk1">(</span><span class="mtk10">obj</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">Object</span><span class="mtk1">) </span><span class="mtk12">=</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk8">base64URL</span><span class="mtk5">(</span><span class="mtk8">binaryJson</span><span class="mtk5">(</span><span class="mtk8">obj</span><span class="mtk5">))</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk3 mtki">/** basic JWT with header and payload, no signing */</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">fun</span><span class="mtk1"> </span><span class="mtk9">JWT</span><span class="mtk1">(</span><span class="mtk10">header</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">Object</span><span class="mtk1">, </span><span class="mtk10">payload</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">Object</span><span class="mtk1">) </span><span class="mtk12">=</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;</span><span class="mtk4">$(</span><span class="mtk8">base64Obj</span><span class="mtk5">(</span><span class="mtk8">header</span><span class="mtk5">)</span><span class="mtk4">)</span><span class="mtk6">.</span><span class="mtk4">$(</span><span class="mtk8">base64Obj</span><span class="mtk5">(</span><span class="mtk8">payload</span><span class="mtk5">)</span><span class="mtk4">)</span><span class="mtk5">&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk3 mtki">/** basic JWT with no user specified header */</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">fun</span><span class="mtk1"> </span><span class="mtk9">JWT</span><span class="mtk1">(</span><span class="mtk10">payload</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">Object</span><span class="mtk1">) </span><span class="mtk12">=</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk8">JWT</span><span class="mtk5">({</span><span class="mtk1">typ</span><span class="mtk5">:&#x27;</span><span class="mtk6">JWT</span><span class="mtk5">&#x27;},</span><span class="mtk1"> </span><span class="mtk8">payload</span><span class="mtk5">)</span></span></span></code></pre></div><h3 id="hmacdwl-functions-used-for-creating-hmac-sha-signed-json-web-tokens" style="position:relative">HMAC.dwl: Functions used for creating HMAC-SHA signed JSON Web Tokens<a href="#hmacdwl-functions-used-for-creating-hmac-sha-signed-json-web-tokens" aria-label="hmacdwl functions used for creating hmac sha signed json web tokens permalink" class="autolink-header after"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3><ol><li>In <code>src/main/dw/jwt</code>, create a Dataweave Component (module) called <code>HMAC.dwl</code></li></ol><div class="div-paragraph"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:512px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:73.14285714285714%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAACKUlEQVQoz3WTz4/SQBTHOXvx7EEvlJaWwmYJrlDaoe20M+0UKLAUCggIq+yC2R/RxBjj0UTumrgh8U/x5D9gjHowUf8VX/l1AV4+0743ed/33rSZWCoyeflMiaIkJCMTli9RFGEJUSBGS5RWabK8zo9JkpRXVEVFhaJa1EpayQCQbqpIhxAAB1jtFIoaZEI+qCIxlHfLNb8ReLVmbzCezK7OZ1fTy5uz8+ed/mj07GIW+bPJ7BJCyKmehm6lLq7E6ZSIiGfUQuIwTFzAoq7teIBFWeS4W5/ZlBHHMzGBlpEYHfMPmtO7L299v9bp9Xv9gVfx250eZeVoSK20ZXsKGHstFnhBJWXVD7FNotoOg84AJtS094CJUzLwWgwfVHep1awQt4xBBsNThqEEjLoP2y0bFl2LU3Eh07WFt0G71Qq7oV/3W+1A1YqH0JCqKIWNWJCkx3P++tZ5unAmn/F4gYaLXOvjAT7k2p+y9fnqn8fSSfne9MudN9867/9153+a7/6qL34lz74fTX9mLnb5kZn9To++LhtLMY5LNTr4+hUyvKFZGSK36zTGpPZEsZp7KdpB3vDXY8c5OQySr2/uU4d6jGLLYIwyj2oITqjsAvuKkt+cWRSyZvWIDeqNgHhVwir+aUu3HFW3NMPeBZlEQcZaLKfE43wxizCljm5ipBvUZdDi4aP8Sb6wDyV3sumcTEoi3CA+Eee4RCLBJxIcx/E8Lxw2SF/dqv/STuyP+Fz6kwAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <div role="button" class="ZoomableImage"><img alt="Image of module creation" class="gatsby-resp-image-image" title="Image of module creation" src="/static/42f5ea782c38e41560124235d401bf15/01e7c/bdbc8cd9669c3e30.png" srcSet="/static/42f5ea782c38e41560124235d401bf15/4edbd/bdbc8cd9669c3e30.png 175w,/static/42f5ea782c38e41560124235d401bf15/13ae7/bdbc8cd9669c3e30.png 350w,/static/42f5ea782c38e41560124235d401bf15/01e7c/bdbc8cd9669c3e30.png 512w" sizes="(max-width: 512px) 100vw, 512px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/></div>
    </span></div><ol start="2"><li>Paste the following code:</li></ol><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">dataweave</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="dataweave" data-index="2"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3 mtki">%dw</span><span class="mtk1"> </span><span class="mtk3 mtki">2.0</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">import</span><span class="mtk1"> HMACBinary </span><span class="mtk12">from</span><span class="mtk1"> </span><span class="mtk7">dw::Crypto</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">import</span><span class="mtk1"> fail </span><span class="mtk12">from</span><span class="mtk1"> </span><span class="mtk7">dw::Runtime</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">import</span><span class="mtk1"> </span><span class="mtk7">jwt::Common</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">var</span><span class="mtk1"> </span><span class="mtk7">algMapping</span><span class="mtk1"> </span><span class="mtk12">=</span><span class="mtk1"> </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;</span><span class="mtk6">HmacSHA256</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">HS256</span><span class="mtk5">&quot;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;</span><span class="mtk6">HmacSHA384</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">HS384</span><span class="mtk5">&quot;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;</span><span class="mtk6">HmacSHA512</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">HS512</span><span class="mtk5">&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">fun</span><span class="mtk1"> </span><span class="mtk9">alg</span><span class="mtk1">(</span><span class="mtk10">algorithm</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">String</span><span class="mtk1">) </span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">String</span><span class="mtk1"> </span><span class="mtk12">|</span><span class="mtk1"> </span><span class="mtk7">Null</span><span class="mtk1"> </span><span class="mtk12">=</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk8">algMapping</span><span class="mtk1">[</span><span class="mtk8">algorithm</span><span class="mtk1">] </span><span class="mtk5 mtki">default</span><span class="mtk1"> </span><span class="mtk8">fail</span><span class="mtk5">(&#x27;</span><span class="mtk6">Invalid algorithm provided for signing</span><span class="mtk5">&#x27;)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">fun</span><span class="mtk1"> </span><span class="mtk9">signJWT</span><span class="mtk1">(</span><span class="mtk10">content</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">String</span><span class="mtk1">, </span><span class="mtk10">key</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">String</span><span class="mtk1">, </span><span class="mtk10">alg</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">String</span><span class="mtk1">) </span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">String</span><span class="mtk1"> </span><span class="mtk12">=</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    Common</span><span class="mtk12">::</span><span class="mtk8">base64URL</span><span class="mtk5">(</span><span class="mtk8">HMACBinary</span><span class="mtk5">(</span><span class="mtk8">key</span><span class="mtk1"> </span><span class="mtk5 mtki">as</span><span class="mtk1"> </span><span class="mtk7">Binary</span><span class="mtk5">,</span><span class="mtk1"> </span><span class="mtk8">content</span><span class="mtk1"> </span><span class="mtk5 mtki">as</span><span class="mtk1"> </span><span class="mtk7">Binary</span><span class="mtk5">,</span><span class="mtk1"> </span><span class="mtk8">alg</span><span class="mtk5">))</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk3 mtki">/** JWT with header, payload, and signature by specific algorithm. valid algorithms dictated by HMACWith */</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">fun</span><span class="mtk1"> </span><span class="mtk9">JWT</span><span class="mtk1">(</span><span class="mtk10">header</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">Object</span><span class="mtk1">, </span><span class="mtk10">payload</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">Object</span><span class="mtk1">, </span><span class="mtk10">signingKey</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">String</span><span class="mtk1">, </span><span class="mtk10">algorithm</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">String</span><span class="mtk1">) </span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">String</span><span class="mtk1"> </span><span class="mtk12">=</span><span class="mtk1"> </span><span class="mtk5 mtki">do</span><span class="mtk1"> </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk12">var</span><span class="mtk1"> </span><span class="mtk7">jwt</span><span class="mtk1"> </span><span class="mtk12">=</span><span class="mtk1"> Common</span><span class="mtk12">::</span><span class="mtk8">JWT</span><span class="mtk5">({</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk5">(</span><span class="mtk8">header</span><span class="mtk1"> </span><span class="mtk12">-</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">alg</span><span class="mtk5">&quot;</span><span class="mtk1"> </span><span class="mtk12">-</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">typ</span><span class="mtk5">&quot;),</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        alg</span><span class="mtk5">:</span><span class="mtk1"> </span><span class="mtk8">alg</span><span class="mtk5">(</span><span class="mtk8">algorithm</span><span class="mtk5">),</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        typ</span><span class="mtk5">:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">JWT</span><span class="mtk5">&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">},</span><span class="mtk1"> </span><span class="mtk8">payload</span><span class="mtk5">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk12">---</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;</span><span class="mtk4">$(</span><span class="mtk8">jwt</span><span class="mtk4">)</span><span class="mtk6">.</span><span class="mtk4">$(</span><span class="mtk8">signJWT</span><span class="mtk5">(</span><span class="mtk8">jwt</span><span class="mtk5">,</span><span class="mtk1"> </span><span class="mtk8">signingKey</span><span class="mtk5">,</span><span class="mtk1"> </span><span class="mtk8">algorithm</span><span class="mtk5">)</span><span class="mtk4">)</span><span class="mtk5">&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk3 mtki">/** JWT with header, payload, and signed with HMAC-SHA256*/</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">fun</span><span class="mtk1"> </span><span class="mtk9">JWT</span><span class="mtk1">(</span><span class="mtk10">header</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">Object</span><span class="mtk1">, </span><span class="mtk10">payload</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">Object</span><span class="mtk1">, </span><span class="mtk10">signingKey</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">String</span><span class="mtk1">) </span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">String</span><span class="mtk1"> </span><span class="mtk12">=</span><span class="mtk1"> </span><span class="mtk5 mtki">do</span><span class="mtk1"> </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk8">JWT</span><span class="mtk5">(</span><span class="mtk8">header</span><span class="mtk5">,</span><span class="mtk1"> </span><span class="mtk8">payload</span><span class="mtk5">,</span><span class="mtk1"> </span><span class="mtk8">signingKey</span><span class="mtk5">,</span><span class="mtk1"> </span><span class="mtk5">&#x27;</span><span class="mtk6">HmacSHA256</span><span class="mtk5">&#x27;)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk3 mtki">/** JWT with payload and automatically generated header, signed with HMAC-SHA256 */</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">fun</span><span class="mtk1"> </span><span class="mtk9">JWT</span><span class="mtk1">(</span><span class="mtk10">payload</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">Object</span><span class="mtk1">, </span><span class="mtk10">signingKey</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">String</span><span class="mtk1">) </span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">String</span><span class="mtk1"> </span><span class="mtk12">=</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk8">JWT</span><span class="mtk5">(</span><span class="mtk1"> </span><span class="mtk5">{},</span><span class="mtk8">payload</span><span class="mtk5">,</span><span class="mtk1"> </span><span class="mtk8">signingKey</span><span class="mtk5">,</span><span class="mtk1"> </span><span class="mtk5">&#x27;</span><span class="mtk6">HmacSHA256</span><span class="mtk5">&#x27;)</span></span></span></code></pre></div><h3 id="rsahelperjava-provides-functionality-not-available-in-dataweave-via-java-necessary-for-rsa-signing" style="position:relative">RSAHelper.java: Provides functionality not available in DataWeave via Java necessary for RSA signing<a href="#rsahelperjava-provides-functionality-not-available-in-dataweave-via-java-necessary-for-rsa-signing" aria-label="rsahelperjava provides functionality not available in dataweave via java necessary for rsa signing permalink" class="autolink-header after"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3><div class="div-paragraph">When creating DataWeave modules, we can even include and leverage custom Java code, or java dependencies! DataWeave does not currently have built in support for RSA signing, so we will create a simple helper java file to handle this for us.</div><ol><li>In <code>src/main/java</code>, create Java class <code>RSAHelper.java</code></li><li>Paste the following code:</li></ol><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">java</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="java" data-index="3"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">import</span><span class="mtk1"> </span><span class="mtk12">java</span><span class="mtk5">.</span><span class="mtk12">io</span><span class="mtk5">.</span><span class="mtk12">UnsupportedEncodingException</span><span class="mtk5">;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">import</span><span class="mtk1"> </span><span class="mtk12">java</span><span class="mtk5">.</span><span class="mtk12">security</span><span class="mtk5">.</span><span class="mtk10 mtki">*</span><span class="mtk5">;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">import</span><span class="mtk1"> </span><span class="mtk12">java</span><span class="mtk5">.</span><span class="mtk12">security</span><span class="mtk5">.</span><span class="mtk12">spec</span><span class="mtk5">.</span><span class="mtk12">InvalidKeySpecException</span><span class="mtk5">;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">import</span><span class="mtk1"> </span><span class="mtk12">java</span><span class="mtk5">.</span><span class="mtk12">security</span><span class="mtk5">.</span><span class="mtk12">spec</span><span class="mtk5">.</span><span class="mtk12">PKCS8EncodedKeySpec</span><span class="mtk5">;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">import</span><span class="mtk1"> </span><span class="mtk12">java</span><span class="mtk5">.</span><span class="mtk12">util</span><span class="mtk5">.</span><span class="mtk12">Base64</span><span class="mtk5">;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">public</span><span class="mtk1"> </span><span class="mtk12">class</span><span class="mtk1"> </span><span class="mtk7">RSAHelper</span><span class="mtk1"> </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk12">public</span><span class="mtk1"> </span><span class="mtk12">static</span><span class="mtk1"> </span><span class="mtk12">String</span><span class="mtk1"> </span><span class="mtk9">signString</span><span class="mtk5">(</span><span class="mtk12">String</span><span class="mtk1"> </span><span class="mtk10">content</span><span class="mtk5">,</span><span class="mtk1"> </span><span class="mtk12">String</span><span class="mtk1"> </span><span class="mtk10">privateKeyContent</span><span class="mtk5">,</span><span class="mtk1"> </span><span class="mtk12">String</span><span class="mtk1"> </span><span class="mtk10">algorithm</span><span class="mtk5">)</span><span class="mtk1"> </span><span class="mtk12">throws</span><span class="mtk1"> </span><span class="mtk12">NoSuchAlgorithmException</span><span class="mtk5">,</span><span class="mtk1"> </span><span class="mtk12">InvalidKeySpecException</span><span class="mtk5">,</span><span class="mtk1"> </span><span class="mtk12">InvalidKeyException</span><span class="mtk5">,</span><span class="mtk1"> </span><span class="mtk12">UnsupportedEncodingException</span><span class="mtk5">,</span><span class="mtk1"> </span><span class="mtk12">SignatureException</span><span class="mtk1"> </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk12">KeyFactory</span><span class="mtk1"> </span><span class="mtk8">kf</span><span class="mtk1"> </span><span class="mtk12">=</span><span class="mtk1"> </span><span class="mtk8">KeyFactory</span><span class="mtk5">.</span><span class="mtk9">getInstance</span><span class="mtk5">(&quot;</span><span class="mtk6">RSA</span><span class="mtk5">&quot;);</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk12">PKCS8EncodedKeySpec</span><span class="mtk1"> </span><span class="mtk8">keySpecPKCS8</span><span class="mtk1"> </span><span class="mtk12">=</span><span class="mtk1"> </span><span class="mtk5 mtki">new</span><span class="mtk1"> </span><span class="mtk9">PKCS8EncodedKeySpec</span><span class="mtk5">(</span><span class="mtk8">Base64</span><span class="mtk5">.</span><span class="mtk9">getDecoder</span><span class="mtk5">().</span><span class="mtk9">decode</span><span class="mtk5">(</span><span class="mtk1">privateKeyContent</span><span class="mtk5">));</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk12">PrivateKey</span><span class="mtk1"> </span><span class="mtk8">pk</span><span class="mtk1"> </span><span class="mtk12">=</span><span class="mtk1"> </span><span class="mtk8">kf</span><span class="mtk5">.</span><span class="mtk9">generatePrivate</span><span class="mtk5">(</span><span class="mtk1">keySpecPKCS8</span><span class="mtk5">);</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk12">Signature</span><span class="mtk1"> </span><span class="mtk8">privateSignature</span><span class="mtk1"> </span><span class="mtk12">=</span><span class="mtk1"> </span><span class="mtk8">Signature</span><span class="mtk5">.</span><span class="mtk9">getInstance</span><span class="mtk5">(</span><span class="mtk1">algorithm</span><span class="mtk5">);</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk8">privateSignature</span><span class="mtk5">.</span><span class="mtk9">initSign</span><span class="mtk5">(</span><span class="mtk1">pk</span><span class="mtk5">);</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk8">privateSignature</span><span class="mtk5">.</span><span class="mtk9">update</span><span class="mtk5">(</span><span class="mtk8">content</span><span class="mtk5">.</span><span class="mtk9">getBytes</span><span class="mtk5">(&quot;</span><span class="mtk6">UTF-8</span><span class="mtk5">&quot;));</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk12">byte</span><span class="mtk5">[]</span><span class="mtk1"> </span><span class="mtk8">s</span><span class="mtk1"> </span><span class="mtk12">=</span><span class="mtk1"> </span><span class="mtk8">privateSignature</span><span class="mtk5">.</span><span class="mtk9">sign</span><span class="mtk5">();</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk5 mtki">return</span><span class="mtk1"> </span><span class="mtk8">Base64</span><span class="mtk5">.</span><span class="mtk9">getUrlEncoder</span><span class="mtk5">().</span><span class="mtk9">encodeToString</span><span class="mtk5">(</span><span class="mtk1">s</span><span class="mtk5">).</span><span class="mtk9">replace</span><span class="mtk5">(&quot;</span><span class="mtk6">=</span><span class="mtk5">&quot;,</span><span class="mtk1"> </span><span class="mtk5">&quot;&quot;);</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">}</span></span></span></code></pre></div><h3 id="rsadwl-functions-used-for-creating-rsa-signed-json-web-tokens" style="position:relative">RSA.dwl: Functions used for creating RSA signed JSON Web Tokens<a href="#rsadwl-functions-used-for-creating-rsa-signed-json-web-tokens" aria-label="rsadwl functions used for creating rsa signed json web tokens permalink" class="autolink-header after"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3><ol><li>In <code>src/main/dw/jwt</code>, create a Dataweave Component (module) <code>RSA.dwl</code></li></ol><div class="div-paragraph"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:512px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:73.14285714285714%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAACKUlEQVQoz3WTz4/SQBTHOXvx7EEvlJaWwmYJrlDaoe20M+0UKLAUCggIq+yC2R/RxBjj0UTumrgh8U/x5D9gjHowUf8VX/l1AV4+0743ed/33rSZWCoyeflMiaIkJCMTli9RFGEJUSBGS5RWabK8zo9JkpRXVEVFhaJa1EpayQCQbqpIhxAAB1jtFIoaZEI+qCIxlHfLNb8ReLVmbzCezK7OZ1fTy5uz8+ed/mj07GIW+bPJ7BJCyKmehm6lLq7E6ZSIiGfUQuIwTFzAoq7teIBFWeS4W5/ZlBHHMzGBlpEYHfMPmtO7L299v9bp9Xv9gVfx250eZeVoSK20ZXsKGHstFnhBJWXVD7FNotoOg84AJtS094CJUzLwWgwfVHep1awQt4xBBsNThqEEjLoP2y0bFl2LU3Eh07WFt0G71Qq7oV/3W+1A1YqH0JCqKIWNWJCkx3P++tZ5unAmn/F4gYaLXOvjAT7k2p+y9fnqn8fSSfne9MudN9867/9153+a7/6qL34lz74fTX9mLnb5kZn9To++LhtLMY5LNTr4+hUyvKFZGSK36zTGpPZEsZp7KdpB3vDXY8c5OQySr2/uU4d6jGLLYIwyj2oITqjsAvuKkt+cWRSyZvWIDeqNgHhVwir+aUu3HFW3NMPeBZlEQcZaLKfE43wxizCljm5ipBvUZdDi4aP8Sb6wDyV3sumcTEoi3CA+Eee4RCLBJxIcx/E8Lxw2SF/dqv/STuyP+Fz6kwAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <div role="button" class="ZoomableImage"><img alt="Image of module creation" class="gatsby-resp-image-image" title="Image of module creation" src="/static/42f5ea782c38e41560124235d401bf15/01e7c/bdbc8cd9669c3e30.png" srcSet="/static/42f5ea782c38e41560124235d401bf15/4edbd/bdbc8cd9669c3e30.png 175w,/static/42f5ea782c38e41560124235d401bf15/13ae7/bdbc8cd9669c3e30.png 350w,/static/42f5ea782c38e41560124235d401bf15/01e7c/bdbc8cd9669c3e30.png 512w" sizes="(max-width: 512px) 100vw, 512px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/></div>
    </span></div><ol start="2"><li>Paste the following code:</li></ol><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">dataweave</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="dataweave" data-index="4"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3 mtki">%dw</span><span class="mtk1"> </span><span class="mtk3 mtki">2.0</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">import</span><span class="mtk1"> java!</span><span class="mtk7">RSAHelper</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">import</span><span class="mtk1"> </span><span class="mtk7">jwt::Common</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">import</span><span class="mtk1"> fail </span><span class="mtk12">from</span><span class="mtk1"> </span><span class="mtk7">dw::Runtime</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">var</span><span class="mtk1"> </span><span class="mtk7">algMapping</span><span class="mtk1"> </span><span class="mtk12">=</span><span class="mtk1"> </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;</span><span class="mtk6">Sha256withRSA</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">RS256</span><span class="mtk5">&quot;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;</span><span class="mtk6">Sha384withRSA</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">RS384</span><span class="mtk5">&quot;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;</span><span class="mtk6">Sha512withRSA</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">RS512</span><span class="mtk5">&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">fun</span><span class="mtk1"> </span><span class="mtk9">alg</span><span class="mtk1">(</span><span class="mtk10">algorithm</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">String</span><span class="mtk1">) </span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">String</span><span class="mtk1"> </span><span class="mtk12">|</span><span class="mtk1"> </span><span class="mtk7">Null</span><span class="mtk1"> </span><span class="mtk12">=</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk8">algMapping</span><span class="mtk1">[</span><span class="mtk8">algorithm</span><span class="mtk1">] </span><span class="mtk5 mtki">default</span><span class="mtk1"> </span><span class="mtk8">fail</span><span class="mtk5">(&#x27;</span><span class="mtk6">Invalid algorithm provided for signing</span><span class="mtk5">&#x27;)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">fun</span><span class="mtk1"> </span><span class="mtk9">cleanKey</span><span class="mtk1">(</span><span class="mtk10">key</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">String</span><span class="mtk1">) </span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">String</span><span class="mtk1"> </span><span class="mtk12">=</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk8">key</span><span class="mtk9"> replace </span><span class="mtk5">&quot;\n&quot;</span><span class="mtk9"> with </span><span class="mtk5">&quot;&quot;</span><span class="mtk9"> replace </span><span class="mtk12">/</span><span class="mtk5">(</span><span class="mtk12">-+</span><span class="mtk5">)(</span><span class="mtk8">BEGIN</span><span class="mtk4">|</span><span class="mtk10">EN</span><span class="mtk5">D</span><span class="mtk10">)(\sR</span><span class="mtk5">S</span><span class="mtk10">A)? (</span><span class="mtk5">P</span><span class="mtk10">RIVA</span><span class="mtk5">T</span><span class="mtk10">E</span><span class="mtk4">|</span><span class="mtk8">PUBLIC</span><span class="mtk5">)</span><span class="mtk1"> </span><span class="mtk8">KEY</span><span class="mtk5">(</span><span class="mtk12">-+</span><span class="mtk5">)</span><span class="mtk12">/</span><span class="mtk9"> with </span><span class="mtk5">&quot;&quot;</span><span class="mtk9"> replace </span><span class="mtk5">&quot;</span><span class="mtk6"> </span><span class="mtk5">&quot;</span><span class="mtk9"> with </span><span class="mtk5">&quot;&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">fun</span><span class="mtk1"> </span><span class="mtk9">signJWT</span><span class="mtk1">(</span><span class="mtk10">jwt</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">String</span><span class="mtk1">, </span><span class="mtk10">privateKey</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">String</span><span class="mtk1">, </span><span class="mtk10">algorithm</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">String</span><span class="mtk1">) </span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">String</span><span class="mtk1"> </span><span class="mtk12">=</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    RSAHelper</span><span class="mtk12">::</span><span class="mtk8">signString</span><span class="mtk5">(</span><span class="mtk8">jwt</span><span class="mtk5">,</span><span class="mtk1"> </span><span class="mtk8">cleanKey</span><span class="mtk5">(</span><span class="mtk8">privateKey</span><span class="mtk5">),</span><span class="mtk1"> </span><span class="mtk8">algorithm</span><span class="mtk5">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk3 mtki">/** JWT with header, payload, and signature by specific algorithm. valid algorithms dictated by HMACWith */</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">fun</span><span class="mtk1"> </span><span class="mtk9">JWT</span><span class="mtk1">(</span><span class="mtk10">header</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">Object</span><span class="mtk1">, </span><span class="mtk10">payload</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">Object</span><span class="mtk1">, </span><span class="mtk10">pkcs8privateKey</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">String</span><span class="mtk1">, </span><span class="mtk10">algorithm</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">String</span><span class="mtk1">) </span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">String</span><span class="mtk1"> </span><span class="mtk12">=</span><span class="mtk1"> </span><span class="mtk5 mtki">do</span><span class="mtk1"> </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk12">var</span><span class="mtk1"> </span><span class="mtk7">jwt</span><span class="mtk1"> </span><span class="mtk12">=</span><span class="mtk1"> Common</span><span class="mtk12">::</span><span class="mtk8">JWT</span><span class="mtk5">(</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">{</span><span class="mtk1"> </span><span class="mtk5">(</span><span class="mtk8">header</span><span class="mtk1"> </span><span class="mtk12">-</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">alg</span><span class="mtk5">&quot;</span><span class="mtk1"> </span><span class="mtk12">-</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">typ</span><span class="mtk5">&quot;),</span><span class="mtk1"> alg</span><span class="mtk5">:</span><span class="mtk1"> </span><span class="mtk8">alg</span><span class="mtk5">(</span><span class="mtk8">algorithm</span><span class="mtk5">),</span><span class="mtk1"> typ</span><span class="mtk5">:</span><span class="mtk1"> </span><span class="mtk5">&#x27;</span><span class="mtk6">JWT</span><span class="mtk5">&#x27;</span><span class="mtk1"> </span><span class="mtk5">},</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk8">payload</span><span class="mtk5">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk12">---</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;</span><span class="mtk4">$(</span><span class="mtk8">jwt</span><span class="mtk4">)</span><span class="mtk6">.</span><span class="mtk4">$(</span><span class="mtk8">signJWT</span><span class="mtk5">(</span><span class="mtk8">jwt</span><span class="mtk5">,</span><span class="mtk1"> </span><span class="mtk8">pkcs8privateKey</span><span class="mtk5">,</span><span class="mtk1"> </span><span class="mtk8">algorithm</span><span class="mtk5">)</span><span class="mtk4">)</span><span class="mtk5">&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk3 mtki">/** JWT with payload and automatically generated header, signed with HMAC-SHA256 */</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">fun</span><span class="mtk1"> </span><span class="mtk9">JWT</span><span class="mtk1">(</span><span class="mtk10">payload</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">Object</span><span class="mtk1">, </span><span class="mtk10">pkcs8privateKey</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">String</span><span class="mtk1">) </span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk7">String</span><span class="mtk1"> </span><span class="mtk12">=</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk8">JWT</span><span class="mtk5">({},</span><span class="mtk1"> </span><span class="mtk8">payload</span><span class="mtk5">,</span><span class="mtk1"> </span><span class="mtk8">pkcs8privateKey</span><span class="mtk5">,</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">Sha256withRSA</span><span class="mtk5">&quot;)</span></span></span></code></pre></div><blockquote><div class="div-paragraph">Seeing an error about the <code>import java!RSAHelper</code>? This is normal; unfortunately the DataWeave plugin isn&#x27;t aware of changes made to Java code. While you can test and develop Java code like normal, you will need to reload the project after making changes before the DataWeave &quot;linter&quot; becomes aware. You may also have to build and install (mvn install) the project first.</div></blockquote><h3 id="setup-a-simple-mapping-test" style="position:relative">Setup a simple mapping test:<a href="#setup-a-simple-mapping-test" aria-label="setup a simple mapping test permalink" class="autolink-header after"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3><div class="div-paragraph">Next, in order to have an entry point for testing our code, lets setup a simple mapping.</div><ol><li>In <code>src/test/dwtest</code>, create a DataWeave Component (mapping) called <code>HMAC_Testing.dwl</code></li></ol><div class="div-paragraph"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:512px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:73.14285714285714%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAACKUlEQVQoz3WTz4/SQBTHOXvx7EEvlJaWwmYJrlDaoe20M+0UKLAUCggIq+yC2R/RxBjj0UTumrgh8U/x5D9gjHowUf8VX/l1AV4+0743ed/33rSZWCoyeflMiaIkJCMTli9RFGEJUSBGS5RWabK8zo9JkpRXVEVFhaJa1EpayQCQbqpIhxAAB1jtFIoaZEI+qCIxlHfLNb8ReLVmbzCezK7OZ1fTy5uz8+ed/mj07GIW+bPJ7BJCyKmehm6lLq7E6ZSIiGfUQuIwTFzAoq7teIBFWeS4W5/ZlBHHMzGBlpEYHfMPmtO7L299v9bp9Xv9gVfx250eZeVoSK20ZXsKGHstFnhBJWXVD7FNotoOg84AJtS094CJUzLwWgwfVHep1awQt4xBBsNThqEEjLoP2y0bFl2LU3Eh07WFt0G71Qq7oV/3W+1A1YqH0JCqKIWNWJCkx3P++tZ5unAmn/F4gYaLXOvjAT7k2p+y9fnqn8fSSfne9MudN9867/9153+a7/6qL34lz74fTX9mLnb5kZn9To++LhtLMY5LNTr4+hUyvKFZGSK36zTGpPZEsZp7KdpB3vDXY8c5OQySr2/uU4d6jGLLYIwyj2oITqjsAvuKkt+cWRSyZvWIDeqNgHhVwir+aUu3HFW3NMPeBZlEQcZaLKfE43wxizCljm5ipBvUZdDi4aP8Sb6wDyV3sumcTEoi3CA+Eee4RCLBJxIcx/E8Lxw2SF/dqv/STuyP+Fz6kwAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <div role="button" class="ZoomableImage"><img alt="Image of module creation" class="gatsby-resp-image-image" title="Image of module creation" src="/static/42f5ea782c38e41560124235d401bf15/01e7c/bdbc8cd9669c3e30.png" srcSet="/static/42f5ea782c38e41560124235d401bf15/4edbd/bdbc8cd9669c3e30.png 175w,/static/42f5ea782c38e41560124235d401bf15/13ae7/bdbc8cd9669c3e30.png 350w,/static/42f5ea782c38e41560124235d401bf15/01e7c/bdbc8cd9669c3e30.png 512w" sizes="(max-width: 512px) 100vw, 512px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/></div>
    </span></div><ol start="2"><li>At the bottom of IntelliJ, click Weave Preview to open the mapping preview. This shows us a live preview of the results of our dataweave!</li></ol><div class="div-paragraph"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:700px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:22.285714285714285%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAVklEQVQI17WLOQ6AMAwE855QJY4RinN4HRT+/yMKJAqE6BiNptp1mEdVq4qGUWENJl0LxlYqr5yYiTkSvep0n7mpdOSOu6IWInnvl0+cXOunFij9ez4Bd2YxSTTIPkYAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <div role="button" class="ZoomableImage"><img alt="Weave output preview" class="gatsby-resp-image-image" title="Weave output preview" src="/static/23dfffe6095d9f2027d759d13c2af3e4/8c557/c040e5837925adbe.png" srcSet="/static/23dfffe6095d9f2027d759d13c2af3e4/4edbd/c040e5837925adbe.png 175w,/static/23dfffe6095d9f2027d759d13c2af3e4/13ae7/c040e5837925adbe.png 350w,/static/23dfffe6095d9f2027d759d13c2af3e4/8c557/c040e5837925adbe.png 700w,/static/23dfffe6095d9f2027d759d13c2af3e4/e996b/c040e5837925adbe.png 1050w,/static/23dfffe6095d9f2027d759d13c2af3e4/2cefc/c040e5837925adbe.png 1400w,/static/23dfffe6095d9f2027d759d13c2af3e4/29007/c040e5837925adbe.png 1600w" sizes="(max-width: 700px) 100vw, 700px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/></div>
    </span></div><ol start="3"><li>In order to simulate some incoming data, we&#x27;ll add an input. This allows us to set a payload object with some JSON. Click the + button in the Inputs panel</li></ol><div class="div-paragraph"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:684px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:77.14285714285715%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAADVklEQVQ4y42TS2sbVxTH7zw0Gj0cy5RSx6ktWTiS7TZxJVnyaEbz0mg0jqzXWK3lR5JGbhJIQgg0GxdBKU3ooglkFUg+QqGL7ksXXiSLfIFAuumyRRAQpNnY8um5o1iGQGkv/DgzZ+75zznnnksIrrOrVRJOLhLx519J6vot8vWtu+R+7UdyZfcmcTd3yPrmRbKze400N7ZJ+1KHfPPdPbL37ffk5p275NHjp2QuMU820T9aoY9nGDQMicbHI5+lE+fmP01kJrPJeDyRPDMT84jG55JT09HkdCyePJ/KJJfSy4l0diUxv7D4AY396PQU44llUxnWisd5fOQ7tv3kdrX+1nLdP6XrVq/Zbvcud672tr/s9NbbW73ty53eF1sXe4bt9HSr/JdRct6oRfsXmpPg93Ozc2cJWVhY5CfHxgR0fuio2n7DtEAp2SC5BliVKjj1FrIO9loTVhufQ7nmgmzYQ0wb8qr+imGYKMYLkzTL6GycFwLBADpmU5K8X0QR07IPZNkcyE5zoK02BqpTH6gjWx8YFRdpHui1Dcip5kuM/QSrDkYmJhgyE435xEAgiM5EVso/a7gtKF9YO8xrBqiVFhhr6x5m9YShzx3otTYV/B1jUygYGo9EhoJ+UaSCyeWV/HMVS0YOqS0gplMBreSAYpbw3fZQhnagWmXIyQoVTNM+jkeOMxQDQ0Ep/7xSb0LNbR1azipoRQtaG21wsA3YK1ANE1Rdh4KmgWYYA9txIJd/T3AaBQX/MMNMTnomY6kYfCDrxpFWLI3QrdIRZnYk27UjuVSj9lCxq5hh4dWJIJYcjc0eC2IP5Re0VEU3wSiVAUcFLnW+gp0ru1BvNiG/tgWLWz+Adu0hZDsPYKndBamg/8F4PSQh71Amp6b4YChMTzm2lM78JCnqWyzj9YpS6Bd0s68aRQ9F0/vZgtlPm/X+crHezxQbr5eLtb9xuH/D2AWG5YLh8Jg33CzHcXQOT+M8GXjgN0RR3PP7/V2fz3eCIHRFwdcN+EhX5Ek3wJO9kMDe5li2jLHTqOF/d/EYqsqiWBjtDHKOXiBkBZH+Bfoth5ynlWHsKbTc6C4znibBn3AiZnOK5/kIMvEfROhejuNpu3gqwrIseX8x72D/J8f7R+sfdt4Ro30GpfYAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <div role="button" class="ZoomableImage"><img alt="Add new input" class="gatsby-resp-image-image" title="Add new input" src="/static/8d9fd836cfaa6345dd74fbb2f2a71c2d/2c288/aee3817a56e38182.png" srcSet="/static/8d9fd836cfaa6345dd74fbb2f2a71c2d/4edbd/aee3817a56e38182.png 175w,/static/8d9fd836cfaa6345dd74fbb2f2a71c2d/13ae7/aee3817a56e38182.png 350w,/static/8d9fd836cfaa6345dd74fbb2f2a71c2d/2c288/aee3817a56e38182.png 684w" sizes="(max-width: 684px) 100vw, 684px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/></div>
    </span></div><ol start="4"><li>Set a sample payload which we will include in our token:</li></ol><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">json</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="json" data-index="5"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">&quot;</span><span class="mtk12">firstName</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">Michael</span><span class="mtk5">&quot;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">&quot;</span><span class="mtk12">lastName</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">Jones</span><span class="mtk5">&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">}</span></span></span></code></pre></div><ol start="5"><li>And finally in the mapping DataWeave code, paste the following:</li></ol><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">dataweave</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="dataweave" data-index="6"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3 mtki">%dw</span><span class="mtk1"> </span><span class="mtk3 mtki">2.0</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">import</span><span class="mtk1"> </span><span class="mtk7">jwt::HMAC</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">output</span><span class="mtk1"> </span><span class="mtk6">application/json</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">---</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">HMAC</span><span class="mtk12">::</span><span class="mtk8">JWT</span><span class="mtk5">(</span><span class="mtk8">payload</span><span class="mtk5">,</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">Mulesoft123!</span><span class="mtk5">&quot;)</span></span></span></code></pre></div><div class="div-paragraph">And there we go! We should now see a signed JWT being output in the preview pane. That tokens should look like:</div><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">json</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="json" data-index="7"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">&quot;</span><span class="mtk6">eyJhbGciOiAiSFMyNTYiLCJ0eXAiOiAiSldUIn0.eyJmaXJzdE5hbWUiOiAiTWljaGFlbCIsImxhc3ROYW1lIjogIkpvbmVzIn0.izgs2w_CIE-qa0TdvzFErTOW4TPSDWrZs4b7xXdChFk</span><span class="mtk5">&quot;</span></span></span></code></pre></div><div class="div-paragraph">Assuming that you used the same input payload that I did. We can take this token and key, and use <a href="https://jwt.io" target="_blank" rel="noreferrer">https://jwt.io</a> in order to verify a valid token was created!</div><div class="div-paragraph"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:700px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:60%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAABR0lEQVQoz5WQy04CQRBF54v8AjVu3Ph5rly4wMRvMQF1r4kgAcEBmWEe3VXVryp7eAlCMN7cVDqp3LpnJpll2XA80oRemKXRci6V53m31yuLwjlnrWXeXkrikXhS8qwOaSGZkmkdzWkVSoxrIlKgjbOIFPNhV4mtvXpzuuvrF6e6bjqy45GFiRMVOLLEgVYqkN3OVTM5zkjmJF8kM8NTz6kXu+Rn9rEOkMk0Z/aU8KGTG0VsraEJ+gPxJsyLn7RtWTc35EpCKaESCXvYR5rjwhqrq9oaIyz/xlaAw6yc10ojAOAv/RHWRK859Ap8LyAtdal0teVEjmBHVGuUhhrIEDkEMTtOXGDtGT2DY/A/3xMWR9tzd9OH1gBvB3g3xPsPirO1dlI7HmAYE39SnGGD4Rev6749eVAXj/qsoy+f9NUznHf0aXvlb/Kgs7HbqkPkAAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <div role="button" class="ZoomableImage"><img alt="jwt.io screenshot" class="gatsby-resp-image-image" title="jwt.io screenshot" src="/static/e66ac5f8c8704d6875e68ba66cc2af80/8c557/4125ea300420dcbc.png" srcSet="/static/e66ac5f8c8704d6875e68ba66cc2af80/4edbd/4125ea300420dcbc.png 175w,/static/e66ac5f8c8704d6875e68ba66cc2af80/13ae7/4125ea300420dcbc.png 350w,/static/e66ac5f8c8704d6875e68ba66cc2af80/8c557/4125ea300420dcbc.png 700w,/static/e66ac5f8c8704d6875e68ba66cc2af80/e996b/4125ea300420dcbc.png 1050w,/static/e66ac5f8c8704d6875e68ba66cc2af80/2cefc/4125ea300420dcbc.png 1400w,/static/e66ac5f8c8704d6875e68ba66cc2af80/29007/4125ea300420dcbc.png 1600w" sizes="(max-width: 700px) 100vw, 700px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/></div>
    </span></div><div class="div-paragraph">Now that we have our module wrapped up, lets go ahead and add a basic Unit Test and run the test lifecycle phase to see what how it looks.</div><h2 id="setup-a-unit-test" style="position:relative">Setup a Unit Test<a href="#setup-a-unit-test" aria-label="setup a unit test permalink" class="autolink-header after"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2><ol><li>In <code>src/test/dwmit</code>, create a new folder called <code>HMAC_Payload_Only</code>. This folder will contain a unit test against which we are testing calling <code>HMAC::JWT</code> with only a payload and key.</li><li>In <code>src/test/dwmit/HMAC_Payload_Only</code>, create <code>transform.dwl</code> and paste the following code:</li></ol><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">dataweave</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="dataweave" data-index="8"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3 mtki">%dw</span><span class="mtk1"> </span><span class="mtk3 mtki">2.0</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">import</span><span class="mtk1"> </span><span class="mtk7">jwt::HMAC</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">output</span><span class="mtk1"> </span><span class="mtk6">application/json</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">---</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">HMAC</span><span class="mtk12">::</span><span class="mtk8">JWT</span><span class="mtk5">({</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">            </span><span class="mtk5">&quot;</span><span class="mtk6">firstName</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">Michael</span><span class="mtk5">&quot;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">            </span><span class="mtk5">&quot;</span><span class="mtk6">lastName</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">Jones</span><span class="mtk5">&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          </span><span class="mtk5">},</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">Mulesoft123!</span><span class="mtk5">&quot;)</span></span></span></code></pre></div><ol start="3"><li>In <code>src/test/dwmit/HMAC_Payload_Only</code>, create <code>out.json</code> and paste the following:</li></ol><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">json</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="json" data-index="9"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">&quot;</span><span class="mtk6">eyJhbGciOiAiSFMyNTYiLCJ0eXAiOiAiSldUIn0.eyJmaXJzdE5hbWUiOiAiTWljaGFlbCIsImxhc3ROYW1lIjogIkpvbmVzIn0.izgs2w_CIE-qa0TdvzFErTOW4TPSDWrZs4b7xXdChFk</span><span class="mtk5">&quot;</span></span></span></code></pre></div><ol start="4"><li>Open terminal, and run <code>mvn test</code>; you should see your test show up as passing!</li></ol><div class="div-paragraph"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:700px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:61.71428571428571%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACNklEQVQoz62Sy07cMBSGR4iy6qq7ThLbufmSxLnOhEkYBhhQ6aLtm/RFWHeJ1LdgVvMKKA/AAjTb8gAgj05PAgWhLltLn/4TR/7kY3sEt79GX/bnF2fnzU11/u16+elrtzw972btomvnx93h0SnmSTfZb7v99rA7WJwMWTfzbo51VTfXSVbexGlxcfHj56gfu6lcrif5EpI8QjTEWQy+8IFHHAIZQBiFkGgNQkiIoghTAPN9oEEIzMOkFGzbXveuXvgOhVe9UGbBgyi4ETk3oQ6MKqURRWhkIUzTNKYoCpPnmUmz1HhCGhrFxpfygTEK4/H4qnc9C89WpT4BphxDIgIMoQpTIxkBVzKYzWZQ1zUkSQJlWUIQxfg/BaG18Vy3F65ehFm0WGXJDDxumyBi4HIKxEcZJhNIQCGO46HdkHMgQQA05OCiyLFt4zgOWJb1KvRcZ5VqF+ZzzzStC5OpiwspOJQAYbhbxMcz8zxvkFDGcN4FgmdHCDHIWyH1nFWoGKiUGhVTiAoKHmbfNhVIiGLhgE1ssC2739UTuDPkb2EsD6+ySQvqQDzGTbyVidoqjWBKKbdKqS22O+QA1v08irYofHwWvl5KJs/W7fQzLBYH0MxaOD46hnpaQ1VVMJ1Oh/PrnwpKXui/6VPLQ6Jw/Ue46xJ9yf3qXvHqTgTFRoY9+YYH+UbrfON57oY4ZIOL34A323NnWeN72/54ObzDD+/DHSwspPxHrB0co5p/H/2vsbe3N/oN2UMHZiQ6PBcAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <div role="button" class="ZoomableImage"><img alt="MVN Test results" class="gatsby-resp-image-image" title="MVN Test results" src="/static/04510985481ff263e6c71246fb5124d5/8c557/c1ede32171a75b1d.png" srcSet="/static/04510985481ff263e6c71246fb5124d5/4edbd/c1ede32171a75b1d.png 175w,/static/04510985481ff263e6c71246fb5124d5/13ae7/c1ede32171a75b1d.png 350w,/static/04510985481ff263e6c71246fb5124d5/8c557/c1ede32171a75b1d.png 700w,/static/04510985481ff263e6c71246fb5124d5/e996b/c1ede32171a75b1d.png 1050w,/static/04510985481ff263e6c71246fb5124d5/2cefc/c1ede32171a75b1d.png 1400w,/static/04510985481ff263e6c71246fb5124d5/29007/c1ede32171a75b1d.png 1600w" sizes="(max-width: 700px) 100vw, 700px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/></div>
    </span></div><div class="div-paragraph">Now that you see the basic functionality, take some time to play around with the test in order to see failures, or create additional tests!</div><h2 id="publish-module-to-maven-repository" style="position:relative">Publish Module to Maven Repository<a href="#publish-module-to-maven-repository" aria-label="publish module to maven repository permalink" class="autolink-header after"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2><div class="div-paragraph">For this example, we will be using your Anypoint Exchange as a maven repository target.</div><blockquote><div class="div-paragraph"><strong>Note:</strong> This is not currently officially supported, as DataWeave modules are not recognized by the Exchange Maven Facade. You are free to deploy with this method, but until the Facade recognizes DataWeave modules it will not be officially supported.</div></blockquote><ol><li>Find your organization ID:</li><li>Log into <a href="https://anypoint.mulesoft.com" target="_blank" rel="noreferrer">https://anypoint.mulesoft.com</a></li><li>Make sure you are in the master business group.</li></ol><div class="div-paragraph"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:674px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:75.99999999999999%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAACHklEQVQoz4VS2W7aUBC1eKiNrxdMwPjaeMEQG1uJktKNsIpSBAIXIZa2EgIkviT9jeaDUHihwAOfQ+dC2pAu6dHRaK7vnJk7M6YcN/uUruM4lp22UnbqYO10Bhygm/XApjPn4Oi6ARdU1vMflY6T8a/t1/XRaPjp85dO8HE4HLU7QScgNC3LMs1jomKxcHV1TSUN0/V8YJZYz/EvnYvcTaFUKlfzhWKhVM7fFN/lC6VKFSqapgWVnazneb5umNTt7VdV0xKKEpcTcjwew7qYeYOsl0A+lePtV0Ah8zZi+BgrGKsQLEnRWu39t7s7arfbCTzP0LSq4jiIY7FoVFIxPosCJLiKiCIbZhBi2TABz/MURc3n8/1+T63Xa1EUaZpuNBrD4bDX67VaLfD7/f5gMMAYJxIJ0KCfEAQBxNPplIi32y2cIR/oXxzAMPAOApZluQOEE8B7QDybzYh4s9lIkpTP55vNZuOA2gmqT1GpVCAAuhuPx0S8WCwgX7lcDoKg2+222+0P/0a9Xu90OoqiPIjXmw30DMmgN1mOy7KceBaapoVCoclkQsTL5RLGAH2SUYJhiHvC3wHBjz2vViuYFqyBO8Oc6nL4nBMl2AuHCNEfOE77l/g7EbNhTr9AVg6pLjIuEc4gOEYVxIb/Kn5Y1f398vARojga8QwSiGU5houwnPCfysc9Q7+mZdp2KpnU4PfXVNXQdUmKwKqfqfwDdaSnspDieHoAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <div role="button" class="ZoomableImage"><img alt="Master business group screenshot" class="gatsby-resp-image-image" title="Master business group screenshot" src="/static/5206690bc22b6023daa21cb8b1d3f801/fdaf8/3a240486ad6cd879.png" srcSet="/static/5206690bc22b6023daa21cb8b1d3f801/4edbd/3a240486ad6cd879.png 175w,/static/5206690bc22b6023daa21cb8b1d3f801/13ae7/3a240486ad6cd879.png 350w,/static/5206690bc22b6023daa21cb8b1d3f801/fdaf8/3a240486ad6cd879.png 674w" sizes="(max-width: 674px) 100vw, 674px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/></div>
    </span></div><ol start="4"><li>Navigate to Access Management</li><li>Click on your master business group and copy your Organization Id</li></ol><div class="div-paragraph"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:700px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:125.71428571428571%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAIAAAC+dZmEAAAACXBIWXMAAAsTAAALEwEAmpwYAAACrklEQVQ4y5VU20/TUBzeX+WTr0KCgU5IcPI29ri/xb2gktAuzAeyCGa3B9FI4mBmGwqyAUF9McrksnXtut7b04tf21FwgMNv37q2O9/53U/kaSrVaO4fHB6C+AmJd3h/I7/sNY6+fltdex1ZXl42TNJhu2yX6wl9XPuixPcERVVd13Ucx70Gy7Jw3a7XI0tLtKJqHN8De4IImSCKAjaQFU03biTWQ7xVqUQYhrZtx/U+w3BuoWXb+LdarUbS6bSmacet1u+Tk7Pzc3hvAoR431ugap7leq0GMYPndoc9PTvHtdvlZFWVZWVARYWTV6lqOscLxLLqiBluE9xadpAbL4RRsH23a7D8MpNhWXZ6ZmZycoqKRikqOjs7+zgWezI3N0VRz56/wGZI3lXjoqQMxEHMRaBQLJVKxWIpD+TyhXxh7dXq7s4u1nnhW1ZIwzQvxbpuCELfJtZ1DxELdEPUDWMgZhgGEaO8J6dnyDjL8XAMeQo5lDAQTeCEllEaURQlSdb8GvxHwjKZDM/3kK3x8fGJhxMUMublLTr9aHrswdjCwgLWwVVUISRaYCBeXGJgudFoNjEKGIn9g5B7e41WqxWYcq4g6G1PTDNpWZaz2Wwul1tfX39zAdwj+djyX2JMlSxJyWQyHo/Pz8/HL5BIJGKxGE3TXqlMFMgOaYRuI9vE7y/3zrhMmCcmhGW77XYHmev3RQwlGgrWgtmwr4GVjcFgQOyH4b1FMMTvA9v6K8ghyDoJpwodpqO9OZ7zwPOSKN7Vba9JCMHxERxDv45bcP42GUG3Oo5BwlLRdOCMH86gDe5qGWJ7FHBu4fRQdDP7Q0x/7y8e8Z8E93Pdd3tkbUy0JLFUx6U+Cvc3+Htv2dRPd39nO5JKpbZGoby5GXCjvPW+vPnuQ7lSra2srPwB0kYxE6OXzAwAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <div role="button" class="ZoomableImage"><img alt="Screenshot of org info" class="gatsby-resp-image-image" title="Screenshot of org info" src="/static/65b2da990aeaa8152b467033707b194d/8c557/4e2c38738608ca84.png" srcSet="/static/65b2da990aeaa8152b467033707b194d/4edbd/4e2c38738608ca84.png 175w,/static/65b2da990aeaa8152b467033707b194d/13ae7/4e2c38738608ca84.png 350w,/static/65b2da990aeaa8152b467033707b194d/8c557/4e2c38738608ca84.png 700w,/static/65b2da990aeaa8152b467033707b194d/e996b/4e2c38738608ca84.png 1050w,/static/65b2da990aeaa8152b467033707b194d/11a8f/4e2c38738608ca84.png 1272w" sizes="(max-width: 700px) 100vw, 700px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/></div>
    </span></div><ol start="6"><li>In your DataWeave project, remove the line <code>dw-library</code> in <code>POM.xml</code></li><li>In your DataWeave project, update your <code>groupId</code> key to your Organization Id in <code>POM.xml</code></li><li>In your DataWeave project, update your <code>POM.xml</code> by adding a <code>distributionManagement key</code></li></ol><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">xml</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="xml" data-index="10"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">&lt;</span><span class="mtk11">distributionManagement</span><span class="mtk5">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">&lt;</span><span class="mtk11">repository</span><span class="mtk5">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&lt;</span><span class="mtk11">id</span><span class="mtk5">&gt;</span><span class="mtk1">exchange-repository</span><span class="mtk5">&lt;/</span><span class="mtk11">id</span><span class="mtk5">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&lt;</span><span class="mtk11">url</span><span class="mtk5">&gt;</span><span class="mtk1">https://maven.anypoint.mulesoft.com/api/v2/organizations/YOUR-ORG-ID-HERE/maven</span><span class="mtk5">&lt;/</span><span class="mtk11">url</span><span class="mtk5">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&lt;</span><span class="mtk11">layout</span><span class="mtk5">&gt;</span><span class="mtk1">default</span><span class="mtk5">&lt;/</span><span class="mtk11">layout</span><span class="mtk5">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">&lt;/</span><span class="mtk11">repository</span><span class="mtk5">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">&lt;/</span><span class="mtk11">distributionManagement</span><span class="mtk5">&gt;</span></span></span></code></pre></div><blockquote><div class="div-paragraph"><strong>Note:</strong> In order to deploy, you will need a server entry with credentials for the repository id <code>exchange-repository</code>. For an example <code>settings.xml</code> file you can include in your maven install, check this file: <a href="https://github.com/mikeacjones/dw-jwt-module/blob/master/.maven/settings.xml" target="_blank" rel="noreferrer">https://github.com/mikeacjones/dw-jwt-module/blob/master/.maven/settings.xml</a> Strictly speaking, the only piece required in this file is the server entry for <code>exchange-repository</code>.</div></blockquote><div class="div-paragraph">Now that we have a maven target setup, run the following commands in terminal:</div><ol><li><code>mvn install</code> (this install into our local repo; if you can&#x27;t get your credentials setup for the Exchange, this will allow us to continue with the next section)</li><li><code>mvn deploy</code> (this will deploy to our exchange maven repo, assuming your credentials are setup)</li></ol><div class="div-paragraph"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:700px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:67.42857142857143%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAACfUlEQVQ4y3WSO08bQRDHVxEx4cxDSuk4FhhMFPzC9/I97XvaoJAU6WOjVCT5CulSUKQhKGWkpHOTkgqDsN0gpUK6LgXKx4Dj8GRnxeK4iKW/Zmd29jcPHwEA8tLUD4K2clnzty689osoCMKo0XQjj9qwvRX5YStqOG7keH4UtrYi1w+iputFQasdmVbjoq4Zl5KiHiALf6m6po1arRZ4ngfb29uws7MDYRgy+b4PQRDcyzAMJtu2QdM0sCwLXNcFURRHyELgrGmaxwijidc0MaHnpNlsJjQ5QR9Fc5hPcxIKSur1OrfX9A4kSTxGFgPSYB+r6LqeOI7DqquqCoqiAL27t9gRdodn7iMYgbVarT8FxFGxM+zUskyQZZlB7x5hMQZDi3GMYQ4CG40GVCqVCZAmMSDdGQNiAj7G/XAoF/o8JkkSA+JE1Wp1AqSVpkam+2Mw3g3viEP5Cu7u2MjlcnkClGSxb9sWmLqZOE0HMAEfYZd45paf/43jH4UTTe2wVrL7humCbIk3ml0fl0ql8cbGxphWHReLRWbpjpjwjPcYX11dHRcKhZv19QIsLy9PgOX14FRVfNAc+VY2ZNB0DUcA+hCXDfQRrK2t3Qv9lZUVyGazqFu0mUzmlANTz/LqUeW5BZtl9apSVGKxqseKqsXVzWpMgTEFxBQ0ZfP5fExBqKtc7inkck+O+If9QJhLG/PC4925R0sdYW6pM/twsZtOL3RTs6nuzMxMVxCE/6mDmp9P7y4uCAayyOtXHbL75h35+TUhZ9+ADHpAfnwE8vvPmHw+/ETe730gJycnZDQakeFgQIbDIdOIanB2Rs7Pf5Fe7zvZ398jh1/ekr8GpnEs2zBRIgAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <div role="button" class="ZoomableImage"><img alt="Screenshot of mvn install / deploy" class="gatsby-resp-image-image" title="Screenshot of mvn install / deploy" src="/static/65ac3a8a363e811b5c99d4cf4ae83032/8c557/461f448743097b15.png" srcSet="/static/65ac3a8a363e811b5c99d4cf4ae83032/4edbd/461f448743097b15.png 175w,/static/65ac3a8a363e811b5c99d4cf4ae83032/13ae7/461f448743097b15.png 350w,/static/65ac3a8a363e811b5c99d4cf4ae83032/8c557/461f448743097b15.png 700w,/static/65ac3a8a363e811b5c99d4cf4ae83032/e996b/461f448743097b15.png 1050w,/static/65ac3a8a363e811b5c99d4cf4ae83032/2cefc/461f448743097b15.png 1400w,/static/65ac3a8a363e811b5c99d4cf4ae83032/29007/461f448743097b15.png 1600w" sizes="(max-width: 700px) 100vw, 700px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/></div>
    </span></div><h2 id="use-our-module-in-a-mule-application" style="position:relative">Use our Module in a Mule Application<a href="#use-our-module-in-a-mule-application" aria-label="use our module in a mule application permalink" class="autolink-header after"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2><div class="div-paragraph">There you go! We can now easily include this module in our Mule application simply by adding a dependency to our project&#x27;s <code>POM.xml</code> file!</div><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">xml</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="xml" data-index="11"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">&lt;</span><span class="mtk11">dependency</span><span class="mtk5">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk3 mtki">&lt;!-- Use your ORG ID if you changed it earlier --&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&lt;</span><span class="mtk11">groupId</span><span class="mtk5">&gt;</span><span class="mtk1">com.mulesoft.labs</span><span class="mtk5">&lt;/</span><span class="mtk11">groupId</span><span class="mtk5">&gt;</span><span class="mtk1"> </span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&lt;</span><span class="mtk11">artifactId</span><span class="mtk5">&gt;</span><span class="mtk1">jwt-dw-module</span><span class="mtk5">&lt;/</span><span class="mtk11">artifactId</span><span class="mtk5">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&lt;</span><span class="mtk11">version</span><span class="mtk5">&gt;</span><span class="mtk1">1.0.0-SNAPSHOT</span><span class="mtk5">&lt;/</span><span class="mtk11">version</span><span class="mtk5">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">&lt;</span><span class="mtk11">dependency</span><span class="mtk5">&gt;</span></span></span></code></pre></div><div class="div-paragraph">And now you can include it in your transform: </div><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">dataweave</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="dataweave" data-index="12"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3 mtki">%dw</span><span class="mtk1"> </span><span class="mtk3 mtki">2.0</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">import</span><span class="mtk1"> </span><span class="mtk7">jwt::HMAC</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">output</span><span class="mtk1"> </span><span class="mtk6">application/json</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">---</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">HMAC</span><span class="mtk12">::</span><span class="mtk8">JWT</span><span class="mtk5">({</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    name</span><span class="mtk5">:</span><span class="mtk1"> </span><span class="mtk5">&#x27;</span><span class="mtk6">Michael Jones</span><span class="mtk5">&#x27;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">},</span><span class="mtk1"> </span><span class="mtk5">&#x27;</span><span class="mtk6">Mulesoft123!</span><span class="mtk5">&#x27;)</span></span></span></code></pre></div><h2 id="and-now-we-have-a-reusable-library-separate-from-our-mule-applications-with-its-own-unit-testing-and-versioning" style="position:relative">And now we have a reusable library separate from our Mule applications, with its own Unit Testing and versioning!<a href="#and-now-we-have-a-reusable-library-separate-from-our-mule-applications-with-its-own-unit-testing-and-versioning" aria-label="and now we have a reusable library separate from our mule applications with its own unit testing and versioning permalink" class="autolink-header after"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2><style class="grvsc-styles">
  .grvsc-container {
    overflow: auto;
    position: relative;
    -webkit-overflow-scrolling: touch;
    padding-top: 1rem;
    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));
    padding-bottom: 1rem;
    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));
    border-radius: 8px;
    border-radius: var(--grvsc-border-radius, 8px);
    font-feature-settings: normal;
    line-height: 1.4;
  }
  
  .grvsc-code {
    display: table;
  }
  
  .grvsc-line {
    display: table-row;
    box-sizing: border-box;
    width: 100%;
    position: relative;
  }
  
  .grvsc-line &gt; * {
    position: relative;
  }
  
  .grvsc-gutter-pad {
    display: table-cell;
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  .grvsc-gutter {
    display: table-cell;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter::before {
    content: attr(data-content);
  }
  
  .grvsc-source {
    display: table-cell;
    padding-left: 1.5rem;
    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));
    padding-right: 1.5rem;
    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));
  }
  
  .grvsc-source:empty::after {
    content: &#x27; &#x27;;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter + .grvsc-source {
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  /* Line transformer styles */
  
  .grvsc-has-line-highlighting &gt; .grvsc-code &gt; .grvsc-line::before {
    content: &#x27; &#x27;;
    position: absolute;
    width: 100%;
  }
  
  .grvsc-line-diff-add::before {
    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));
  }
  
  .grvsc-line-diff-del::before {
    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));
  }
  
  .grvsc-line-number {
    padding: 0 2px;
    text-align: right;
    opacity: 0.7;
  }
  
  .community-material-theme-palenight {
    background-color: #292D3E;
    color: #A6ACCD;
  }
  .community-material-theme-palenight .mtki { font-style: italic; }
  .community-material-theme-palenight .mtk3 { color: #676E95; }
  .community-material-theme-palenight .mtk1 { color: #FFFFFF; }
  .community-material-theme-palenight .mtk12 { color: #C792EA; }
  .community-material-theme-palenight .mtk7 { color: #FFCB6B; }
  .community-material-theme-palenight .mtk9 { color: #82AAFF; }
  .community-material-theme-palenight .mtk10 { color: #FF5370; }
  .community-material-theme-palenight .mtk8 { color: #A6ACCD; }
  .community-material-theme-palenight .mtk5 { color: #89DDFF; }
  .community-material-theme-palenight .mtk6 { color: #C3E88D; }
  .community-material-theme-palenight .mtk4 { color: #F78C6C; }
  .community-material-theme-palenight .mtk11 { color: #F07178; }
  .community-material-theme-palenight .grvsc-line-highlighted::before {
    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));
    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));
  }
</style></div></div></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/post/2021/dw-module-how-to/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-7fe1a63fac9cbf887ef9.js"],"app":["/app-06ef109d51ffd802fbef.js"],"component---src-pages-404-js":["/component---src-pages-404-js-0d65b0984ce0dd3bfa05.js"],"component---src-templates-index-js":["/component---src-templates-index-js-9cc22a22addd47368c69.js"],"component---src-templates-post-js":["/component---src-templates-post-js-653ffa86fa4aaccd47e4.js"],"component---src-templates-posts-by-tags-js":["/component---src-templates-posts-by-tags-js-cb68329b6c1dc82ea9e5.js"]};/*]]>*/</script><script src="/polyfill-7fe1a63fac9cbf887ef9.js" nomodule=""></script><script src="/component---src-templates-post-js-653ffa86fa4aaccd47e4.js" async=""></script><script src="/c87213c192fc9cb8753c10dd75e74e23ae9391ee-1102b991d7103fbe13c4.js" async=""></script><script src="/commons-2918422b25b7d526a2b4.js" async=""></script><script src="/a9a7754c-34b8923232843e7049e0.js" async=""></script><script src="/styles-407fe62976dc5310c43e.js" async=""></script><script src="/app-06ef109d51ffd802fbef.js" async=""></script><script src="/framework-6c3ead24af170cdcb87c.js" async=""></script><script src="/webpack-runtime-83755eb61c7a5e767e6c.js" async=""></script></body></html>