<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.556d3797ef5a5866e43c.css" id="gatsby-global-css">.codeWrapper{position:relative;max-width:98vw;margin-left:auto;margin-right:auto}.ConfettiWrapper{position:absolute;top:0;right:0;z-index:9}.CodeLanguageStub{left:8px;box-shadow:"none";-webkit-user-select:none;-ms-user-select:none;user-select:none}.CodeLanguageStub,.CopyCodeButton{position:absolute;top:0;margin:0;border:none;padding:8px 12px;background:#52307c;border-bottom-left-radius:8px;border-bottom-right-radius:8px;color:#ffffd2;font-size:14px;font-family:Ubuntu Mono,monospace;line-height:1;z-index:90}.CopyCodeButton{right:8px;box-shadow:none;text-decoration:none;cursor:pointer}.ZoomableImage{max-width:98vw;width:700px;overflow:hidden;cursor:pointer;margin-left:auto;margin-right:auto;border:1px solid #3b415c}.ZoomableImage-enlarged{position:fixed;top:0;left:0;right:0;bottom:0;cursor:pointer;display:flex;padding:50px;z-index:100;background-color:rgba(0,0,0,.8)}.post-view{background-color:#fff;display:flex;flex-direction:column;align-items:center;min-height:100vh;font-size:1em}.post-view img{display:block;max-width:100%;max-height:100%;height:auto;margin-left:auto;margin-right:auto;-o-object-fit:contain;object-fit:contain}.embedVideo-container{display:block;max-width:98vw;width:700px}.embedVideo-iframe{width:100%;height:400px}.post-view-title{color:#52307c;padding:0;margin:0;word-wrap:break-word}.post-view-title h1{font-size:4em;word-wrap:break-word;margin:0;text-align:center}.post-view-date{padding:0;font-weight:lighter;font-size:1rem;text-align:center}@media only screen and (max-device-width:800px) and (-webkit-min-device-pixel-ratio:2){.post-view-title h1{font-size:3em;padding:0;margin:0}.post-view-date{margin:0;font-size:1rem}.post-view-content{padding:10px}}body,html{margin:0;padding:0;font-family:Titillium Web,sans-serif;background-color:#efefef}a{color:inherit}.post-link,.tag-link{text-decoration:none;color:inherit}.post-link{z-index:10;position:absolute;top:0;left:0;right:0;bottom:0}.tag-link{z-index:20}.autolink-header.before{position:absolute;top:0;left:0;transform:translateX(-100%);padding-right:4px;display:none}.paging-links{width:100%;text-align:center;margin-top:16px}.paging-links a{text-decoration:none;font-size:1.2rem;background-color:#3b415c;color:#ffffd2;border-radius:8px;padding:8px;margin:4px}h1:hover .autolink-header.before,h2:hover .autolink-header.before,h3:hover .autolink-header.before,h4:hover .autolink-header.before,h5:hover .autolink-header.before,h6:hover .autolink-header.before{display:block}code{font-family:Ubuntu Mono,monospace;font-size:12px}.grvsc-code{padding-top:25px}.grvsc-line{white-space:pre-wrap}code:not(.grvsc-code){display:inline-block;white-space:pre-wrap;padding:5px;margin:5px;border-radius:5px;background-color:#efefef}.div-paragraph{margin:30px 0}blockquote{border:1px solid #cdcdcd;border-left-width:10px;padding-left:5px}#Layout{display:flex;flex-direction:row;min-height:100vh;overflow:hidden}.sideBar{flex:0 0 18rem;z-index:98}#sideBar{position:fixed;width:18rem;height:100%;display:flex;flex-direction:column}#aboutMe,#content-wrapper{flex:1 1 auto;display:flex;flex-direction:column}#aboutMe{margin-top:100px;align-items:center}#aboutMe_image{width:50%;height:auto;margin-left:auto;margin-right:auto;transition:all .5s ease}#aboutMe_image:hover{transform:scale(1.1)}#aboutMe_image img{width:100%}#aboutMe_pages{width:100%;display:flex;flex-direction:column;align-items:flex-end}#aboutMe_icons{height:60px;font-size:25px;width:100%;display:flex;justify-content:space-evenly}#side-nav-toggle-wrapper{display:none;width:100%;flex:0 0 50px;z-index:99;position:fixed}#side-nav-toggle{width:100%}.toggle{padding-left:10px;justify-self:center;cursor:pointer}.post-view-content{align-self:stretch;padding:6rem}@media only screen and (max-width:1000px) and (-webkit-min-device-pixel-ratio:2){#side-nav-toggle-wrapper{display:block}#side-nav-toggle-cb:checked+#sideBar{transform:translateX(0)}.sideBar{flex:0 0}#sideBar{transition:all .5s ease;transform:translateX(-18rem)}#content{margin-top:60px}.post-view-content{padding:5px}}#side-nav-toggle,#sideBar{background-color:#3b415c;color:#ffffd2}#side-nav-toggle{font-size:2.5rem;border-bottom:1px solid #ffffd2}#aboutMe_icons i{cursor:pointer;transition:all .5s ease}#aboutMe_icons i:hover{color:#fff;transform:scale(1.3)}#aboutMe_pages_links{list-style:none;font-size:1.2rem}#aboutMe_pages_links a{text-decoration:none}#aboutMe_pages_links a li{padding-right:1rem;margin-bottom:1rem;transition:border-width .5s ease}#aboutMe_pages_links a li:after{content:"";display:block;width:0;height:1px;background:#ffffd2;transition:width .3s}#aboutMe_pages_links a.active li:after,#aboutMe_pages_links a:hover li:after{width:100%;padding-right:1rem}#side-nav-toggle-cb{display:none}.post-card{color:#52307c;background-color:#fff;padding:20px;margin:15px 20px 0;cursor:pointer;position:relative;box-shadow:0 1px 2px rgba(0,0,0,.1);border-radius:0;transition:all .6s cubic-bezier(.165,.84,.44,1)}.post-card-description{color:#663a82}.post-card:hover{transform:scale(1.005)}.post-card:after{content:"";border-radius:0;position:absolute;z-index:-1;top:0;left:0;width:100%;height:100%;box-shadow:0 5px 15px rgba(0,0,0,.3);opacity:0;transition:all .6s cubic-bezier(.165,.84,.44,1)}.post-card:hover:after{opacity:1}.post-card-title{font-size:30px;font-weight:700}.post-card-header-date{font-weight:lighter}.post-card-tags{display:flex;flex-direction:row;margin-top:10px}.chip{font-size:12px;background-color:#eddbf4;padding:8px;border-radius:10px;margin-right:5px;color:#000;transition:all .5s ease;z-index:15}.chip-link{text-decoration:none;color:inherit}.chip:hover{transform:scale(1.15)}.LabCard{width:40%;max-width:40%;margin-top:2%;white-space:pre-wrap;color:#52307c;background-color:#fff;padding:20px;cursor:pointer;box-shadow:0 1px 2px rgba(0,0,0,.1);border-radius:0;transition:all .6s cubic-bezier(.165,.84,.44,1);max-height:220px;height:220px;display:flex;flex-direction:column;justify-content:space-between;text-decoration:none}.LabCard:hover{transform:scale(1.005)}.LabCard:after{content:"";border-radius:0;position:absolute;z-index:-1;top:0;left:0;width:100%;height:100%;box-shadow:0 5px 15px rgba(0,0,0,.3);opacity:0;transition:all .6s cubic-bezier(.165,.84,.44,1)}.LabCard:hover:after{opacity:1}.LabCard-header{display:flex;flex-direction:column}.LabCard-title{color:#663a82;font-size:30px}.LabCard-updated{font-size:12px;align-self:flex-end}.LabCard-body{overflow:hidden}.LabCards{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-around}</style><meta name="generator" content="Gatsby 2.29.1"/><link href="https://fonts.googleapis.com/css?family=Titillium+Web|Ubuntu+Mono&amp;display=swap" rel="stylesheet"/><link as="script" rel="preload" href="/webpack-runtime-79c6269c1ad1041a7c80.js"/><link as="script" rel="preload" href="/framework-1bcdbcdd30f43763a25c.js"/><link as="script" rel="preload" href="/app-b707b6c22bd8889d0961.js"/><link as="script" rel="preload" href="/styles-407fe62976dc5310c43e.js"/><link as="script" rel="preload" href="/a9a7754c-34b8923232843e7049e0.js"/><link as="script" rel="preload" href="/commons-17f5247a92782cb2a13d.js"/><link as="script" rel="preload" href="/b66a4dad82990de4e9b8f307132ca2e030406df0-aed584aa77011b175486.js"/><link as="script" rel="preload" href="/component---src-components-post-view-js-367f5305947f2f226d14.js"/><link as="fetch" rel="preload" href="/page-data/2020/getting-started-with-dw/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/1375839498.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3128451518.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div id="Layout"><div class="sideBar"><input type="checkbox" id="side-nav-toggle-cb" name="" value=""/><div id="sideBar"><div id="aboutMe"><a class="link-to" href="/"><div id="aboutMe_image"><img src="/static/profilePicture-8108508c5cee70d3c9920e216c4974ae.png" alt=""/></div></a><h1>Michael Jones</h1><div id="aboutMe_pages"><div><ul id="aboutMe_pages_links"><a href="/"><li>Posts</li></a><a href="/dw-cookbook"><li>DW Cookbook</li></a><a href="/labs"><li>Labs</li></a></ul></div></div></div><div id="aboutMe_icons"><i><a href="https://github.com/mikeacjones" class="link-to" target="_blank" rel="noreferrer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github fa-w-16 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" alt="github"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></i><i><a href="https://www.linkedin.com/in/michael-jones-5a870678/" class="link-to" target="_blank" rel="noreferrer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin" class="svg-inline--fa fa-linkedin fa-w-14 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" alt="linkedin"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a></i><i><a href="https://stackoverflow.com/users/10890536/michael-jones" class="link-to" target="_blank" rel="noreferrer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="stack-overflow" class="svg-inline--fa fa-stack-overflow fa-w-12 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" alt="stackoverflow"><path fill="currentColor" d="M290.7 311L95 269.7 86.8 309l195.7 41zm51-87L188.2 95.7l-25.5 30.8 153.5 128.3zm-31.2 39.7L129.2 179l-16.7 36.5L293.7 300zM262 32l-32 24 119.3 160.3 32-24zm20.5 328h-200v39.7h200zm39.7 80H42.7V320h-40v160h359.5V320h-40z"></path></svg></a></i></div></div></div><div id="content-wrapper"><div id="side-nav-toggle-wrapper"><div id="side-nav-toggle"><label for="side-nav-toggle-cb" class="toggle">â˜°</label></div></div><div id="content"><div class="post-view"><div class="post-view-header"><div class="post-view-title"><h1>Getting Started with Data-Weave</h1><div class="post-view-date">Written on <!-- -->2020-05-24</div></div></div><div class="post-view-content"><h2 id="table-of-contents" style="position:relative"><a href="#table-of-contents" aria-label="table of contents permalink" class="autolink-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Table of Contents</h2><ol><li><a href="#environment-setup">Environment setup</a><ol><li><a href="#anypoint-studio">Anypoint Studio</a></li><li><a href="#data-weave-playground">Data-weave playground</a></li></ol></li><li><a href="#syntax-basics">Syntax Basics</a><ol><li><a href="#what-the-heck-is-the----">What the heck is the <code>---</code>?</a></li><li><a href="#anonymouslambda-functions-and-their-syntax-sugar----">Anonymous functions, lambdas, and their syntax sugar - <code>$</code>, <code>$$</code>..</a></li><li><a href="#-----what-magic-is-this"><code>{( ... )}</code> .. what magic is this?!?</a></li></ol></li><li><a href="#must-know-functions">Must know functions</a><ol><li><a href="#map"><code>map</code></a></li><li><a href="#mapobject"><code>mapObject</code></a></li><li><a href="#match"><code>match</code></a></li><li><a href="#putting-them-together-for-a-recursive-pattern">Putting them together for a recursive pattern</a></li><li><a href="#filter"><code>filter</code></a></li><li><a href="#orderby"><code>orderBy</code></a></li><li><a href="#flatten-and-flatmap"><code>flatten</code> and <code>flatMap</code></a></li><li><a href="#pluck"><code>pluck</code></a></li><li><a href="#reduce"><code>reduce</code></a></li><li><a href="#-and---"><code>++</code> and <code>--</code> (yup, they&#x27;re functions!)</a></li></ol></li></ol><hr/><h1 id="environment-setup" style="position:relative"><a href="#environment-setup" aria-label="environment setup permalink" class="autolink-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Environment Setup</h1><h3 id="anypoint-studio" style="position:relative"><a href="#anypoint-studio" aria-label="anypoint studio permalink" class="autolink-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><strong>Anypoint Studio</strong></h3><div class="div-paragraph">Your go to IDE for using DataWeave should always be Anypoint Studio - this is the only <strong>official</strong> way to work with Mule (outside of design center at least). No other environment is going to give you access to all of the features of data-weave, and no other environment is going to guarantee that your data-weave behaves as expected when moved into production.</div><div class="div-paragraph">The two most common arguments against studio that I hear are that it is either too slow / resource intensive, or that the experience isn&#x27;t as good as the web based playground.  Here are a couple of ideas to improve your experience.</div><div class="div-paragraph"><strong>Use a separate workspace or project</strong>. If you find studio to be too slow or non-responsive when working with DataWeave, consider using a separate workspace just for your DataWeave. When you have a multiple projects in studio, the background tooling is constantly running to validate / resolve metadata. The less you have open, the faster it&#x27;s going to run! So if you&#x27;re working on a complicated DataWeave for a project, separate it out into a separate project and close your main project. This also sets you up for creating reusable data-weave module if that&#x27;s the route you decide to go!</div><div class="div-paragraph"><strong>Add a transform message component</strong>. Think the three panel experience the playground gives you is better? Guess what, studio can do it too! Just throw a transform message component in your project, double click the component properties tab, and turn on preview!</div><div class="div-paragraph"><div class="ZoomableImage"><img src="../../images/studio-dw-editor.gif" alt="studio data-weave editing gif"/></div></div><div class="div-paragraph">There you go, full screen code editing!  Your sample payload is on the left (if you haven&#x27;t set it yet, it will prompt you for a data type first), and all functionality of data-weave is still supported, such as importing modules, custom flat file formats, every single output writer, etc.</div><h3 id="data-weave-playground" style="position:relative"><a href="#data-weave-playground" aria-label="data weave playground permalink" class="autolink-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><strong>Data-weave playground</strong></h3><div class="div-paragraph"><strong><em>The playground is NOT an official tool and is not supported by Mulesoft. The playground is a hobby project written by someone with a passion for DataWeave, but you shouldn&#x27;t be using it for anything other than quick snippets</em></strong></div><div class="div-paragraph"><div class="ZoomableImage"><img src="../../images/dw-playground.gif" alt="data-weave playground gif"/></div></div><div class="div-paragraph">So I just got done telling you to do all of your data-weave development in studio, and now I&#x27;m talking about the web-based playground. What gives? Well, one good reason to use the playground is for testing in specific snapshots of DataWeave; I personally keep the latest DW2.X version and the latest DW1.X version. I typically find myself going to the playground when writing up a snippet for someone on stack-overflow or to answer a question on slack - you just can&#x27;t beat how quick it is. What I&#x27;m not doing is writing data-weave intended for a project; I can&#x27;t setup proper folder structures, unit testing, logging, etc. It only makes sense to me for quick, short snippets.</div><div class="div-paragraph">The playground is a docker image; if you don&#x27;t know what docker is or how to use it, <a href="https://docker-curriculum.com/" target="_blank" rel="noreferrer">start here</a>.</div><div class="div-paragraph">You can find the list of DataWeave playground tags <a href="https://hub.docker.com/r/machaval/dw-playground/tags" target="_blank" rel="noreferrer">here</a>.</div><h4 id="to-quickly-launch-the-231-playground-for-one-time-usage" style="position:relative"><a href="#to-quickly-launch-the-231-playground-for-one-time-usage" aria-label="to quickly launch the 231 playground for one time usage permalink" class="autolink-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>To quickly launch the 2.3.1 playground for one-time usage:</h4><div class="div-paragraph"><code>docker run --publish 9999:8080 machaval/dw-playground:2.3.1-SNAPSHOT</code></div><div class="div-paragraph">And now you can access the playground at http://localhost:9999</div><h4 id="to-launch-231-as-a-named-detached-playground-which-will-start-with-your-system" style="position:relative"><a href="#to-launch-231-as-a-named-detached-playground-which-will-start-with-your-system" aria-label="to launch 231 as a named detached playground which will start with your system permalink" class="autolink-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>To launch 2.3.1 as a named, detached playground which will start with your system:</h4><div class="div-paragraph"><code>docker run --detach --publish 8080:9999 --name dw-playground-2.3.1 --restart unless-stopped machaval/dw-playground:2.3.1-SNAPSHOT</code></div><div class="div-paragraph">Pick whichever snapshot you want to use from the tag list and get going with it. I&#x27;m not going to go any further into the playground as it is pretty straightforward - and pretty limited. If you run into issues with the playground, I suggest moving your work to the studio as the playground is not supported.</div><hr/><h1 id="syntax-basics" style="position:relative"><a href="#syntax-basics" aria-label="syntax basics permalink" class="autolink-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Syntax Basics</h1><h3 id="what-the-heck-is-the----" style="position:relative"><a href="#what-the-heck-is-the----" aria-label="what the heck is the     permalink" class="autolink-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><strong>What the heck is the ---?</strong></h3><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">data-weave</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container grvsc-has-line-highlighting community-material-theme-palenight" data-language="data-weave" data-index="0"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3 mtki">%dw</span><span class="mtk1"> </span><span class="mtk3 mtki">2.0</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">output</span><span class="mtk1"> </span><span class="mtk6">application/json</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">var</span><span class="mtk1"> </span><span class="mtk7">numbers</span><span class="mtk1"> </span><span class="mtk12">=</span><span class="mtk1"> </span><span class="mtk4">1</span><span class="mtk9"> to </span><span class="mtk4">30</span></span></span>
<span class="grvsc-line grvsc-line-highlighted"><span class="grvsc-source"><span class="mtk12">---</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">numbers</span><span class="mtk9"> map </span><span class="mtk5 mtki">do</span><span class="mtk1"> </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk12">var</span><span class="mtk1"> </span><span class="mtk7">prevNumber</span><span class="mtk1"> </span><span class="mtk12">=</span><span class="mtk1"> </span><span class="mtk8">numbers</span><span class="mtk1">[</span><span class="mtk10">$$</span><span class="mtk12">-</span><span class="mtk4">1</span><span class="mtk1">]</span></span></span>
<span class="grvsc-line grvsc-line-highlighted"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk12">---</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk10">$</span><span class="mtk1"> </span><span class="mtk12">+</span><span class="mtk1"> </span><span class="mtk8">prevNumber</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">}</span></span></span></code></pre></div><div class="div-paragraph">So what exactly does the <code>---</code> we see above mean? For a scoped expression, it represents the separation of the head and body. The body of an expression <strong><em>must</em></strong> yield a value. That makes it rather difficult to do things like setting a variable... which is where the head comes in. If you need to set a variable, define a function, etc, you get it done in the head. The <code>do { }</code> creates a new scope in which we can put another head/body, allowing us to set variables and make use of them in the body of expressions. Here is a real world example (with all the messy bits removed) showing why this is useful:</div><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">data-weave</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container grvsc-has-line-highlighting community-material-theme-palenight" data-language="data-weave" data-index="1"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3 mtki">%dw</span><span class="mtk1"> </span><span class="mtk3 mtki">2.0</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">output</span><span class="mtk1"> </span><span class="mtk6">application/json</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line grvsc-line-highlighted"><span class="grvsc-source"><span class="mtk12">var</span><span class="mtk1"> </span><span class="mtk7">doCalc</span><span class="mtk1"> </span><span class="mtk12">=</span><span class="mtk1"> </span><span class="mtk5">(</span><span class="mtk8">item</span><span class="mtk5">,</span><span class="mtk1"> </span><span class="mtk8">previousItem</span><span class="mtk5">)</span><span class="mtk1"> </span><span class="mtk12">-&gt;</span><span class="mtk1"> </span><span class="mtk8">item</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">---</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">payload</span><span class="mtk9"> orderBy </span><span class="mtk10">$</span><span class="mtk1">.transactionDate</span><span class="mtk9"> map </span><span class="mtk5 mtki">do</span><span class="mtk1"> </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line grvsc-line-highlighted"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk12">var</span><span class="mtk1"> </span><span class="mtk7">calc</span><span class="mtk1"> </span><span class="mtk12">=</span><span class="mtk1"> </span><span class="mtk8">doCalc</span><span class="mtk5">(</span><span class="mtk8">item</span><span class="mtk5">,</span><span class="mtk1"> </span><span class="mtk8">payload</span><span class="mtk1">[</span><span class="mtk8">max</span><span class="mtk5">(</span><span class="mtk1">[</span><span class="mtk4">0</span><span class="mtk5">,</span><span class="mtk1"> </span><span class="mtk10">$$</span><span class="mtk12">-</span><span class="mtk4">1</span><span class="mtk1">]</span><span class="mtk5">)</span><span class="mtk1">]</span><span class="mtk5">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk12">---</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">(</span><span class="mtk10">$</span><span class="mtk1"> </span><span class="mtk12">-</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">customAttributes</span><span class="mtk5">&quot;)</span><span class="mtk9"> ++ </span><span class="mtk5">&quot;</span><span class="mtk6">customAttributes</span><span class="mtk5">&quot;</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk5">({</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;</span><span class="mtk6">adjustedQualifyingFills</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk8">calc</span><span class="mtk1">.adjustedQualifyingFills</span><span class="mtk5">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;</span><span class="mtk6">adjustedEarnLevel</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk8">calc</span><span class="mtk1">.adjustedEarnLevel</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">})</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">}</span></span></span></code></pre></div><div class="div-paragraph">As you can see, we are now able to create a scope in our main body, with its own head/body, allowing us to call a function, get a result, and then make use of that in our <code>map</code>. Neat.</div><h3 id="anonymouslambda-functions-and-their-syntax-sugar----" style="position:relative"><a href="#anonymouslambda-functions-and-their-syntax-sugar----" aria-label="anonymouslambda functions and their syntax sugar     permalink" class="autolink-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><strong>Anonymous/lambda functions, and their syntax sugar - <code>$</code>, <code>$$</code>..</strong></h3><div class="div-paragraph">In data-weave examples, you probably see things like this <em>a lot</em> right?</div><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">data-weave</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="data-weave" data-index="2"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3 mtki">%dw</span><span class="mtk1"> </span><span class="mtk3 mtki">2.0</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">output</span><span class="mtk1"> </span><span class="mtk6">application/json</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">var</span><span class="mtk1"> </span><span class="mtk7">items</span><span class="mtk1"> </span><span class="mtk12">=</span><span class="mtk1"> </span><span class="mtk4">1</span><span class="mtk9"> to </span><span class="mtk4">10</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">---</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">items</span><span class="mtk9"> map </span><span class="mtk5">(</span><span class="mtk10">$$</span><span class="mtk5">)</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk10">$</span></span></span></code></pre></div><div class="div-paragraph">Which results in:</div><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">json</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="json" data-index="3"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">[</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1"> </span><span class="mtk5">{</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk12">0</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk4">1</span><span class="mtk1"> </span><span class="mtk5">},</span><span class="mtk1"> </span><span class="mtk5">{</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk12">1</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk4">2</span><span class="mtk1"> </span><span class="mtk5">},</span><span class="mtk1"> </span><span class="mtk5">{</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk12">2</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk4">3</span><span class="mtk1"> </span><span class="mtk5">},</span><span class="mtk1"> </span><span class="mtk5">{</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk12">3</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk4">4</span><span class="mtk1"> </span><span class="mtk5">},</span><span class="mtk1"> </span><span class="mtk5">{</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk12">4</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk4">5</span><span class="mtk1"> </span><span class="mtk5">},</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1"> </span><span class="mtk5">{</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk12">5</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk4">6</span><span class="mtk1"> </span><span class="mtk5">},</span><span class="mtk1"> </span><span class="mtk5">{</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk12">6</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk4">7</span><span class="mtk1"> </span><span class="mtk5">},</span><span class="mtk1"> </span><span class="mtk5">{</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk12">7</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk4">8</span><span class="mtk1"> </span><span class="mtk5">},</span><span class="mtk1"> </span><span class="mtk5">{</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk12">8</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk4">9</span><span class="mtk1"> </span><span class="mtk5">},</span><span class="mtk1"> </span><span class="mtk5">{</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk12">9</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk4">10</span><span class="mtk1"> </span><span class="mtk5">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">]</span></span></span></code></pre></div><div class="div-paragraph">Yeah.. ok.. but where exactly did the <code>$</code> and <code>$$</code> come from, and what do they mean?</div><div class="div-paragraph">First, lets talk about infix notation vs prefix notation. We know that <code>map</code> is a function which takes parameters <code>Array&lt;T&gt;</code> and <code>Function</code>. You can just take a look at the documentation <a href="https://docs.mulesoft.com/mule-runtime/4.3/dw-core-functions-map#map1" target="_blank" rel="noreferrer">here</a> to see that. If you&#x27;re coming from another language, you&#x27;d probably expect to call it like this:</div><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">data-weave</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="data-weave" data-index="4"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3 mtki">%dw</span><span class="mtk1"> </span><span class="mtk3 mtki">2.0</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">output</span><span class="mtk1"> </span><span class="mtk6">application/json</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">var</span><span class="mtk1"> </span><span class="mtk7">items</span><span class="mtk1"> </span><span class="mtk12">=</span><span class="mtk1"> </span><span class="mtk4">1</span><span class="mtk9"> to </span><span class="mtk4">10</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">var</span><span class="mtk1"> </span><span class="mtk7">myMapFunction</span><span class="mtk1"> </span><span class="mtk12">=</span><span class="mtk1"> </span><span class="mtk5">(</span><span class="mtk8">item</span><span class="mtk5">,</span><span class="mtk1"> </span><span class="mtk8">index</span><span class="mtk5">)</span><span class="mtk1"> </span><span class="mtk12">-&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">(</span><span class="mtk8">index</span><span class="mtk5">)</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk8">item</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">---</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">map</span><span class="mtk5">(</span><span class="mtk8">items</span><span class="mtk5">,</span><span class="mtk1"> </span><span class="mtk8">myMapFunction</span><span class="mtk5">)</span></span></span></code></pre></div><div class="div-paragraph">Well, this is valid in DataWeave!</div><div class="div-paragraph">This is known as prefix notation - our function followed by our inputs. If you&#x27;ve been doing software development for a while, prefix notation makes sense - its how we do things! For most people though, infix notation, which looks like <code>X + Y</code>, where our function/operator is between our inputs, makes a lot more sense. We say <code>X plus Y</code>, not <code>plus X, Y</code>. With DataWeave, we can use infix notation for any function that takes exactly two parameters. Take <a href="https://docs.mulesoft.com/mule-runtime/4.3/dw-core-functions-orderby#orderby2" target="_blank" rel="noreferrer"><code>orderBy</code></a> - it requires an <code>Array</code> and a <code>Function</code> as input; exactly two. This also allows us to chain our functions:</div><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">data-weave</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="data-weave" data-index="5"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">payload</span><span class="mtk9"> orderBy </span><span class="mtk10">$</span><span class="mtk1">.transactionId</span><span class="mtk9"> map </span><span class="mtk10">$</span><span class="mtk1">.message</span></span></span></code></pre></div><div class="div-paragraph">What we&#x27;re saying here is <code>payload ordered by transactionId, and then mapped to an array of the object&#x27;s messages</code>. With function chaining, we take the result of each function and use it as the first parameter of the next function. There are some precedence rules you should keep in mind, which you can find <a href="https://docs.mulesoft.com/mule-runtime/4.3/dataweave-flow-control-precedence" target="_blank" rel="noreferrer">here</a>; if you&#x27;re getting an error about incorrect types with function chaining, 9/10 times you&#x27;re facing a presedence issue and wrapping with <code>( ... )</code> can fix it.</div><div class="div-paragraph">Ok - we&#x27;ve covered infix notation which explains a good bit about whats going on.. but that still doesn&#x27;t tell us what <code>$</code> and <code>$$</code> stand for! These are what are known as <a href="https://en.wikipedia.org/wiki/Syntactic_sugar" target="_blank" rel="noreferrer">syntax sugar</a>. They exist to make our code more concise and easier to understand (at least once you understand what they&#x27;re doing) by allowing us to only define the body of our anonymous functions. Lets take our example before, where we had:</div><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">data-weave</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="data-weave" data-index="6"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">var</span><span class="mtk1"> </span><span class="mtk7">myMapFunction</span><span class="mtk1"> </span><span class="mtk12">=</span><span class="mtk1"> </span><span class="mtk5">(</span><span class="mtk8">item</span><span class="mtk5">,</span><span class="mtk1"> </span><span class="mtk8">index</span><span class="mtk5">)</span><span class="mtk1"> </span><span class="mtk12">-&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">(</span><span class="mtk8">index</span><span class="mtk5">)</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk8">item</span></span></span></code></pre></div><div class="div-paragraph">Instead of defining this function in the header, we could actually do it inline as an anonymous function:</div><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">data-weave</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="data-weave" data-index="7"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">payload</span><span class="mtk9"> orderBy </span><span class="mtk10">$</span><span class="mtk1">.transactionId</span><span class="mtk9"> map </span><span class="mtk5">((</span><span class="mtk8">item</span><span class="mtk5">,</span><span class="mtk1"> </span><span class="mtk8">index</span><span class="mtk5">)</span><span class="mtk1"> </span><span class="mtk12">-&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">(</span><span class="mtk8">index</span><span class="mtk5">)</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk8">item</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">)</span></span></span></code></pre></div><div class="div-paragraph">Why not make it a little more concise? We find ourselves making anonymous functions so often, it would be really nice to just supply the body of the function, rather than the entire lambda. Well, DataWeave allows us to do this.. and says, assign <code>$</code> for the first parameter, <code>$$</code> for the second, <code>$$$</code> for the third.. noticing the pattern here? The <code>$</code> provides anonymous access to the parameters, where the number of <code>$</code> symbols represents the position of the parameter.. since <code>map</code> takes a function with <code>(item, index)</code> as its parameters, <code>$</code> becomes our item and <code>$$</code> becomes our index.</div><div class="div-paragraph">What about nested functions? Well, how can you tell the <code>$</code> from the outer function and the <code>$</code> from the inner function? You can&#x27;t, which means you won&#x27;t be able to reference the outer function&#x27;s parameters. When working with nested functions, even if you don&#x27;t need the outer function&#x27;s parameters, I would recommend using a lambda with named parameters to keep things clear. Code that is easier to understand trumps code that is more concise - it all compiles the same!</div><h3 id="-----what-magic-is-this" style="position:relative"><a href="#-----what-magic-is-this" aria-label="     what magic is this permalink" class="autolink-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>{( ... )}</code> - What magic is this?!</h3><div class="div-paragraph">If you&#x27;re familiar with javascript, you should be familiar with object deconstruction as it&#x27;s become an extremely common pattern. Well, DataWeave can do it too!</div><div class="div-paragraph">Here is our first example, deconstructing one object in order to build a new one:</div><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">data-weave</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="data-weave" data-index="8"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3 mtki">%dw</span><span class="mtk1"> </span><span class="mtk3 mtki">2.0</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">output</span><span class="mtk1"> </span><span class="mtk6">application/json</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">var</span><span class="mtk1"> </span><span class="mtk7">items</span><span class="mtk1"> </span><span class="mtk12">=</span><span class="mtk1"> [</span><span class="mtk5">{</span><span class="mtk1"> id</span><span class="mtk5">:</span><span class="mtk1"> </span><span class="mtk4">1</span><span class="mtk5">,</span><span class="mtk1"> message</span><span class="mtk5">:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">Hello world!</span><span class="mtk5">&quot;</span><span class="mtk1"> </span><span class="mtk5">},</span><span class="mtk1"> </span><span class="mtk5">{</span><span class="mtk1"> id</span><span class="mtk5">:</span><span class="mtk1"> </span><span class="mtk4">2</span><span class="mtk5">,</span><span class="mtk1"> message</span><span class="mtk5">:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">Goodbye world!</span><span class="mtk5">&quot;</span><span class="mtk1"> </span><span class="mtk5">}</span><span class="mtk1">]</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">---</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">items</span><span class="mtk9"> map </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">(</span><span class="mtk10">$</span><span class="mtk5">),</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  destination</span><span class="mtk5">:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">dest1</span><span class="mtk5">&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">}</span></span></span></code></pre></div><div class="div-paragraph">And we get the output:</div><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">json</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="json" data-index="9"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">[{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;</span><span class="mtk12">id</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk4">1</span><span class="mtk5">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;</span><span class="mtk12">message</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">Hello world!</span><span class="mtk5">&quot;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;</span><span class="mtk12">destination</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">dest1</span><span class="mtk5">&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">},</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;</span><span class="mtk12">id</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk4">2</span><span class="mtk5">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;</span><span class="mtk12">message</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">Goodbye world!</span><span class="mtk5">&quot;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;</span><span class="mtk12">destination</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">dest1</span><span class="mtk5">&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">}]</span></span></span></code></pre></div><div class="div-paragraph">As you can see, we&#x27;ve deconstructed the key-value pairs of the object, allowing us to preserve the original object in our new object. To better illustrate what this is doing, let&#x27;s change it up a bit.</div><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">data-weave</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="data-weave" data-index="10"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3 mtki">%dw</span><span class="mtk1"> </span><span class="mtk3 mtki">2.0</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">output</span><span class="mtk1"> </span><span class="mtk6">application/json</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">var</span><span class="mtk1"> </span><span class="mtk7">items</span><span class="mtk1"> </span><span class="mtk12">=</span><span class="mtk1"> [</span><span class="mtk5">{</span><span class="mtk1"> id</span><span class="mtk5">:</span><span class="mtk1"> </span><span class="mtk4">1</span><span class="mtk5">,</span><span class="mtk1"> message</span><span class="mtk5">:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">Hello world!</span><span class="mtk5">&quot;</span><span class="mtk1"> </span><span class="mtk5">},</span><span class="mtk1"> </span><span class="mtk5">{</span><span class="mtk1"> id</span><span class="mtk5">:</span><span class="mtk1"> </span><span class="mtk4">2</span><span class="mtk5">,</span><span class="mtk1"> message</span><span class="mtk5">:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">Goodbye world!</span><span class="mtk5">&quot;</span><span class="mtk1"> </span><span class="mtk5">}</span><span class="mtk1">]</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">---</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">{(</span><span class="mtk8">items</span><span class="mtk5">)}</span></span></span></code></pre></div><div class="div-paragraph">As output we get:</div><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">json</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="json" data-index="11"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">&quot;</span><span class="mtk12">id</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk4">1</span><span class="mtk5">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">&quot;</span><span class="mtk12">message</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">Hello world!</span><span class="mtk5">&quot;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">&quot;</span><span class="mtk12">id</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk4">2</span><span class="mtk5">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">&quot;</span><span class="mtk12">message</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">Goodbye world!</span><span class="mtk5">&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">}</span></span></span></code></pre></div><div class="div-paragraph">As you can see, we can deconstruct arrays too - we&#x27;ve deconstructed our array of objects into a single object of key value pairs. The gist is that when <code>( .. )</code> is contained within <code>{ .. }</code>, the contents get deconstructed. Combined with the ability to remove specific keys from an object, this makes it very easy (well, as easy as it got pre <a href="https://docs.mulesoft.com/mule-runtime/4.3/dw-values-functions-update" target="_blank" rel="noreferrer"><code>update</code></a>) to update a key by removing it and then reconstructing it with the new value.</div><hr/><h1 id="must-know-functions" style="position:relative"><a href="#must-know-functions" aria-label="must know functions permalink" class="autolink-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Must Know Functions</h1><h3 id="map" style="position:relative"><a href="#map" aria-label="map permalink" class="autolink-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a href="https://docs.mulesoft.com/mule-runtime/4.3/dw-core-functions-map" target="_blank" rel="noreferrer">map</a></h3><div class="div-paragraph">Easily the most used function in DataWeave, the <code>map</code> function iterates through our array, calling a function passing in the item and index, and returning the results as an array.</div><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">data-weave</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="data-weave" data-index="12"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3 mtki">%dw</span><span class="mtk1"> </span><span class="mtk3 mtki">2.0</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">output</span><span class="mtk1"> </span><span class="mtk6">application/json</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">var</span><span class="mtk1"> </span><span class="mtk7">items</span><span class="mtk1"> </span><span class="mtk12">=</span><span class="mtk1"> </span><span class="mtk4">10</span><span class="mtk9"> to </span><span class="mtk4">100</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">---</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">items</span><span class="mtk9"> map </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  index</span><span class="mtk5">:</span><span class="mtk1"> </span><span class="mtk10">$$</span><span class="mtk5">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  value</span><span class="mtk5">:</span><span class="mtk1"> </span><span class="mtk10">$</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">}</span></span></span></code></pre></div><div class="div-paragraph">Results in:</div><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">json</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="json" data-index="13"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">[</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;</span><span class="mtk12">index</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk4">0</span><span class="mtk5">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;</span><span class="mtk12">value</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk4">10</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">},</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;</span><span class="mtk12">index</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk4">1</span><span class="mtk5">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;</span><span class="mtk12">value</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk4">11</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">},</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;</span><span class="mtk12">index</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk4">2</span><span class="mtk5">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;</span><span class="mtk12">value</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk4">12</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">},</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk10">...</span></span></span></code></pre></div><div class="div-paragraph">Map is iterating every item, and we&#x27;re mapping it into a new item with the keys <code>index</code> and <code>value</code>. Remember though, Data is immutable in data-weave, so we aren&#x27;t changing the array in place, so we have to yield a new item which is included in our resulting array!</div><h3 id="mapobject" style="position:relative"><a href="#mapobject" aria-label="mapobject permalink" class="autolink-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a href="https://docs.mulesoft.com/mule-runtime/4.3/dw-core-functions-mapobject" target="_blank" rel="noreferrer">mapObject</a></h3><div class="div-paragraph"><code>mapObject</code> allows us to iterate all of the <code>key:value</code> pairs of an object. <code>$$</code> is our key, <code>$</code> is our value, and <code>$$$</code> is our <code>key:value</code> index. <code>mapObject</code> takes in an object and should yield an object.</div><div class="div-paragraph">A real world use case might be doing something like taking the result of a scatter-gather, and flattening it into a single object of <code>key:value</code> pairs. We can easily do this by doing a <code>mapObject</code> and deconstructing our payloads (of course, if you go learn your selectors, you could also accomplish this more succinctly).</div><div class="div-paragraph">Input:</div><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">json</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="json" data-index="14"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">&quot;</span><span class="mtk12">0</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;</span><span class="mtk7">payload</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk5">&quot;</span><span class="mtk4">firstName</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">Mike</span><span class="mtk5">&quot;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk5">&quot;</span><span class="mtk4">lastName</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">Jones</span><span class="mtk5">&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">},</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">&quot;</span><span class="mtk12">1</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk5">&quot;</span><span class="mtk7">payload</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          </span><span class="mtk5">&quot;</span><span class="mtk4">Line1</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">555 Main Street</span><span class="mtk5">&quot;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          </span><span class="mtk5">&quot;</span><span class="mtk4">Line2</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk4">null</span><span class="mtk5">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          </span><span class="mtk5">&quot;</span><span class="mtk4">City</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">Atlanta</span><span class="mtk5">&quot;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          </span><span class="mtk5">&quot;</span><span class="mtk4">State</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">GA</span><span class="mtk5">&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk5">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">}</span></span></span></code></pre></div><div class="div-paragraph">DataWeave:</div><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">data-weave</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="data-weave" data-index="15"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3 mtki">%dw</span><span class="mtk1"> </span><span class="mtk3 mtki">2.0</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">output</span><span class="mtk1"> </span><span class="mtk6">application/json</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">---</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">payload</span><span class="mtk9"> mapObject </span><span class="mtk5">{(</span><span class="mtk1"> </span><span class="mtk10">$</span><span class="mtk1">.payload </span><span class="mtk5">)}</span></span></span></code></pre></div><div class="div-paragraph">Transforms to:</div><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">json</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="json" data-index="16"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">&quot;</span><span class="mtk12">firstName</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">Mike</span><span class="mtk5">&quot;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">&quot;</span><span class="mtk12">lastName</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">Jones</span><span class="mtk5">&quot;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">&quot;</span><span class="mtk12">Line1</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">555 Main Street</span><span class="mtk5">&quot;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">&quot;</span><span class="mtk12">Line2</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk4">null</span><span class="mtk5">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">&quot;</span><span class="mtk12">City</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">Atlanta</span><span class="mtk5">&quot;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">&quot;</span><span class="mtk12">State</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">GA</span><span class="mtk5">&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">}</span></span></span></code></pre></div><h3 id="match" style="position:relative"><a href="#match" aria-label="match permalink" class="autolink-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a href="https://docs.mulesoft.com/mule-runtime/4.3/dw-core-functions-match" target="_blank" rel="noreferrer">match</a></h3><h3 id="putting-them-together-for-a-recursive-pattern" style="position:relative"><a href="#putting-them-together-for-a-recursive-pattern" aria-label="putting them together for a recursive pattern permalink" class="autolink-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Putting them together for a recursive pattern..</h3><div class="div-paragraph">Now that we know <code>mapObject</code>, <code>map</code>, and <code>match</code>, we can put them together for a basic recursive pattern that allows us to touch the entire structure of our object.</div><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">data-weave</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="data-weave" data-index="17"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3 mtki">%dw</span><span class="mtk1"> </span><span class="mtk3 mtki">2.0</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">var</span><span class="mtk1"> </span><span class="mtk7">diveObject</span><span class="mtk1"> </span><span class="mtk12">=</span><span class="mtk1"> </span><span class="mtk5">(</span><span class="mtk1">p</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk8">Any</span><span class="mtk5">)</span><span class="mtk1"> </span><span class="mtk12">-&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk8">p</span><span class="mtk1"> </span><span class="mtk5 mtki">match</span><span class="mtk1"> </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5 mtki">case</span><span class="mtk1"> </span><span class="mtk8">p</span><span class="mtk1"> </span><span class="mtk5 mtki">is</span><span class="mtk1"> </span><span class="mtk7">Array</span><span class="mtk1"> </span><span class="mtk5 mtki">-&gt;</span><span class="mtk1"> </span><span class="mtk8">p</span><span class="mtk9"> map </span><span class="mtk8">diveObject</span><span class="mtk5">(</span><span class="mtk10">$</span><span class="mtk5">),</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5 mtki">case</span><span class="mtk1"> </span><span class="mtk8">p</span><span class="mtk1"> </span><span class="mtk5 mtki">is</span><span class="mtk1"> </span><span class="mtk7">Object</span><span class="mtk1"> </span><span class="mtk5 mtki">-&gt;</span><span class="mtk1"> </span><span class="mtk8">p</span><span class="mtk9"> mapObject </span><span class="mtk5">(</span><span class="mtk10">$$</span><span class="mtk5">)</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk8">diveObject</span><span class="mtk5">(</span><span class="mtk10">$</span><span class="mtk5">),</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5 mtki">else</span><span class="mtk1"> </span><span class="mtk5 mtki">-&gt;</span><span class="mtk1"> </span><span class="mtk10">$</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  }</span></span></span></code></pre></div><div class="div-paragraph">To break this down, we&#x27;re creating a function and saying (1) when <code>p</code> is an <code>Array</code>, iterate through each element of the array and call <code>diveObject</code> on it; (2) when <code>p</code> is an <code>Object</code>, iterate through each <code>key:value</code> pair, reconstructing it with the original <code>key</code> and then calling <code>diveObject</code> on the value; and (3) when it isn&#x27;t an <code>Object</code> or <code>Array</code>, just yield <code>p</code>. As this runs through recursively, if the value of a <code>key:value</code> pair is another <code>Object</code> or <code>Array</code>, it will now start traversing it, so on and so forth, until it has iterated the entire structure.</div><div class="div-paragraph">This is a fairly common pattern you&#x27;ll see in DataWeave.</div><div class="div-paragraph">Let&#x27;s consider a use case where we want to find ALL values of Cat, regardless of where in the object it is, and change it to Dog.. pretty easy with this pattern!</div><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">data-weave</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="data-weave" data-index="18"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3 mtki">%dw</span><span class="mtk1"> </span><span class="mtk3 mtki">2.0</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">var</span><span class="mtk1"> </span><span class="mtk7">imADogPerson</span><span class="mtk1"> </span><span class="mtk12">=</span><span class="mtk1"> </span><span class="mtk5">(</span><span class="mtk1">p</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk8">Any</span><span class="mtk5">)</span><span class="mtk1"> </span><span class="mtk12">-&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk8">p</span><span class="mtk1"> </span><span class="mtk5 mtki">match</span><span class="mtk1"> </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5 mtki">case</span><span class="mtk1"> </span><span class="mtk5 mtki">is</span><span class="mtk1"> </span><span class="mtk7">Array</span><span class="mtk1"> </span><span class="mtk5 mtki">-&gt;</span><span class="mtk1"> </span><span class="mtk8">p</span><span class="mtk9"> map </span><span class="mtk8">imADogPerson</span><span class="mtk5">(</span><span class="mtk10">$</span><span class="mtk5">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5 mtki">case</span><span class="mtk1"> </span><span class="mtk5 mtki">is</span><span class="mtk1"> </span><span class="mtk7">Object</span><span class="mtk1"> </span><span class="mtk5 mtki">-&gt;</span><span class="mtk1"> </span><span class="mtk8">p</span><span class="mtk9"> mapObject </span><span class="mtk5">(</span><span class="mtk10">$$</span><span class="mtk5">)</span><span class="mtk12">:</span><span class="mtk1"> </span><span class="mtk8">imADogPerson</span><span class="mtk5">(</span><span class="mtk10">$</span><span class="mtk5">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5 mtki">else</span><span class="mtk1"> </span><span class="mtk5 mtki">-&gt; if</span><span class="mtk1"> </span><span class="mtk5">(</span><span class="mtk8">lower</span><span class="mtk5">(</span><span class="mtk10">$</span><span class="mtk5">)</span><span class="mtk1"> </span><span class="mtk12">==</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">cat</span><span class="mtk5">&quot;)</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">dog</span><span class="mtk5">&quot;</span><span class="mtk1"> </span><span class="mtk5 mtki">else</span><span class="mtk1"> </span><span class="mtk10">$</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">output</span><span class="mtk1"> </span><span class="mtk6">application/json</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">---</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">imADogPerson</span><span class="mtk5">(</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;</span><span class="mtk6">allowedSpecies</span><span class="mtk5">&quot;:</span><span class="mtk1"> [</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk5">&quot;</span><span class="mtk6">fish</span><span class="mtk5">&quot;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk5">&quot;</span><span class="mtk6">dog</span><span class="mtk5">&quot;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk5">&quot;</span><span class="mtk6">cat</span><span class="mtk5">&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    ]</span><span class="mtk5">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;</span><span class="mtk6">myPet</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">cat</span><span class="mtk5">&quot;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;</span><span class="mtk6">petsInMyBuilding</span><span class="mtk5">&quot;:</span><span class="mtk1"> [</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk5">&quot;</span><span class="mtk6">name</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">bob</span><span class="mtk5">&quot;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk5">&quot;</span><span class="mtk6">species</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">fish</span><span class="mtk5">&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk5">},</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk5">&quot;</span><span class="mtk6">name</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">lyla</span><span class="mtk5">&quot;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk5">&quot;</span><span class="mtk6">species</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">cat</span><span class="mtk5">&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk5">},</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk5">&quot;</span><span class="mtk6">name</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">roxy</span><span class="mtk5">&quot;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk5">&quot;</span><span class="mtk6">species</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">dog</span><span class="mtk5">&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk5">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    ]</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">)</span></span></span></code></pre></div><div class="div-paragraph">Which results in:</div><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">json</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="json" data-index="19"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">&quot;</span><span class="mtk12">allowedSpecies</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">[</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;</span><span class="mtk6">fish</span><span class="mtk5">&quot;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;</span><span class="mtk6">dog</span><span class="mtk5">&quot;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">&quot;</span><span class="mtk6">dog</span><span class="mtk5">&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">],</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">&quot;</span><span class="mtk12">myPet</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">dog</span><span class="mtk5">&quot;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">&quot;</span><span class="mtk12">petsInMyBuilding</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">[</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk5">&quot;</span><span class="mtk7">name</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">bob</span><span class="mtk5">&quot;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk5">&quot;</span><span class="mtk7">species</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">fish</span><span class="mtk5">&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">},</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk5">&quot;</span><span class="mtk7">name</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">lyla</span><span class="mtk5">&quot;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk5">&quot;</span><span class="mtk7">species</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">dog</span><span class="mtk5">&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">},</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk5">&quot;</span><span class="mtk7">name</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">roxy</span><span class="mtk5">&quot;,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk5">&quot;</span><span class="mtk7">species</span><span class="mtk5">&quot;:</span><span class="mtk1"> </span><span class="mtk5">&quot;</span><span class="mtk6">dog</span><span class="mtk5">&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk5">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk5">]</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk5">}</span></span></span></code></pre></div><div class="div-paragraph">Ok, ok.. I promise I like cats too!! As you can see though, this is a powerful pattern in which we can manipulate the entire structure of an object quickly, and easily. One of my CookBook examples shows you how to append an XML namespace on very object key as simply as:</div><div class="codeWrapper"><button class="CopyCodeButton">Copy</button><div class="CodeLanguageStub">data-weave</div><div class="ConfettiWrapper"><div style="position:relative"></div></div><pre class="grvsc-container community-material-theme-palenight" data-language="data-weave" data-index="20"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">payload</span><span class="mtk9"> appendNamespace </span><span class="mtk8">tem</span></span></span></code></pre></div><div class="div-paragraph">For more complicated usages, where you only want to update a specific key at a specific level, we have the new update function which you can find in the docs.</div><h3 id="filter" style="position:relative"><a href="#filter" aria-label="filter permalink" class="autolink-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a href="https://docs.mulesoft.com/mule-runtime/4.3/dw-core-functions-filter" target="_blank" rel="noreferrer">filter</a></h3><h3 id="orderby" style="position:relative"><a href="#orderby" aria-label="orderby permalink" class="autolink-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a href="https://docs.mulesoft.com/mule-runtime/4.3/dw-core-functions-orderby" target="_blank" rel="noreferrer">orderBy</a></h3><h3 id="flatten--flatmap" style="position:relative"><a href="#flatten--flatmap" aria-label="flatten  flatmap permalink" class="autolink-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a href="https://docs.mulesoft.com/mule-runtime/4.3/dw-core-functions-flatten" target="_blank" rel="noreferrer">flatten</a> &amp; <a href="https://docs.mulesoft.com/mule-runtime/4.3/dw-core-functions-flatmap" target="_blank" rel="noreferrer">flatMap</a></h3><h3 id="pluck" style="position:relative"><a href="#pluck" aria-label="pluck permalink" class="autolink-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a href="https://docs.mulesoft.com/mule-runtime/4.3/dw-core-functions-pluck" target="_blank" rel="noreferrer">pluck</a></h3><h3 id="reduce" style="position:relative"><a href="#reduce" aria-label="reduce permalink" class="autolink-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a href="https://docs.mulesoft.com/mule-runtime/4.3/dw-core-functions-pluck" target="_blank" rel="noreferrer">reduce</a></h3><h3 id="-and---" style="position:relative"><a href="#-and---" aria-label=" and    permalink" class="autolink-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a href="https://docs.mulesoft.com/mule-runtime/4.3/dw-core-functions-plusplus" target="_blank" rel="noreferrer">++</a> and <a href="https://docs.mulesoft.com/mule-runtime/4.3/dw-core-functions-minusminus" target="_blank" rel="noreferrer">--</a></h3><style class="grvsc-styles">
  .grvsc-container {
    overflow: auto;
    position: relative;
    -webkit-overflow-scrolling: touch;
    padding-top: 1rem;
    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));
    padding-bottom: 1rem;
    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));
    border-radius: 8px;
    border-radius: var(--grvsc-border-radius, 8px);
    font-feature-settings: normal;
    line-height: 1.4;
  }
  
  .grvsc-code {
    display: table;
  }
  
  .grvsc-line {
    display: table-row;
    box-sizing: border-box;
    width: 100%;
    position: relative;
  }
  
  .grvsc-line &gt; * {
    position: relative;
  }
  
  .grvsc-gutter-pad {
    display: table-cell;
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  .grvsc-gutter {
    display: table-cell;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter::before {
    content: attr(data-content);
  }
  
  .grvsc-source {
    display: table-cell;
    padding-left: 1.5rem;
    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));
    padding-right: 1.5rem;
    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));
  }
  
  .grvsc-source:empty::after {
    content: &#x27; &#x27;;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter + .grvsc-source {
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  /* Line transformer styles */
  
  .grvsc-has-line-highlighting &gt; .grvsc-code &gt; .grvsc-line::before {
    content: &#x27; &#x27;;
    position: absolute;
    width: 100%;
  }
  
  .grvsc-line-diff-add::before {
    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));
  }
  
  .grvsc-line-diff-del::before {
    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));
  }
  
  .grvsc-line-number {
    padding: 0 2px;
    text-align: right;
    opacity: 0.7;
  }
  
  .community-material-theme-palenight {
    background-color: #292D3E;
    color: #A6ACCD;
  }
  .community-material-theme-palenight .mtki { font-style: italic; }
  .community-material-theme-palenight .mtk3 { color: #676E95; }
  .community-material-theme-palenight .mtk1 { color: #FFFFFF; }
  .community-material-theme-palenight .mtk12 { color: #C792EA; }
  .community-material-theme-palenight .mtk6 { color: #C3E88D; }
  .community-material-theme-palenight .mtk7 { color: #FFCB6B; }
  .community-material-theme-palenight .mtk4 { color: #F78C6C; }
  .community-material-theme-palenight .mtk9 { color: #82AAFF; }
  .community-material-theme-palenight .mtk8 { color: #A6ACCD; }
  .community-material-theme-palenight .mtk5 { color: #89DDFF; }
  .community-material-theme-palenight .mtk10 { color: #FF5370; }
  .community-material-theme-palenight .grvsc-line-highlighted::before {
    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));
    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));
  }
</style></div></div></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2020/getting-started-with-dw/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-64e392f65b32dbfbc7b7.js"],"app":["/app-b707b6c22bd8889d0961.js"],"component---src-components-post-view-js":["/component---src-components-post-view-js-367f5305947f2f226d14.js"],"component---src-pages-404-js":["/component---src-pages-404-js-2c5e608b2f28cc0472b0.js"],"component---src-templates-index-js":["/component---src-templates-index-js-554a9c0f8b6ebe83a25e.js"],"component---src-templates-labs-js":["/component---src-templates-labs-js-3320cf3137a54759c8fd.js"],"component---src-templates-tag-js":["/component---src-templates-tag-js-d5dbde74aaa3f6051094.js"]};/*]]>*/</script><script src="/polyfill-64e392f65b32dbfbc7b7.js" nomodule=""></script><script src="/component---src-components-post-view-js-367f5305947f2f226d14.js" async=""></script><script src="/b66a4dad82990de4e9b8f307132ca2e030406df0-aed584aa77011b175486.js" async=""></script><script src="/commons-17f5247a92782cb2a13d.js" async=""></script><script src="/a9a7754c-34b8923232843e7049e0.js" async=""></script><script src="/styles-407fe62976dc5310c43e.js" async=""></script><script src="/app-b707b6c22bd8889d0961.js" async=""></script><script src="/framework-1bcdbcdd30f43763a25c.js" async=""></script><script src="/webpack-runtime-79c6269c1ad1041a7c80.js" async=""></script></body></html>